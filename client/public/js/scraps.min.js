if("undefined"!==typeof exports)var Space=require("space");var Scraps={styleToCss:function(e,c){var d=e+" {\n",a;for(a in c)c.hasOwnProperty(a)&&(d+="  "+a+" : "+c[a].toString().replace(/\;$/,"")+";\n");return d+"}\n"},styleToInline:function(e){var c="",d;for(d in e)e.hasOwnProperty(d)&&(c+=d+": "+e[d].toString().replace(/\;$/,"")+"; ");return c}};
(function(){function e(a,b){this.tag=a;this.attrs=b||{};this.content="";return this}function c(a,b){this.path=a;this.id=a.split(/ /g).pop();this.clear();b instanceof Space||(b=new Space(b));this.patch(b);var d=this.get("scraps");d instanceof Space&&d.each(function(b,e){d.set(b,new c(a+" "+b,e))});return this}function d(a){this.clear();a&&this.patch(a);this.loadScraps();return this}e.prototype.addClass=function(a){this.attrs["class"]=this.attrs["class"]?this.attrs["class"]+(" "+a):a};e.prototype.append=
function(a){this.content+=a};e.prototype.attr=function(a,b){this.attrs[a]=b};e.prototype.html=function(a){this.content+=a};e.prototype.toHtml=function(){var a="<"+this.tag,b;for(b in this.attrs)this.attrs.hasOwnProperty(b)&&(a+=" "+b+'="'+this.attrs[b]+'"');"meta"===this.tag?a+=' content="'+this.content+'">':(a+=">"+this.content,a+="</"+this.tag+">");return a};c.prototype=new Space;c.prototype.clone=function(a){return new c(a,this)};c.prototype.selector=function(){return"#"+this.path.replace(/ /g,
" #")};c.prototype.setChildren=function(a){var b=this.get("scraps");if(!b)return this;var c=this;b.each(function(b,d){c.div.html(d.toHtml(a))});return this};c.prototype.setContent=function(){this.get("content")&&this.div.html(this.get("content"));var a=this.get("styles");if(a&&a instanceof Space){var b=this.div;a.each(function(a,c){b.html(Scraps.styleToCss(a,c.toObject()))})}return this};c.prototype.setTag=function(){tag=this.get("tag")?this.get("tag"):"div";this.div=new e(tag)};c.prototype.setProperties=
function(){this.each(function(a){if(a.match(/^(scraps|content|tag|on.*|style)$/))return!0;this.setProperty(a)})};c.prototype.setProperty=function(a){this.get(a)&&this.div.attr(a,this.get(a))};c.prototype.setHandlers=function(){this.each(function(a,b){if(!a.match(/^on.*$/))return!0;this.div.attr(a,b)})};c.prototype.setStyle=function(){if(!this.get("style"))return null;if(!(this.get("style")instanceof Space))return this.div.attr("style",this.get("style"));this.div.attr("style",Scraps.styleToInline(this.get("style").toObject()))};
c.prototype.toHtml=function(a){this.setTag();this.div.attr("id",this.id);this.setProperties();this.setContent();this.setChildren(a);this.setStyle();this.setHandlers();return a?a.call(this):this.div.toHtml()};d.prototype=new Space;d.prototype.clone=function(){return new d(this.toObject())};d.prototype.loadScraps=function(){var a=this;this.each(function(b,d){a.set(b,new c(b,d))})};d.prototype.toHtml=function(a){var b="<!doctype html>\n<html>";this.each(function(c,d){b+="\n  "+d.toHtml(a)});return b+=
"\n</html>"};Scraps.Element=e;Scraps.Scrap=c;Scraps.Page=d})();"undefined"!==typeof exports&&(module.exports=Scraps);
