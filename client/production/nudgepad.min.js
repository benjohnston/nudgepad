/*
 Copyright (c) 2008-2009, Alex Weber
 @see http://anmar.eu.org/projects/jssha2/
 @see http://pajhome.org.uk/crypt/md5

 Distributed under the terms of the new BSD License
 http://www.opensource.org/licenses/bsd-license.php

*/
(function(a,c){function b(a){var b=a.length,c=l.type(a);return l.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&0<b&&b-1 in a)}function d(a){var b=Na[a]={};return l.each(a.match(ha)||[],function(a,c){b[c]=!0}),b}function e(a,b,d,e){if(l.acceptData(a)){var h,f,k=l.expando,g=a.nodeType,m=g?l.cache:a,n=g?a[k]:a[k]&&k;if(n&&m[n]&&(e||m[n].data)||d!==c||"string"!=typeof b)return n||(n=g?a[k]=S.pop()||l.guid++:k),m[n]||(m[n]=g?{}:{toJSON:l.noop}),("object"==
typeof b||"function"==typeof b)&&(e?m[n]=l.extend(m[n],b):m[n].data=l.extend(m[n].data,b)),f=m[n],e||(f.data||(f.data={}),f=f.data),d!==c&&(f[l.camelCase(b)]=d),"string"==typeof b?(h=f[b],null==h&&(h=f[l.camelCase(b)])):h=f,h}}function k(a,b,c){if(l.acceptData(a)){var d,e,f=a.nodeType,h=f?l.cache:a,k=f?a[l.expando]:l.expando;if(h[k]){if(b&&(d=c?h[k]:h[k].data)){l.isArray(b)?b=b.concat(l.map(b,l.camelCase)):b in d?b=[b]:(b=l.camelCase(b),b=b in d?[b]:b.split(" "));for(e=b.length;e--;)delete d[b[e]];
if(c?!g(d):!l.isEmptyObject(d))return}(c||(delete h[k].data,g(h[k])))&&(f?l.cleanData([a],!0):l.support.deleteExpando||h!=h.window?delete h[k]:h[k]=null)}}}function h(a,b,d){if(d===c&&1===a.nodeType){var e="data-"+b.replace(Ya,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:fa.test(d)?l.parseJSON(d):d}catch(h){}l.data(a,b,d)}else d=c}return d}function g(a){for(var b in a)if(("data"!==b||!l.isEmptyObject(a[b]))&&"toJSON"!==
b)return!1;return!0}function f(){return!0}function n(){return!1}function p(){try{return E.activeElement}catch(a){}}function t(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function s(a,b,c){if(l.isFunction(b))return l.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return l.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Za.test(b))return l.filter(b,a,c);b=l.filter(b,a)}return l.grep(a,function(a){return 0<=l.inArray(a,b)!==c})}function m(a){var b=Ga.split("|");a=
a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function v(a,b){return l.nodeName(a,"table")&&l.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function r(a){return a.type=(null!==l.find.attr(a,"type"))+"/"+a.type,a}function u(a){var b=Nb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function A(a,b){for(var c,d=0;null!=(c=a[d]);d++)l._data(c,"globalEval",
!b||l._data(b[d],"globalEval"))}function I(a,b){if(1===b.nodeType&&l.hasData(a)){var c,d,e;d=l._data(a);var h=l._data(b,d),f=d.events;if(f)for(c in delete h.handle,h.events={},f)for(d=0,e=f[c].length;e>d;d++)l.event.add(b,c,f[c][d]);h.data&&(h.data=l.extend({},h.data))}}function D(a,b){var d,e,h=0,f=typeof a.getElementsByTagName!==X?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==X?a.querySelectorAll(b||"*"):c;if(!f)for(f=[],d=a.childNodes||a;null!=(e=d[h]);h++)!b||l.nodeName(e,b)?f.push(e):
l.merge(f,D(e,b));return b===c||b&&l.nodeName(a,b)?l.merge([a],f):f}function L(a){kb.test(a.type)&&(a.defaultChecked=a.checked)}function q(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=vb.length;e--;)if(b=vb[e]+c,b in a)return b;return d}function x(a,b){return a=b||a,"none"===l.css(a,"display")||!l.contains(a.ownerDocument,a)}function M(a,b){for(var c,d,e,h=[],f=0,k=a.length;k>f;f++)d=a[f],d.style&&(h[f]=l._data(d,"olddisplay"),c=d.style.display,b?(h[f]||"none"!==c||
(d.style.display=""),""===d.style.display&&x(d)&&(h[f]=l._data(d,"olddisplay",ba(d.nodeName)))):h[f]||(e=x(d),(c&&"none"!==c||!e)&&l._data(d,"olddisplay",e?c:l.css(d,"display"))));for(f=0;k>f;f++)d=a[f],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?h[f]||"":"none"));return a}function z(a,b,c){return(a=Ob.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function P(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===c&&(f+=l.css(a,
c+Aa[b],!0,e)),d?("content"===c&&(f-=l.css(a,"padding"+Aa[b],!0,e)),"margin"!==c&&(f-=l.css(a,"border"+Aa[b]+"Width",!0,e))):(f+=l.css(a,"padding"+Aa[b],!0,e),"padding"!==c&&(f+=l.css(a,"border"+Aa[b]+"Width",!0,e)));return f}function da(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ba(a),h=l.support.boxSizing&&"border-box"===l.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ca(a,b,f),(0>e||null==e)&&(e=a.style[b]),$a.test(e))return e;d=h&&(l.support.boxSizingReliable||e===a.style[b]);
e=parseFloat(e)||0}return e+P(a,b,c||(h?"border":"content"),d,f)+"px"}function ba(a){var b=E,c=wb[a];return c||(c=T(a,b),"none"!==c&&c||(Oa=(Oa||l("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(Oa[0].contentWindow||Oa[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=T(a,b),Oa.detach()),wb[a]=c),c}function T(a,b){var c=l(b.createElement(a)).appendTo(b.body),d=l.css(c[0],"display");return c.remove(),
d}function Z(a,b,c,d){var e;if(l.isArray(b))l.each(b,function(b,e){c||Pb.test(a)?d(a,e):Z(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==l.type(b))d(a,b);else for(e in b)Z(a+"["+e+"]",b[e],c,d)}function U(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ha)||[];if(l.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function aa(a,b,d,e){function f(g){var m;return h[g]=!0,l.each(a[g]||
[],function(a,B){var l=B(b,d,e);return"string"!=typeof l||k||h[l]?k?!(m=l):c:(b.dataTypes.unshift(l),f(l),!1)}),m}var h={},k=a===lb;return f(b.dataTypes[0])||!h["*"]&&f("*")}function J(a,b){var d,e,f=l.ajaxSettings.flatOptions||{};for(e in b)b[e]!==c&&((f[e]?a:d||(d={}))[e]=b[e]);return d&&l.extend(!0,a,d),a}function Y(){try{return new a.XMLHttpRequest}catch(b){}}function V(){return setTimeout(function(){Ha=c}),Ha=l.now()}function w(a,b,c){for(var d,e=(Pa[b]||[]).concat(Pa["*"]),l=0,f=e.length;f>
l;l++)if(d=e[l].call(c,b,a))return d}function K(a,b,c){var d,e=0,f=ab.length,h=l.Deferred().always(function(){delete k.elem}),k=function(){if(d)return!1;for(var b=Ha||V(),b=Math.max(0,g.startTime+g.duration-b),c=1-(b/g.duration||0),e=0,l=g.tweens.length;l>e;e++)g.tweens[e].run(c);return h.notifyWith(a,[g,c,b]),1>c&&l?b:(h.resolveWith(a,[g]),!1)},g=h.promise({elem:a,props:l.extend({},b),opts:l.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ha||V(),duration:c.duration,
tweens:[],createTween:function(b,c){var d=l.Tween(a,g.opts,b,c,g.opts.specialEasing[b]||g.opts.easing);return g.tweens.push(d),d},stop:function(b){var c=0,e=b?g.tweens.length:0;if(d)return this;for(d=!0;e>c;c++)g.tweens[c].run(1);return b?h.resolveWith(a,[g,b]):h.rejectWith(a,[g,b]),this}});c=g.props;for(C(c,g.opts.specialEasing);f>e;e++)if(b=ab[e].call(g,a,c,g.opts))return b;return l.map(c,w,g),l.isFunction(g.opts.start)&&g.opts.start.call(a,g),l.fx.timer(l.extend(k,{elem:a,anim:g,queue:g.opts.queue})),
g.progress(g.opts.progress).done(g.opts.done,g.opts.complete).fail(g.opts.fail).always(g.opts.always)}function C(a,b){var c,d,e,f,h;for(c in a)if(d=l.camelCase(c),e=b[d],f=a[c],l.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),h=l.cssHooks[d],h&&"expand"in h)for(c in f=h.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}function F(a,b,c,d,e){return new F.prototype.init(a,b,c,d,e)}function G(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Aa[e],d["margin"+c]=d["padding"+
c]=a;return b&&(d.opacity=d.width=a),d}function y(a){return l.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var N,R,X=typeof c,ca=a.location,E=a.document,la=E.documentElement,ja=a.jQuery,W=a.$,H={},S=[],ua=S.concat,sa=S.push,pa=S.slice,ia=S.indexOf,xa=H.toString,ka=H.hasOwnProperty,ma="1.10.2".trim,l=function(a,b){return new l.fn.init(a,b,R)},qa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ha=/\S+/g,bb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ia=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,cb=
/^<(\w+)\s*\/?>(?:<\/\1>|)$/,na=/^[\],:{}\s]*$/,Qa=/(?:^|:|,)(?:\s*\[)+/g,Q=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Ja=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,db=/^-ms-/,Ra=/-([\da-z])/gi,eb=function(a,b){return b.toUpperCase()},ga=function(a){(E.addEventListener||"load"===a.type||"complete"===E.readyState)&&(Sa(),l.ready())},Sa=function(){E.addEventListener?(E.removeEventListener("DOMContentLoaded",ga,!1),a.removeEventListener("load",ga,!1)):(E.detachEvent("onreadystatechange",
ga),a.detachEvent("onload",ga))};l.fn=l.prototype={jquery:"1.10.2",constructor:l,init:function(a,b,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Ia.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof l?b[0]:b,l.merge(this,l.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:E,!0)),cb.test(e[1])&&l.isPlainObject(b))for(e in b)l.isFunction(this[e])?this[e](b[e]):
this.attr(e,b[e]);return this}if(f=E.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1;this[0]=f}return this.context=E,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):l.isFunction(a)?d.ready(a):(a.selector!==c&&(this.selector=a.selector,this.context=a.context),l.makeArray(a,this))},selector:"",length:0,toArray:function(){return pa.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){a=
l.merge(this.constructor(),a);return a.prevObject=this,a.context=this.context,a},each:function(a,b){return l.each(this,a,b)},ready:function(a){return l.ready.promise().done(a),this},slice:function(){return this.pushStack(pa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&b>a?[this[a]]:[])},map:function(a){return this.pushStack(l.map(this,function(b,c){return a.call(b,c,b)}))},
end:function(){return this.prevObject||this.constructor(null)},push:sa,sort:[].sort,splice:[].splice};l.fn.init.prototype=l.fn;l.extend=l.fn.extend=function(){var a,b,d,e,f,h,k=arguments[0]||{},g=1,m=arguments.length,n=!1;"boolean"==typeof k&&(n=k,k=arguments[1]||{},g=2);"object"==typeof k||l.isFunction(k)||(k={});for(m===g&&(k=this,--g);m>g;g++)if(null!=(f=arguments[g]))for(e in f)a=k[e],d=f[e],k!==d&&(n&&d&&(l.isPlainObject(d)||(b=l.isArray(d)))?(b?(b=!1,h=a&&l.isArray(a)?a:[]):h=a&&l.isPlainObject(a)?
a:{},k[e]=l.extend(n,h,d)):d!==c&&(k[e]=d));return k};l.extend({expando:"jQuery"+("1.10.2"+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===l&&(a.$=W),b&&a.jQuery===l&&(a.jQuery=ja),l},isReady:!1,readyWait:1,holdReady:function(a){a?l.readyWait++:l.ready(!0)},ready:function(a){if(!0===a?!--l.readyWait:!l.isReady){if(!E.body)return setTimeout(l.ready);l.isReady=!0;!0!==a&&0<--l.readyWait||(N.resolveWith(E,[l]),l.fn.trigger&&l(E).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===
l.type(a)},isArray:Array.isArray||function(a){return"array"===l.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?H[xa.call(a)]||"object":typeof a},isPlainObject:function(a){var b;if(!a||"object"!==l.type(a)||a.nodeType||l.isWindow(a))return!1;try{if(a.constructor&&!ka.call(a,"constructor")&&!ka.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(l.support.ownLast)for(b in a)return ka.call(a,
b);for(b in a);return b===c||ka.call(a,b)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1);b=b||E;var d=cb.exec(a);c=!c&&[];return d?[b.createElement(d[1])]:(d=l.buildFragment([a],b,c),c&&l(c).remove(),l.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=l.trim(b),b&&na.test(b.replace(Q,
"@").replace(Ja,"]").replace(Qa,"")))?Function("return "+b)():(l.error("Invalid JSON: "+b),c)},parseXML:function(b){var d,e;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(b,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(b))}catch(f){d=c}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||l.error("Invalid XML: "+b),d},noop:function(){},globalEval:function(b){b&&l.trim(b)&&(a.execScript||function(b){a.eval.call(a,
b)})(b)},camelCase:function(a){return a.replace(db,"ms-").replace(Ra,eb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,l=a.length,h=b(a);if(d)if(h)for(;l>f&&(e=c.apply(a[f],d),!1!==e);f++);else for(f in a){if(e=c.apply(a[f],d),!1===e)break}else if(h)for(;l>f&&(e=c.call(a[f],f,a[f]),!1!==e);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),!1===e)break;return a},trim:ma&&!ma.call("\ufeff\u00a0")?function(a){return null==a?"":ma.call(a)}:
function(a){return null==a?"":(a+"").replace(bb,"")},makeArray:function(a,c){var d=c||[];return null!=a&&(b(Object(a))?l.merge(d,"string"==typeof a?[a]:a):sa.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ia)return ia.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var d=b.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=b[f];else for(;b[f]!==c;)a[e++]=b[f++];return a.length=e,a},grep:function(a,b,c){var d,
e=[],f=0,l=a.length;for(c=!!c;l>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f=0,l=a.length,h=[];if(b(a))for(;l>f;f++)e=c(a[f],f,d),null!=e&&(h[h.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(h[h.length]=e);return ua.apply([],h)},guid:1,proxy:function(a,b){var d,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),l.isFunction(a)?(d=pa.call(arguments,2),e=function(){return a.apply(b||this,d.concat(pa.call(arguments)))},e.guid=a.guid=a.guid||l.guid++,e):c},access:function(a,
b,d,e,f,h,k){var g=0,m=a.length,n=null==d;if("object"===l.type(d))for(g in f=!0,d)l.access(a,b,g,d[g],!0,h,k);else if(e!==c&&(f=!0,l.isFunction(e)||(k=!0),n&&(k?(b.call(a,e),b=null):(n=b,b=function(a,b,c){return n.call(l(a),c)})),b))for(;m>g;g++)b(a[g],d,k?e:e.call(a[g],g,b(a[g],d)));return f?a:n?b.call(a):m?b(a[0],d):h},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];c=c.apply(a,d||[]);for(e in b)a.style[e]=f[e];return c}});
l.ready.promise=function(b){if(!N)if(N=l.Deferred(),"complete"===E.readyState)setTimeout(l.ready);else if(E.addEventListener)E.addEventListener("DOMContentLoaded",ga,!1),a.addEventListener("load",ga,!1);else{E.attachEvent("onreadystatechange",ga);a.attachEvent("onload",ga);var c=!1;try{c=null==a.frameElement&&E.documentElement}catch(d){}c&&c.doScroll&&function Mb(){if(!l.isReady){try{c.doScroll("left")}catch(a){return setTimeout(Mb,50)}Sa();l.ready()}}()}return N.promise(b)};l.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){H["[object "+b+"]"]=b.toLowerCase()});R=l(E);(function(a,b){function c(a,b,d,e){var B,f,l,h,k;if((b?b.ownerDocument||b:P)!==R&&L(b),b=b||R,d=d||[],!a||"string"!=typeof a)return d;if(1!==(h=b.nodeType)&&9!==h)return[];if(F&&!e){if(B=na.exec(a))if(l=B[1])if(9===h){if(f=b.getElementById(l),!f||!f.parentNode)return d;if(f.id===l)return d.push(f),d}else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(l))&&M(b,f)&&f.id===l)return d.push(f),d}else{if(B[2])return Z.apply(d,b.getElementsByTagName(a)),
d;if((l=B[3])&&p.getElementsByClassName&&b.getElementsByClassName)return Z.apply(d,b.getElementsByClassName(l)),d}if(p.qsa&&(!E||!E.test(a))){if(f=B=S,l=b,k=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){h=r(a);(B=b.getAttribute("id"))?f=B.replace(ra,"\\$&"):b.setAttribute("id",f);f="[id='"+f+"'] ";for(l=h.length;l--;)h[l]=f+v(h[l]);l=Q.test(a)&&b.parentNode||b;k=h.join(",")}if(k)try{return Z.apply(d,l.querySelectorAll(k)),d}catch(g){}finally{B||b.removeAttribute("id")}}}var O;a:{a=a.replace(ka,
"$1");var m,n;f=r(a);if(!e&&1===f.length){if(O=f[0]=f[0].slice(0),2<O.length&&"ID"===(m=O[0]).type&&p.getById&&9===b.nodeType&&F&&H.relative[O[1].type]){if(b=(H.find.ID(m.matches[0].replace(ea,fa),b)||[])[0],!b){O=d;break a}a=a.slice(O.shift().value.length)}for(h=ga.needsContext.test(a)?0:O.length;h--&&(m=O[h],!H.relative[B=m.type]);)if((n=H.find[B])&&(e=n(m.matches[0].replace(ea,fa),Q.test(O[0].type)&&b.parentNode||b))){if(O.splice(h,1),a=e.length&&v(O),!a){O=(Z.apply(d,e),d);break a}break}}O=(K(a,
f)(e,b,!F,d,Q.test(a)),d)}return O}function d(){function a(c,d){return b.push(c+=" ")>H.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function e(a){return a[S]=!0,a}function f(a){var b=R.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function h(a,b){for(var c=a.split("|"),d=a.length;d--;)H.attrHandle[c[d]]=b}function k(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||pa)-(~a.sourceIndex||pa);if(d)return d;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function g(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function m(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function n(a){return e(function(b){return b=+b,e(function(c,d){for(var e,B=a([],c.length,b),f=B.length;f--;)c[e=B[f]]&&(c[e]=!(d[e]=c[e]))})})}function u(){}function r(a,b){var d,e,B,f,l,h,k;if(l=la[a+" "])return b?0:l.slice(0);l=a;h=[];for(k=H.preFilter;l;){d&&
!(e=ma.exec(l))||(e&&(l=l.slice(e[0].length)||l),h.push(B=[]));d=!1;(e=V.exec(l))&&(d=e.shift(),B.push({value:d,type:e[0].replace(ka," ")}),l=l.slice(d.length));for(f in H.filter)!(e=ga[f].exec(l))||k[f]&&!(e=k[f](e))||(d=e.shift(),B.push({value:d,type:f,matches:e}),l=l.slice(d.length));if(!d)break}return b?l.length:l?c.error(a):la(a,h).slice(0)}function v(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function w(a,b,c){var d=b.dir,e=c&&"parentNode"===d,B=ba++;return b.first?function(b,
c,B){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,B)}:function(b,c,f){var l,h,k,g=ca+" "+B;if(f)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,f))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(k=b[S]||(b[S]={}),(h=k[d])&&h[0]===g){if(!0===(l=h[1])||l===G)return!0===l}else if(h=k[d]=[g],h[1]=a(b,c,f)||G,!0===h[1])return!0}}function I(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var B,f=[],l=0,h=a.length,k=null!=b;h>
l;l++)(B=a[l])&&(!c||c(B,d,e))&&(f.push(B),k&&b.push(l));return f}function D(a,b,d,B,f,l){return B&&!B[S]&&(B=D(B)),f&&!f[S]&&(f=D(f,l)),e(function(e,l,h,k){var g,O,m=[],n=[],u=l.length,r;if(!(r=e)){r=b||"*";for(var v=h.nodeType?[h]:h,w=[],I=0,jb=v.length;jb>I;I++)c(r,v[I],w);r=w}r=!a||!e&&b?r:q(r,m,a,h,k);v=d?f||(e?a:u||B)?[]:l:r;if(d&&d(r,v,h,k),B)for(g=q(v,n),B(g,[],h,k),h=g.length;h--;)(O=g[h])&&(v[n[h]]=!(r[n[h]]=O));if(e){if(f||a){if(f){g=[];for(h=v.length;h--;)(O=v[h])&&g.push(r[h]=O);f(null,
v=[],g,k)}for(h=v.length;h--;)(O=v[h])&&-1<(g=f?W.call(e,O):m[h])&&(e[g]=!(l[g]=O))}}else v=q(v===l?v.splice(u,v.length):v),f?f(null,l,v,k):Z.apply(l,v)})}function A(a){var b,c,d,e=a.length,B=H.relative[a[0].type];c=B||H.relative[" "];for(var f=B?1:0,l=w(function(a){return a===b},c,!0),h=w(function(a){return-1<W.call(b,a)},c,!0),k=[function(a,c,d){return!B&&(d||c!==x)||((b=c).nodeType?l(a,c,d):h(a,c,d))}];e>f;f++)if(c=H.relative[a[f].type])k=[w(I(k),c)];else{if(c=H.filter[a[f].type].apply(null,a[f].matches),
c[S]){for(d=++f;e>d&&!H.relative[a[d].type];d++);return D(1<f&&I(k),1<f&&v(a.slice(0,f-1).concat({value:" "===a[f-2].type?"*":""})).replace(ka,"$1"),c,d>f&&A(a.slice(f,d)),e>d&&A(a=a.slice(d)),e>d&&v(a))}k.push(c)}return I(k)}function y(a,b){var d=0,B=0<b.length,f=0<a.length,l=function(e,l,h,k,g){var O,m,n=[],r=0,u="0",v=e&&[],w=null!=g,I=x,jb=e||f&&H.find.TAG("*",g&&l.parentNode||l),D=ca+=null==I?1:Math.random()||0.1;for(w&&(x=l!==R&&l,G=d);null!=(g=jb[u]);u++){if(f&&g){for(O=0;m=a[O++];)if(m(g,
l,h)){k.push(g);break}w&&(ca=D,G=++d)}B&&((g=!m&&g)&&r--,e&&v.push(g))}if(r+=u,B&&u!==r){for(O=0;m=b[O++];)m(v,n,l,h);if(e){if(0<r)for(;u--;)v[u]||n[u]||(n[u]=aa.call(k));n=q(n)}Z.apply(k,n);w&&!e&&0<n.length&&1<r+b.length&&c.uniqueSort(k)}return w&&(ca=D,x=I),v};return B?e(l):l}var N,p,G,H,t,C,K,x,s,L,R,z,F,E,X,U,M,S="sizzle"+-new Date,P=a.document,ca=0,ba=0,ua=d(),la=d(),T=d(),J=!1,sa=function(a,b){return a===b?(J=!0,0):0},ja=typeof b,pa=-2147483648,da={}.hasOwnProperty,ia=[],aa=ia.pop,xa=ia.push,
Z=ia.push,Za=ia.slice,W=ia.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},Y="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),gb="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Y+")|)|)[\\x20\\t\\r\\n\\f]*\\]",Ga=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+gb.replace(3,8)+")*)|.*)\\)|)",ka=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,
ma=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,V=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Q=/[\x20\t\r\n\f]*[+~]/,mb=/=[\x20\t\r\n\f]*([^\]'"]*)[\x20\t\r\n\f]*\]/g,hb=RegExp(Ga),ha=RegExp("^"+Y+"$"),ga={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+gb),PSEUDO:RegExp("^"+Ga),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},qa=/^[^{]+\{\s*\[native \w/,na=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nb=/^(?:input|select|textarea|button)$/i,oa=/^h\d$/i,ra=/'|\\/g,ea=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,
fa=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(55296|a>>10,56320|1023&a)};try{Z.apply(ia=Za.call(P.childNodes),P.childNodes),ia[P.childNodes.length].nodeType}catch(ta){Z={apply:ia.length?function(a,b){xa.apply(a,Za.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}C=c.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};p=c.support={};L=c.setDocument=function(a){var c=a?a.ownerDocument||
a:P;a=c.defaultView;return c!==R&&9===c.nodeType&&c.documentElement?(R=c,z=c.documentElement,F=!C(c),a&&a.attachEvent&&a!==a.top&&a.attachEvent("onbeforeunload",function(){L()}),p.attributes=f(function(a){return a.className="i",!a.getAttribute("className")}),p.getElementsByTagName=f(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),p.getElementsByClassName=f(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className=
"i",2===a.getElementsByClassName("i").length}),p.getById=f(function(a){return z.appendChild(a).id=S,!c.getElementsByName||!c.getElementsByName(S).length}),p.getById?(H.find.ID=function(a,b){if(typeof b.getElementById!==ja&&F){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},H.filter.ID=function(a){var b=a.replace(ea,fa);return function(a){return a.getAttribute("id")===b}}):(delete H.find.ID,H.filter.ID=function(a){var b=a.replace(ea,fa);return function(a){return(a=typeof a.getAttributeNode!==
ja&&a.getAttributeNode("id"))&&a.value===b}}),H.find.TAG=p.getElementsByTagName?function(a,c){return typeof c.getElementsByTagName!==ja?c.getElementsByTagName(a):b}:function(a,b){var c,d=[],e=0,B=b.getElementsByTagName(a);if("*"===a){for(;c=B[e++];)1===c.nodeType&&d.push(c);return d}return B},H.find.CLASS=p.getElementsByClassName&&function(a,c){return typeof c.getElementsByClassName!==ja&&F?c.getElementsByClassName(a):b},X=[],E=[],(p.qsa=qa.test(c.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>";
a.querySelectorAll("[selected]").length||E.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||E.push(":checked")}),f(function(a){var b=c.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("t","");a.querySelectorAll("[t^='']").length&&E.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll(":enabled").length||
E.push(":enabled",":disabled");a.querySelectorAll("*,:x");E.push(",.*:")})),(p.matchesSelector=qa.test(U=z.webkitMatchesSelector||z.mozMatchesSelector||z.oMatchesSelector||z.msMatchesSelector))&&f(function(a){p.disconnectedMatch=U.call(a,"div");U.call(a,"[s!='']:x");X.push("!=",Ga)}),E=E.length&&RegExp(E.join("|")),X=X.length&&RegExp(X.join("|")),M=qa.test(z.contains)||z.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||
!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sa=z.compareDocumentPosition?function(a,b){if(a===b)return J=!0,0;var d=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return d?1&d||!p.sortDetached&&b.compareDocumentPosition(a)===d?a===c||M(P,a)?-1:b===c||M(P,b)?1:s?W.call(s,a)-W.call(s,b):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var d,e=0;
d=a.parentNode;var B=b.parentNode,f=[a],l=[b];if(a===b)return J=!0,0;if(!d||!B)return a===c?-1:b===c?1:d?-1:B?1:s?W.call(s,a)-W.call(s,b):0;if(d===B)return k(a,b);for(d=a;d=d.parentNode;)f.unshift(d);for(d=b;d=d.parentNode;)l.unshift(d);for(;f[e]===l[e];)e++;return e?k(f[e],l[e]):f[e]===P?-1:l[e]===P?1:0},c):R};c.matches=function(a,b){return c(a,null,null,b)};c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==R&&L(a),b=b.replace(mb,"='$1']"),p.matchesSelector&&F&&!(X&&X.test(b)||E&&E.test(b)))try{var d=
U.call(a,b);if(d||p.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return 0<c(b,R,null,[a]).length};c.contains=function(a,b){return(a.ownerDocument||a)!==R&&L(a),M(a,b)};c.attr=function(a,c){(a.ownerDocument||a)!==R&&L(a);var d=H.attrHandle[c.toLowerCase()],d=d&&da.call(H.attrHandle,c.toLowerCase())?d(a,c,!F):b;return d===b?p.attributes||!F?a.getAttribute(c):(d=a.getAttributeNode(c))&&d.specified?d.value:null:d};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+
a);};c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(J=!p.detectDuplicates,s=!p.sortStable&&a.slice(0),a.sort(sa),J){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a};t=c.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=t(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d];d++)c+=t(b);return c};H=c.selectors={cacheLength:50,createPseudo:e,match:ga,
attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ea,fa),a[3]=(a[4]||a[5]||"").replace(ea,fa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),
a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return ga.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&hb.test(d)&&(c=r(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ea,fa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=ua[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&ua(a,function(a){return b.test("string"==
typeof a.className&&a.className||typeof a.getAttribute!==ja&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){e=c.attr(e,a);return null==e?"!="===b:b?(e+="","="===b?e===d:"!="===b?e!==d:"^="===b?d&&0===e.indexOf(d):"*="===b?d&&-1<e.indexOf(d):"$="===b?d&&e.slice(-d.length)===d:"~="===b?-1<(" "+e+" ").indexOf(d):"|="===b?e===d||e.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var B="nth"!==a.slice(0,3),f="last"!==a.slice(-4),l="of-type"===b;return 1===d&&0===
e?function(a){return!!a.parentNode}:function(b,c,h){var k,g,O,m,n;c=B!==f?"nextSibling":"previousSibling";var Fa=b.parentNode,u=l&&b.nodeName.toLowerCase();h=!h&&!l;if(Fa){if(B){for(;c;){for(g=b;g=g[c];)if(l?g.nodeName.toLowerCase()===u:1===g.nodeType)return!1;n=c="only"===a&&!n&&"nextSibling"}return!0}if(n=[f?Fa.firstChild:Fa.lastChild],f&&h)for(h=Fa[S]||(Fa[S]={}),k=h[a]||[],m=k[0]===ca&&k[1],O=k[0]===ca&&k[2],g=m&&Fa.childNodes[m];g=++m&&g&&g[c]||(O=m=0)||n.pop();){if(1===g.nodeType&&++O&&g===
b){h[a]=[ca,m,O];break}}else if(h&&(k=(b[S]||(b[S]={}))[a])&&k[0]===ca)O=k[1];else for(;(g=++m&&g&&g[c]||(O=m=0)||n.pop())&&((l?g.nodeName.toLowerCase()!==u:1!==g.nodeType)||!++O||(h&&((g[S]||(g[S]={}))[a]=[ca,O]),g!==b)););return O-=e,O===d||0===O%d&&0<=O/d}}},PSEUDO:function(a,b){var d,B=H.pseudos[a]||H.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return B[S]?B(b):1<B.length?(d=[a,a,"",b],H.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=B(a,b),f=e.length;f--;)d=
W.call(a,e[f]),a[d]=!(c[d]=e[f])}):function(a){return B(a,0,d)}):B}},pseudos:{not:e(function(a){var b=[],c=[],d=K(a.replace(ka,"$1"));return d[S]?e(function(a,b,c,e){var B;c=d(a,null,e,[]);for(e=a.length;e--;)(B=c[e])&&(a[e]=!(b[e]=B))}):function(a,e,B){return b[0]=a,d(b,null,B,c),!c.pop()}}),has:e(function(a){return function(b){return 0<c(a,b).length}}),contains:e(function(a){return function(b){return-1<(b.textContent||b.innerText||t(b)).indexOf(a)}}),lang:e(function(a){return ha.test(a||"")||c.error("unsupported lang: "+
a),a=a.replace(ea,fa).toLowerCase(),function(b){var c;do if(c=F?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===z},focus:function(a){return a===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===
a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!H.pseudos.empty(a)},header:function(a){return oa.test(a.nodeName)},input:function(a){return nb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();
return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:n(function(){return[0]}),last:n(function(a,b){return[b-1]}),eq:n(function(a,b,c){return[0>c?c+b:c]}),even:n(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:n(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:n(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:n(function(a,
b,c){for(c=0>c?c+b:c;b>++c;)a.push(c);return a})}};H.pseudos.nth=H.pseudos.eq;for(N in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})H.pseudos[N]=g(N);for(N in{submit:!0,reset:!0})H.pseudos[N]=m(N);u.prototype=H.filters=H.pseudos;H.setFilters=new u;K=c.compile=function(a,b){var c,d=[],e=[],B=T[a+" "];if(!B){b||(b=r(a));for(c=b.length;c--;)B=A(b[c]),B[S]?d.push(B):e.push(B);B=T(a,y(e,d))}return B};p.sortStable=S.split("").sort(sa).join("")===S;p.detectDuplicates=J;L();p.sortDetached=f(function(a){return 1&
a.compareDocumentPosition(R.createElement("div"))});f(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||h("type|href|height|width",function(a,c,d){return d?b:a.getAttribute(c,"type"===c.toLowerCase()?1:2)});p.attributes&&f(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||h("value",function(a,c,d){return d||"input"!==a.nodeName.toLowerCase()?b:a.defaultValue});f(function(a){return null==
a.getAttribute("disabled")})||h("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&e.specified?e.value:!0===a[c]?c.toLowerCase():null});l.find=c;l.expr=c.selectors;l.expr[":"]=l.expr.pseudos;l.unique=c.uniqueSort;l.text=c.getText;l.isXMLDoc=c.isXML;l.contains=c.contains})(a);var Na={};l.Callbacks=function(a){a="string"==typeof a?Na[a]||d(a):l.extend({},a);var b,e,f,
h,k,g,m=[],n=!a.once&&[],u=function(c){e=a.memory&&c;f=!0;k=g||0;g=0;h=m.length;for(b=!0;m&&h>k;k++)if(!1===m[k].apply(c[0],c[1])&&a.stopOnFalse){e=!1;break}b=!1;m&&(n?n.length&&u(n.shift()):e?m=[]:r.disable())},r={add:function(){if(m){var c=m.length;(function Qb(b){l.each(b,function(b,c){var d=l.type(c);"function"===d?a.unique&&r.has(c)||m.push(c):c&&c.length&&"string"!==d&&Qb(c)})})(arguments);b?h=m.length:e&&(g=c,u(e))}return this},remove:function(){return m&&l.each(arguments,function(a,c){for(var d;-1<
(d=l.inArray(c,m,d));)m.splice(d,1),b&&(h>=d&&h--,k>=d&&k--)}),this},has:function(a){return a?-1<l.inArray(a,m):!(!m||!m.length)},empty:function(){return m=[],h=0,this},disable:function(){return m=n=e=c,this},disabled:function(){return!m},lock:function(){return n=c,e||r.disable(),this},locked:function(){return!n},fireWith:function(a,c){return!m||f&&!n||(c=c||[],c=[a,c.slice?c.slice():c],b?n.push(c):u(c)),this},fire:function(){return r.fireWith(this,arguments),this},fired:function(){return!!f}};return r};
l.extend({Deferred:function(a){var b=[["resolve","done",l.Callbacks("once memory"),"resolved"],["reject","fail",l.Callbacks("once memory"),"rejected"],["notify","progress",l.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return l.Deferred(function(c){l.each(b,function(b,B){var f=B[0],h=l.isFunction(a[b])&&a[b];e[B[1]](function(){var a=h&&h.apply(this,arguments);a&&l.isFunction(a.promise)?
a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===d?c.promise():this,h?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?l.extend(a,d):d}},e={};return d.pipe=d.then,l.each(b,function(a,B){var f=B[2],l=B[3];d[B[1]]=f.add;l&&f.add(function(){c=l},b[1^a][2].disable,b[2][2].lock);e[B[0]]=function(){return e[B[0]+"With"](this===e?d:this,arguments),this};e[B[0]+"With"]=f.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=pa.call(arguments),
d=c.length,e=1!==d||a&&l.isFunction(a.promise)?d:0,f=1===e?a:l.Deferred(),h=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?pa.call(arguments):d;c===k?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},k,g,m;if(1<d)for(k=Array(d),g=Array(d),m=Array(d);d>b;b++)c[b]&&l.isFunction(c[b].promise)?c[b].promise().done(h(b,m,c)).fail(f.reject).progress(h(b,g,k)):--e;return e||f.resolveWith(m,c),f.promise()}});l.support=function(b){var c,d,e,f,h,k,g=E.createElement("div");if(g.setAttribute("className",
"t"),g.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=g.getElementsByTagName("*")||[],d=g.getElementsByTagName("a")[0],!d||!d.style||!c.length)return b;e=E.createElement("select");f=e.appendChild(E.createElement("option"));c=g.getElementsByTagName("input")[0];d.style.cssText="top:1px;float:left;opacity:.5";b.getSetAttribute="t"!==g.className;b.leadingWhitespace=3===g.firstChild.nodeType;b.tbody=!g.getElementsByTagName("tbody").length;b.htmlSerialize=!!g.getElementsByTagName("link").length;
b.style=/top/.test(d.getAttribute("style"));b.hrefNormalized="/a"===d.getAttribute("href");b.opacity=/^0.5/.test(d.style.opacity);b.cssFloat=!!d.style.cssFloat;b.checkOn=!!c.value;b.optSelected=f.selected;b.enctype=!!E.createElement("form").enctype;b.html5Clone="<:nav></:nav>"!==E.createElement("nav").cloneNode(!0).outerHTML;b.inlineBlockNeedsLayout=!1;b.shrinkWrapBlocks=!1;b.pixelPosition=!1;b.deleteExpando=!0;b.noCloneEvent=!0;b.reliableMarginRight=!0;b.boxSizingReliable=!0;c.checked=!0;b.noCloneChecked=
c.cloneNode(!0).checked;e.disabled=!0;b.optDisabled=!f.disabled;try{delete g.test}catch(m){b.deleteExpando=!1}c=E.createElement("input");c.setAttribute("value","");b.input=""===c.getAttribute("value");c.value="t";c.setAttribute("type","radio");b.radioValue="t"===c.value;c.setAttribute("checked","t");c.setAttribute("name","t");d=E.createDocumentFragment();d.appendChild(c);b.appendChecked=c.checked;b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;g.attachEvent&&(g.attachEvent("onclick",
function(){b.noCloneEvent=!1}),g.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})g.setAttribute(d="on"+k,"t"),b[k+"Bubbles"]=d in a||!1===g.attributes[d].expando;g.style.backgroundClip="content-box";g.cloneNode(!0).style.backgroundClip="";b.clearCloneStyle="content-box"===g.style.backgroundClip;for(k in l(b))break;return b.ownLast="0"!==k,l(function(){var c,d,e,f=E.getElementsByTagName("body")[0];f&&(c=E.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",
f.appendChild(c).appendChild(g),g.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=g.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=h&&0===e[0].offsetHeight,g.innerHTML="",g.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
l.swap(f,null!=f.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===g.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(g,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(g,null)||{width:"4px"}).width,d=g.appendChild(E.createElement("div")),d.style.cssText=g.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",d.style.marginRight=d.style.width="0",g.style.width="1px",b.reliableMarginRight=
!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof g.style.zoom!==X&&(g.innerHTML="",g.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===g.offsetWidth,g.style.display="block",g.innerHTML="<div></div>",g.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==g.offsetWidth,b.inlineBlockNeedsLayout&&(f.style.zoom=1)),f.removeChild(c),
c=g=e=d=null)}),c=e=d=f=d=c=null,b}({});var fa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ya=/([A-Z])/g;l.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?l.cache[a[l.expando]]:a[l.expando],!!a&&!g(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return k(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return k(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;
var b=a.nodeName&&l.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}});l.fn.extend({data:function(a,b){var d,e,f=null,g=0,k=this[0];if(a===c){if(this.length&&(f=l.data(k),1===k.nodeType&&!l._data(k,"parsedAttrs"))){for(d=k.attributes;d.length>g;g++)e=d[g].name,0===e.indexOf("data-")&&(e=l.camelCase(e.slice(5)),h(k,e,f[e]));l._data(k,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){l.data(this,a)}):1<arguments.length?this.each(function(){l.data(this,
a,b)}):k?h(k,a,l.data(k,a)):null},removeData:function(a){return this.each(function(){l.removeData(this,a)})}});l.extend({queue:function(a,b,d){var e;return a?(b=(b||"fx")+"queue",e=l._data(a,b),d&&(!e||l.isArray(d)?e=l._data(a,b,l.makeArray(d)):e.push(d)),e||[]):c},dequeue:function(a,b){b=b||"fx";var c=l.queue(a,b),d=c.length,e=c.shift(),f=l._queueHooks(a,b),h=function(){l.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,h,f));!d&&f&&f.empty.fire()},
_queueHooks:function(a,b){var c=b+"queueHooks";return l._data(a,c)||l._data(a,c,{empty:l.Callbacks("once memory").add(function(){l._removeData(a,b+"queue");l._removeData(a,c)})})}});l.fn.extend({queue:function(a,b){var d=2;return"string"!=typeof a&&(b=a,a="fx",d--),d>arguments.length?l.queue(this[0],a):b===c?this:this.each(function(){var c=l.queue(this,a,b);l._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&l.dequeue(this,a)})},dequeue:function(a){return this.each(function(){l.dequeue(this,a)})},
delay:function(a,b){return a=l.fx?l.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,e=1,f=l.Deferred(),h=this,g=this.length,k=function(){--e||f.resolveWith(h,[h])};"string"!=typeof a&&(b=a,a=c);for(a=a||"fx";g--;)(d=l._data(h[g],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(k));return k(),f.promise(b)}});var ta,Ta,Ka=/[\t\r\n\f]/g,Ua=/\r/g,Va=/^(?:input|select|textarea|button|object)$/i,
ya=/^(?:a|area)$/i,va=/^(?:checked|selected)$/i,ra=l.support.getSetAttribute,wa=l.support.input;l.fn.extend({attr:function(a,b){return l.access(this,l.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){l.removeAttr(this,a)})},prop:function(a,b){return l.access(this,l.prop,a,b,1<arguments.length)},removeProp:function(a){return a=l.propFix[a]||a,this.each(function(){try{this[a]=c,delete this[a]}catch(b){}})},addClass:function(a){var b,c,d,e,f,h=0,g=this.length;b="string"==
typeof a&&a;if(l.isFunction(a))return this.each(function(b){l(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ha)||[];g>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ka," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=l.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,h=0,g=this.length;b=0===arguments.length||"string"==typeof a&&a;if(l.isFunction(a))return this.each(function(b){l(this).removeClass(a.call(this,
b,this.className))});if(b)for(b=(a||"").match(ha)||[];g>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ka," "):"")){for(f=0;e=b[f++];)for(;0<=d.indexOf(" "+e+" ");)d=d.replace(" "+e+" "," ");c.className=a?l.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):l.isFunction(a)?this.each(function(c){l(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===
c)for(var b,d=0,e=l(this),f=a.match(ha)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===X||"boolean"===c)&&(this.className&&l._data(this,"__className__",this.className),this.className=this.className||!1===a?"":l._data(this,"__className__")||"")})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;c>b;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Ka," ").indexOf(a))return!0;return!1},val:function(a){var b,d,e,f=this[0];if(arguments.length)return e=
l.isFunction(a),this.each(function(b){var f;1===this.nodeType&&(f=e?a.call(this,b,l(this).val()):a,null==f?f="":"number"==typeof f?f+="":l.isArray(f)&&(f=l.map(f,function(a){return null==a?"":a+""})),d=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==c||(this.value=f))});if(f)return d=l.valHooks[f.type]||l.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(b=d.get(f,"value"))!==c?b:(b=f.value,"string"==typeof b?b.replace(Ua,""):null==b?"":b)}});l.extend({valHooks:{option:{get:function(a){var b=
l.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,e="select-one"===a.type||0>d,f=e?null:[],h=e?d+1:c.length,g=0>d?h:e?d:0;h>g;g++)if(b=c[g],!(!b.selected&&g!==d||(l.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&l.nodeName(b.parentNode,"optgroup"))){if(a=l(b).val(),e)return a;f.push(a)}return f},set:function(a,b){for(var c,d,e=a.options,f=l.makeArray(b),h=e.length;h--;)d=e[h],(d.selected=0<=l.inArray(l(d).val(),
f))&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,b,d){var e,f,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return typeof a.getAttribute===X?l.prop(a,b,d):(1===h&&l.isXMLDoc(a)||(b=b.toLowerCase(),e=l.attrHooks[b]||(l.expr.match.bool.test(b)?Ta:ta)),d===c?e&&"get"in e&&null!==(f=e.get(a,b))?f:(f=l.find.attr(a,b),null==f?c:f):null!==d?e&&"set"in e&&(f=e.set(a,d,b))!==c?f:(a.setAttribute(b,d+""),d):(l.removeAttr(a,b),c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ha);if(f&&1===a.nodeType)for(;c=
f[e++];)d=l.propFix[c]||c,l.expr.match.bool.test(c)?wa&&ra||!va.test(c)?a[d]=!1:a[l.camelCase("default-"+c)]=a[d]=!1:l.attr(a,c,""),a.removeAttribute(ra?c:d)},attrHooks:{type:{set:function(a,b){if(!l.support.radioValue&&"radio"===b&&l.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,d){var e,f,h,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return h=1!==g||!l.isXMLDoc(a),h&&(b=l.propFix[b]||b,f=l.propHooks[b]),
d!==c?f&&"set"in f&&(e=f.set(a,d,b))!==c?e:a[b]=d:f&&"get"in f&&null!==(e=f.get(a,b))?e:a[b]},propHooks:{tabIndex:{get:function(a){var b=l.find.attr(a,"tabindex");return b?parseInt(b,10):Va.test(a.nodeName)||ya.test(a.nodeName)&&a.href?0:-1}}}});Ta={set:function(a,b,c){return!1===b?l.removeAttr(a,c):wa&&ra||!va.test(c)?a.setAttribute(!ra&&l.propFix[c]||c,c):a[l.camelCase("default-"+c)]=a[c]=!0,c}};l.each(l.expr.match.bool.source.match(/\w+/g),function(a,b){var d=l.expr.attrHandle[b]||l.find.attr;
l.expr.attrHandle[b]=wa&&ra||!va.test(b)?function(a,b,e){var f=l.expr.attrHandle[b];a=e?c:(l.expr.attrHandle[b]=c)!=d(a,b,e)?b.toLowerCase():null;return l.expr.attrHandle[b]=f,a}:function(a,b,d){return d?c:a[l.camelCase("default-"+b)]?b.toLowerCase():null}});wa&&ra||(l.attrHooks.value={set:function(a,b,d){return l.nodeName(a,"input")?(a.defaultValue=b,c):ta&&ta.set(a,b,d)}});ra||(ta={set:function(a,b,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),
e.value=b+="","value"===d||b===a.getAttribute(d)?b:c}},l.expr.attrHandle.id=l.expr.attrHandle.name=l.expr.attrHandle.coords=function(a,b,d){var e;return d?c:(e=a.getAttributeNode(b))&&""!==e.value?e.value:null},l.valHooks.button={get:function(a,b){var d=a.getAttributeNode(b);return d&&d.specified?d.value:c},set:ta.set},l.attrHooks.contenteditable={set:function(a,b,c){ta.set(a,""===b?!1:b,c)}},l.each(["width","height"],function(a,b){l.attrHooks[b]={set:function(a,d){return""===d?(a.setAttribute(b,
"auto"),d):c}}}));l.support.hrefNormalized||l.each(["href","src"],function(a,b){l.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}});l.support.style||(l.attrHooks.style={get:function(a){return a.style.cssText||c},set:function(a,b){return a.style.cssText=b+""}});l.support.optSelected||(l.propHooks.selected={get:function(a){a=a.parentNode;return a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex),null}});l.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){l.propFix[this.toLowerCase()]=this});l.support.enctype||(l.propFix.enctype="encoding");l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(a,b){return l.isArray(b)?a.checked=0<=l.inArray(l(a).val(),b):c}};l.support.checkOn||(l.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ea=/^(?:input|select|textarea)$/i,Wa=/^key/,La=/^(?:mouse|contextmenu)|click/,fb=/^(?:focusinfocus|focusoutblur)$/,Da=/^([^.]*)(?:\.(.+)|)$/;l.event={global:{},
add:function(a,b,d,e,f){var h,g,k,m,n,u,r,v,w,I;if(k=l._data(a)){d.handler&&(m=d,d=m.handler,f=m.selector);d.guid||(d.guid=l.guid++);(g=k.events)||(g=k.events={});(u=k.handle)||(u=k.handle=function(a){return typeof l===X||a&&l.event.triggered===a.type?c:l.event.dispatch.apply(u.elem,arguments)},u.elem=a);b=(b||"").match(ha)||[""];for(k=b.length;k--;)h=Da.exec(b[k])||[],w=I=h[1],h=(h[2]||"").split(".").sort(),w&&(n=l.event.special[w]||{},w=(f?n.delegateType:n.bindType)||w,n=l.event.special[w]||{},
r=l.extend({type:w,origType:I,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&l.expr.match.needsContext.test(f),namespace:h.join(".")},m),(v=g[w])||(v=g[w]=[],v.delegateCount=0,n.setup&&!1!==n.setup.call(a,e,h,u)||(a.addEventListener?a.addEventListener(w,u,!1):a.attachEvent&&a.attachEvent("on"+w,u))),n.add&&(n.add.call(a,r),r.handler.guid||(r.handler.guid=d.guid)),f?v.splice(v.delegateCount++,0,r):v.push(r),l.event.global[w]=!0);a=null}},remove:function(a,b,c,d,e){var f,h,g,k,m,n,u,r,v,w,
I,q=l.hasData(a)&&l._data(a);if(q&&(n=q.events)){b=(b||"").match(ha)||[""];for(m=b.length;m--;)if(g=Da.exec(b[m])||[],v=I=g[1],w=(g[2]||"").split(".").sort(),v){u=l.event.special[v]||{};v=(d?u.delegateType:u.bindType)||v;r=n[v]||[];g=g[2]&&RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)");for(k=f=r.length;f--;)h=r[f],!e&&I!==h.origType||c&&c.guid!==h.guid||g&&!g.test(h.namespace)||d&&d!==h.selector&&("**"!==d||!h.selector)||(r.splice(f,1),h.selector&&r.delegateCount--,u.remove&&u.remove.call(a,
h));k&&!r.length&&(u.teardown&&!1!==u.teardown.call(a,w,q.handle)||l.removeEvent(a,v,q.handle),delete n[v])}else for(v in n)l.event.remove(a,v+b[m],c,d,!0);l.isEmptyObject(n)&&(delete q.handle,l._removeData(a,"events"))}},trigger:function(b,d,e,f){var h,g,k,m,n,u,r=[e||E],v=ka.call(b,"type")?b.type:b;u=ka.call(b,"namespace")?b.namespace.split("."):[];if(k=h=e=e||E,3!==e.nodeType&&8!==e.nodeType&&!fb.test(v+l.event.triggered)&&(0<=v.indexOf(".")&&(u=v.split("."),v=u.shift(),u.sort()),g=0>v.indexOf(":")&&
"on"+v,b=b[l.expando]?b:new l.Event(v,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=u.join("."),b.namespace_re=b.namespace?RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=c,b.target||(b.target=e),d=null==d?[b]:l.makeArray(d,[b]),n=l.event.special[v]||{},f||!n.trigger||!1!==n.trigger.apply(e,d))){if(!f&&!n.noBubble&&!l.isWindow(e)){m=n.delegateType||v;for(fb.test(m+v)||(k=k.parentNode);k;k=k.parentNode)r.push(k),h=k;h===(e.ownerDocument||E)&&r.push(h.defaultView||h.parentWindow||
a)}for(u=0;(k=r[u++])&&!b.isPropagationStopped();)b.type=1<u?m:n.bindType||v,(h=(l._data(k,"events")||{})[b.type]&&l._data(k,"handle"))&&h.apply(k,d),(h=g&&k[g])&&l.acceptData(k)&&h.apply&&!1===h.apply(k,d)&&b.preventDefault();if(b.type=v,!f&&!b.isDefaultPrevented()&&(!n._default||!1===n._default.apply(r.pop(),d))&&l.acceptData(e)&&g&&e[v]&&!l.isWindow(e)){(h=e[g])&&(e[g]=null);l.event.triggered=v;try{e[v]()}catch(w){}l.event.triggered=c;h&&(e[g]=h)}return b.result}},dispatch:function(a){a=l.event.fix(a);
var b,d,e,f,h,g=[],k=pa.call(arguments);b=(l._data(this,"events")||{})[a.type]||[];var m=l.event.special[a.type]||{};if(k[0]=a,a.delegateTarget=this,!m.preDispatch||!1!==m.preDispatch.call(this,a)){g=l.event.handlers.call(this,a,b);for(b=0;(f=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,h=0;(e=f.handlers[h++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(e.namespace)||(a.handleObj=e,a.data=e.data,d=((l.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,
k),d===c||!1!==(a.result=d)||(a.preventDefault(),a.stopPropagation()));return m.postDispatch&&m.postDispatch.call(this,a),a.result}},handlers:function(a,b){var d,e,f,h,g=[],k=b.delegateCount,m=a.target;if(k&&m.nodeType&&(!a.button||"click"!==a.type))for(;m!=this;m=m.parentNode||this)if(1===m.nodeType&&(!0!==m.disabled||"click"!==a.type)){f=[];for(h=0;k>h;h++)e=b[h],d=e.selector+" ",f[d]===c&&(f[d]=e.needsContext?0<=l(d,this).index(m):l.find(d,this,null,[m]).length),f[d]&&f.push(e);f.length&&g.push({elem:m,
handlers:f})}return b.length>k&&g.push({elem:this,handlers:b.slice(k)}),g},fix:function(a){if(a[l.expando])return a;var b,c,d;b=a.type;var e=a,f=this.fixHooks[b];f||(this.fixHooks[b]=f=La.test(b)?this.mouseHooks:Wa.test(b)?this.keyHooks:{});d=f.props?this.props.concat(f.props):this.props;a=new l.Event(e);for(b=d.length;b--;)c=d[b],a[c]=e[c];return a.target||(a.target=e.srcElement||E),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,e):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var d,e,f,h=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||E,f=e.documentElement,d=e.body,a.pageX=b.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&
f.clientLeft||d&&d.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||h===c||(a.which=1&h?1:2&h?3:4&h?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):c},delegateType:"focusout"},click:{trigger:function(){return l.nodeName(this,
"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):c},_default:function(a){return l.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==c&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=l.extend(new l.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?l.event.trigger(a,null,b):l.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};l.removeEvent=E.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,
c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&(typeof a[b]===X&&(a[b]=null),a.detachEvent(b,c))};l.Event=function(a,b){return this instanceof l.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?f:n):this.type=a,b&&l.extend(this,b),this.timeStamp=a&&a.timeStamp||l.now(),this[l.expando]=!0,c):new l.Event(a,b)};l.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,
preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=f;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=f;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=f;this.stopPropagation()}};l.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){l.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,
d=a.relatedTarget,e=a.handleObj;return(!d||d!==this&&!l.contains(this,d))&&(a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b),c}}});l.support.submitBubbles||(l.event.special.submit={setup:function(){return l.nodeName(this,"form")?!1:(l.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=l.nodeName(a,"input")||l.nodeName(a,"button")?a.form:c)&&!l._data(a,"submitBubbles")&&(l.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),l._data(a,"submitBubbles",!0))}),
c)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&l.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return l.nodeName(this,"form")?!1:(l.event.remove(this,"._submit"),c)}});l.support.changeBubbles||(l.event.special.change={setup:function(){return ea.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(l.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=
!0)}),l.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);l.event.simulate("change",this,a,!0)})),!1):(l.event.add(this,"beforeactivate._change",function(a){a=a.target;ea.test(a.nodeName)&&!l._data(a,"changeBubbles")&&(l.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||l.event.simulate("change",this.parentNode,a,!0)}),l._data(a,"changeBubbles",!0))}),c)},handle:function(a){var b=a.target;return this!==b||a.isSimulated||
a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):c},teardown:function(){return l.event.remove(this,"._change"),!ea.test(this.nodeName)}});l.support.focusinBubbles||l.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){l.event.simulate(b,a.target,l.event.fix(a),!0)};l.event.special[b]={setup:function(){0===c++&&E.addEventListener(a,d,!0)},teardown:function(){0===--c&&E.removeEventListener(a,d,!0)}}});l.fn.extend({on:function(a,b,d,
e,f){var h,g;if("object"==typeof a){"string"!=typeof b&&(d=d||b,b=c);for(h in a)this.on(h,b,d,a[h],f);return this}if(null==d&&null==e?(e=b,d=b=c):null==e&&("string"==typeof b?(e=d,d=c):(e=d,d=b,b=c)),!1===e)e=n;else if(!e)return this;return 1===f&&(g=e,e=function(a){return l().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=l.guid++)),this.each(function(){l.event.add(this,a,e,d,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=
a.handleObj,l(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,b,a[f]);return this}return(!1===b||"function"==typeof b)&&(d=b,b=c),!1===d&&(d=n),this.each(function(){l.event.remove(this,a,d,b)})},trigger:function(a,b){return this.each(function(){l.event.trigger(a,b,this)})},triggerHandler:function(a,b){var d=this[0];return d?l.event.trigger(a,b,d,!0):c}});var Za=/^.[^:#\[\.,]*$/,gb=/^(?:parents|prev(?:Until|All))/,
hb=l.expr.match.needsContext,mb={children:!0,contents:!0,next:!0,prev:!0};l.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(l(a).filter(function(){for(b=0;e>b;b++)if(l.contains(d[b],this))return!0}));for(b=0;e>b;b++)l.find(a,d[b],c);return c=this.pushStack(1<e?l.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b,c=l(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(l.contains(this,c[b]))return!0})},
not:function(a){return this.pushStack(s(this,a||[],!0))},filter:function(a){return this.pushStack(s(this,a||[],!1))},is:function(a){return!!s(this,"string"==typeof a&&hb.test(a)?l(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],h=hb.test(a)||"string"!=typeof a?l(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(h?-1<h.index(c):1===c.nodeType&&l.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?l.unique(f):f)},
index:function(a){return a?"string"==typeof a?l.inArray(this[0],l(a)):l.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?l(a,b):l.makeArray(a&&a.nodeType?[a]:a),c=l.merge(this.get(),c);return this.pushStack(l.unique(c))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});l.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return l.dir(a,
"parentNode")},parentsUntil:function(a,b,c){return l.dir(a,"parentNode",c)},next:function(a){return t(a,"nextSibling")},prev:function(a){return t(a,"previousSibling")},nextAll:function(a){return l.dir(a,"nextSibling")},prevAll:function(a){return l.dir(a,"previousSibling")},nextUntil:function(a,b,c){return l.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return l.dir(a,"previousSibling",c)},siblings:function(a){return l.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return l.sibling(a.firstChild)},
contents:function(a){return l.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:l.merge([],a.childNodes)}},function(a,b){l.fn[a]=function(c,d){var e=l.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=l.filter(d,e)),1<this.length&&(mb[a]||(e=l.unique(e)),gb.test(a)&&(e=e.reverse())),this.pushStack(e)}});l.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?l.find.matchesSelector(d,a)?[d]:[]:l.find.matches(a,l.grep(b,
function(a){return 1===a.nodeType}))},dir:function(a,b,d){var e=[];for(a=a[b];a&&9!==a.nodeType&&(d===c||1!==a.nodeType||!l(a).is(d));)1===a.nodeType&&e.push(a),a=a[b];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ga="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",nb=/ jQuery\d+="(?:null|\d+)"/g,xb=RegExp("<(?:"+Ga+")[\\s/>]",
"i"),ob=/^\s+/,yb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zb=/<([\w:]+)/,Ab=/<tbody/i,Rb=/<|&#?\w+;/,Sb=/<(?:script|style|link)/i,kb=/^(?:checkbox|radio)$/i,Tb=/checked\s*(?:[^=]|=\s*.checked.)/i,Bb=/^$|\/(?:java|ecma)script/i,Nb=/^true\/(.*)/,Ub=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,oa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},pb=m(E).appendChild(E.createElement("div"));oa.optgroup=oa.option;oa.tbody=oa.tfoot=oa.colgroup=oa.caption=oa.thead;oa.th=oa.td;l.fn.extend({text:function(a){return l.access(this,function(a){return a===c?l.text(this):this.empty().append((this[0]&&this[0].ownerDocument||E).createTextNode(a))},
null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||v(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=v(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,
function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?l.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||l.cleanData(D(c)),c.parentNode&&(b&&l.contains(c.ownerDocument,c)&&A(D(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&l.cleanData(D(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&l.nodeName(a,"select")&&(a.options.length=0)}return this},
clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return l.clone(this,a,b)})},html:function(a){return l.access(this,function(a){var b=this[0]||{},d=0,e=this.length;if(a===c)return 1===b.nodeType?b.innerHTML.replace(nb,""):c;if(!("string"!=typeof a||Sb.test(a)||!l.support.htmlSerialize&&xb.test(a)||!l.support.leadingWhitespace&&ob.test(a)||oa[(zb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(yb,"<$1></$2>");try{for(;e>d;d++)b=this[d]||{},1===b.nodeType&&(l.cleanData(D(b,
!1)),b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=l.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),l(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=ua.apply([],a);var d,e,f,h,g=0,k=this.length,m=this,n=k-1,v=a[0],w=l.isFunction(v);
if(w||!(1>=k||"string"!=typeof v||l.support.checkClone)&&Tb.test(v))return this.each(function(d){var e=m.eq(d);w&&(a[0]=v.call(this,d,e.html()));e.domManip(a,b,c)});if(k&&(h=l.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=h.firstChild,1===h.childNodes.length&&(h=d),d)){f=l.map(D(h,"script"),r);for(e=f.length;k>g;g++)d=h,g!==n&&(d=l.clone(d,!0,!0),e&&l.merge(f,D(d,"script"))),b.call(this[g],d,g);if(e)for(h=f[f.length-1].ownerDocument,l.map(f,u),g=0;e>g;g++)d=f[g],Bb.test(d.type||"")&&!l._data(d,
"globalEval")&&l.contains(h,d)&&(d.src?l._evalUrl(d.src):l.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Ub,"")));h=d=null}return this}});l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){l.fn[a]=function(a){for(var c=0,d=[],e=l(a),f=e.length-1;f>=c;c++)a=c===f?this:this.clone(!0),l(e[c])[b](a),sa.apply(d,a.get());return this.pushStack(d)}});l.extend({clone:function(a,b,c){var d,e,f,h,g,k=l.contains(a.ownerDocument,
a);if(l.support.html5Clone||l.isXMLDoc(a)||!xb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(pb.innerHTML=a.outerHTML,pb.removeChild(f=pb.firstChild)),!(l.support.noCloneEvent&&l.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||l.isXMLDoc(a)))for(d=D(f),g=D(a),h=0;null!=(e=g[h]);++h)if(d[h]){var m=d[h],n=void 0,v=void 0,w=void 0;if(1===m.nodeType){if(n=m.nodeName.toLowerCase(),!l.support.noCloneEvent&&m[l.expando]){w=l._data(m);for(v in w.events)l.removeEvent(m,v,w.handle);m.removeAttribute(l.expando)}"script"===
n&&m.text!==e.text?(r(m).text=e.text,u(m)):"object"===n?(m.parentNode&&(m.outerHTML=e.outerHTML),l.support.html5Clone&&e.innerHTML&&!l.trim(m.innerHTML)&&(m.innerHTML=e.innerHTML)):"input"===n&&kb.test(e.type)?(m.defaultChecked=m.checked=e.checked,m.value!==e.value&&(m.value=e.value)):"option"===n?m.defaultSelected=m.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(m.defaultValue=e.defaultValue)}}if(b)if(c)for(g=g||D(a),d=d||D(f),h=0;null!=(e=g[h]);h++)I(e,d[h]);else I(a,f);return d=D(f,
"script"),0<d.length&&A(d,!k&&D(a,"script")),f},buildFragment:function(a,b,c,d){for(var e,f,h,g,k,n,u,v=a.length,r=m(b),w=[],I=0;v>I;I++)if(f=a[I],f||0===f)if("object"===l.type(f))l.merge(w,f.nodeType?[f]:f);else if(Rb.test(f)){g=g||r.appendChild(b.createElement("div"));k=(zb.exec(f)||["",""])[1].toLowerCase();u=oa[k]||oa._default;g.innerHTML=u[1]+f.replace(yb,"<$1></$2>")+u[2];for(e=u[0];e--;)g=g.lastChild;if(!l.support.leadingWhitespace&&ob.test(f)&&w.push(b.createTextNode(ob.exec(f)[0])),!l.support.tbody)for(e=
(f="table"!==k||Ab.test(f)?"<table>"!==u[1]||Ab.test(f)?0:g:g.firstChild)&&f.childNodes.length;e--;)l.nodeName(n=f.childNodes[e],"tbody")&&!n.childNodes.length&&f.removeChild(n);l.merge(w,g.childNodes);for(g.textContent="";g.firstChild;)g.removeChild(g.firstChild);g=r.lastChild}else w.push(b.createTextNode(f));g&&r.removeChild(g);l.support.appendChecked||l.grep(D(w,"input"),L);for(I=0;f=w[I++];)if((!d||-1===l.inArray(f,d))&&(h=l.contains(f.ownerDocument,f),g=D(r.appendChild(f),"script"),h&&A(g),c))for(e=
0;f=g[e++];)Bb.test(f.type||"")&&c.push(f);return r},cleanData:function(a,b){for(var c,d,e,f,h=0,g=l.expando,k=l.cache,m=l.support.deleteExpando,n=l.event.special;null!=(c=a[h]);h++)if((b||l.acceptData(c))&&(e=c[g],f=e&&k[e])){if(f.events)for(d in f.events)n[d]?l.event.remove(c,d):l.removeEvent(c,d,f.handle);k[e]&&(delete k[e],m?delete c[g]:typeof c.removeAttribute!==X?c.removeAttribute(g):c[g]=null,S.push(e))}},_evalUrl:function(a){return l.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,
"throws":!0})}});l.fn.extend({wrapAll:function(a){if(l.isFunction(a))return this.each(function(b){l(this).wrapAll(a.call(this,b))});if(this[0]){var b=l(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return l.isFunction(a)?this.each(function(b){l(this).wrapInner(a.call(this,b))}):this.each(function(){var b=l(this),c=
b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=l.isFunction(a);return this.each(function(c){l(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){l.nodeName(this,"body")||l(this).replaceWith(this.childNodes)}).end()}});var Oa,Ba,Ca,qb=/alpha\([^)]*\)/i,Vb=/opacity\s*=\s*([^)]*)/,Wb=/^(top|right|bottom|left)$/,Xb=/^(none|table(?!-c[ea]).+)/,Cb=/^margin/,Ob=RegExp("^("+qa+")(.*)$","i"),$a=RegExp("^("+qa+")(?!px)[a-z%]+$","i"),Yb=RegExp("^([+-])=("+
qa+")","i"),wb={BODY:"block"},Zb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:0,fontWeight:400},Aa=["Top","Right","Bottom","Left"],vb=["Webkit","O","Moz","ms"];l.fn.extend({css:function(a,b){return l.access(this,function(a,b,d){var e,f={},h=0;if(l.isArray(b)){e=Ba(a);for(d=b.length;d>h;h++)f[b[h]]=l.css(a,b[h],!1,e);return f}return d!==c?l.style(a,b,d):l.css(a,b)},a,b,1<arguments.length)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(a){return"boolean"==
typeof a?a?this.show():this.hide():this.each(function(){x(this)?l(this).show():l(this).hide()})}});l.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ca(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,h,g,k=l.camelCase(b),m=a.style;if(b=
l.cssProps[k]||(l.cssProps[k]=q(m,k)),g=l.cssHooks[b]||l.cssHooks[k],d===c)return g&&"get"in g&&(f=g.get(a,!1,e))!==c?f:m[b];if(h=typeof d,"string"===h&&(f=Yb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(l.css(a,b)),h="number"),!(null==d||"number"===h&&isNaN(d)||("number"!==h||l.cssNumber[k]||(d+="px"),l.support.clearCloneStyle||""!==d||0!==b.indexOf("background")||(m[b]="inherit"),g&&"set"in g&&(d=g.set(a,d,e))===c)))try{m[b]=d}catch(n){}}},css:function(a,b,d,e){var f,h,g,k=l.camelCase(b);return b=l.cssProps[k]||
(l.cssProps[k]=q(a.style,k)),g=l.cssHooks[b]||l.cssHooks[k],g&&"get"in g&&(h=g.get(a,!0,d)),h===c&&(h=Ca(a,b,e)),"normal"===h&&b in Db&&(h=Db[b]),""===d||d?(f=parseFloat(h),!0===d||l.isNumeric(f)?f||0:h):h}});a.getComputedStyle?(Ba=function(b){return a.getComputedStyle(b,null)},Ca=function(a,b,d){var e,f,h,g=(d=d||Ba(a))?d.getPropertyValue(b)||d[b]:c,k=a.style;return d&&(""!==g||l.contains(a.ownerDocument,a)||(g=l.style(a,b)),$a.test(g)&&Cb.test(b)&&(e=k.width,f=k.minWidth,h=k.maxWidth,k.minWidth=
k.maxWidth=k.width=g,g=d.width,k.width=e,k.minWidth=f,k.maxWidth=h)),g}):E.documentElement.currentStyle&&(Ba=function(a){return a.currentStyle},Ca=function(a,b,d){var e,f,h;d=(d=d||Ba(a))?d[b]:c;var g=a.style;return null==d&&g&&g[b]&&(d=g[b]),$a.test(d)&&!Wb.test(b)&&(e=g.left,f=a.runtimeStyle,h=f&&f.left,h&&(f.left=a.currentStyle.left),g.left="fontSize"===b?"1em":d,d=g.pixelLeft+"px",g.left=e,h&&(f.left=h)),""===d?"auto":d});l.each(["height","width"],function(a,b){l.cssHooks[b]={get:function(a,d,
e){return d?0===a.offsetWidth&&Xb.test(l.css(a,"display"))?l.swap(a,Zb,function(){return da(a,b,e)}):da(a,b,e):c},set:function(a,d,c){var e=c&&Ba(a);return z(a,d,c?P(a,b,c,l.support.boxSizing&&"border-box"===l.css(a,"boxSizing",!1,e),e):0)}}});l.support.opacity||(l.cssHooks.opacity={get:function(a,b){return Vb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var d=a.style,c=a.currentStyle,e=l.isNumeric(b)?"alpha(opacity="+
100*b+")":"",f=c&&c.filter||d.filter||"";d.zoom=1;(1<=b||""===b)&&""===l.trim(f.replace(qb,""))&&d.removeAttribute&&(d.removeAttribute("filter"),""===b||c&&!c.filter)||(d.filter=qb.test(f)?f.replace(qb,e):f+" "+e)}});l(function(){l.support.reliableMarginRight||(l.cssHooks.marginRight={get:function(a,b){return b?l.swap(a,{display:"inline-block"},Ca,[a,"marginRight"]):c}});!l.support.pixelPosition&&l.fn.position&&l.each(["top","left"],function(a,b){l.cssHooks[b]={get:function(a,d){return d?(d=Ca(a,
b),$a.test(d)?l(a).position()[b]+"px":d):c}}})});l.expr&&l.expr.filters&&(l.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!l.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||l.css(a,"display"))},l.expr.filters.visible=function(a){return!l.expr.filters.hidden(a)});l.each({margin:"",padding:"",border:"Width"},function(a,b){l.cssHooks[a+b]={expand:function(d){var c=0,e={};for(d="string"==typeof d?d.split(" "):[d];4>c;c++)e[a+Aa[c]+b]=d[c]||d[c-2]||d[0];
return e}};Cb.test(a)||(l.cssHooks[a+b].set=z)});var $b=/%20/g,Pb=/\[\]$/,Eb=/\r?\n/g,ac=/^(?:submit|button|image|reset|file)$/i,bc=/^(?:input|select|textarea|keygen)/i;l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=l.prop(this,"elements");return a?l.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!l(this).is(":disabled")&&bc.test(this.nodeName)&&!ac.test(a)&&(this.checked||!kb.test(a))}).map(function(a,
b){var d=l(this).val();return null==d?null:l.isArray(d)?l.map(d,function(a){return{name:b.name,value:a.replace(Eb,"\r\n")}}):{name:b.name,value:d.replace(Eb,"\r\n")}}).get()}});l.param=function(a,b){var d,e=[],f=function(a,b){b=l.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(b===c&&(b=l.ajaxSettings&&l.ajaxSettings.traditional),l.isArray(a)||a.jquery&&!l.isPlainObject(a))l.each(a,function(){f(this.name,this.value)});else for(d in a)Z(d,a[d],b,f);return e.join("&").replace($b,
"+")};l.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){l.fn[b]=function(a,d){return 0<arguments.length?this.on(b,null,a,d):this.trigger(b)}});l.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,d){return this.on(a,null,b,d)},unbind:function(a,b){return this.off(a,null,b)},
delegate:function(a,b,d,c){return this.on(b,a,d,c)},undelegate:function(a,b,d){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",d)}});var Ea,za,rb=l.now(),sb=/\?/,cc=/#.*$/,Fb=/([?&])_=[^&]*/,dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ec=/^(?:GET|HEAD)$/,fc=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Hb=l.fn.load,Ib={},lb={},Jb="*/".concat("*");try{za=ca.href}catch(jc){za=E.createElement("a"),za.href="",za=za.href}Ea=Gb.exec(za.toLowerCase())||[];l.fn.load=function(a,b,d){if("string"!=
typeof a&&Hb)return Hb.apply(this,arguments);var e,f,h,g=this,k=a.indexOf(" ");return 0<=k&&(e=a.slice(k,a.length),a=a.slice(0,k)),l.isFunction(b)?(d=b,b=c):b&&"object"==typeof b&&(h="POST"),0<g.length&&l.ajax({url:a,type:h,dataType:"html",data:b}).done(function(a){f=arguments;g.html(e?l("<div>").append(l.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){g.each(d,f||[a.responseText,b,a])}),this};l.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){l.fn[b]=
function(a){return this.on(b,a)}});l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:za,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ea[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",
json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":l.parseJSON,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?J(J(a,l.ajaxSettings),b):J(l.ajaxSettings,a)},ajaxPrefilter:U(Ib),ajaxTransport:U(lb),ajax:function(a,b){function d(a,b,e,f){var u,p,A,y,B=b;if(2!==H){H=2;k&&clearTimeout(k);n=c;g=f||"";N.readyState=0<a?4:0;f=200<=a&&300>a||304===a;if(e){A=r;for(var G=N,t,C,K,x,s=A.contents,R=A.dataTypes;"*"===R[0];)R.shift(),C===c&&(C=A.mimeType||
G.getResponseHeader("Content-Type"));if(C)for(x in s)if(s[x]&&s[x].test(C)){R.unshift(x);break}if(R[0]in e)K=R[0];else{for(x in e){if(!R[0]||A.converters[x+" "+R[0]]){K=x;break}t||(t=x)}K=K||t}A=K?(K!==R[0]&&R.unshift(K),e[K]):c}var L;a:{e=r;t=A;C=N;K=f;var z,E,F;A={};G=e.dataTypes.slice();if(G[1])for(z in e.converters)A[z.toLowerCase()]=e.converters[z];for(x=G.shift();x;)if(e.responseFields[x]&&(C[e.responseFields[x]]=t),!F&&K&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),F=x,x=G.shift())if("*"===
x)x=F;else if("*"!==F&&F!==x){if(z=A[F+" "+x]||A["* "+x],!z)for(L in A)if(E=L.split(" "),E[1]===x&&(z=A[F+" "+E[0]]||A["* "+E[0]])){!0===z?z=A[L]:!0!==A[L]&&(x=E[0],G.unshift(E[1]));break}if(!0!==z)if(z&&e["throws"])t=z(t);else try{t=z(t)}catch(X){L={state:"parsererror",error:z?X:"No conversion from "+F+" to "+x};break a}}L={state:"success",data:t}}A=L;f?(r.ifModified&&(y=N.getResponseHeader("Last-Modified"),y&&(l.lastModified[h]=y),y=N.getResponseHeader("etag"),y&&(l.etag[h]=y)),204===a||"HEAD"===
r.type?B="nocontent":304===a?B="notmodified":(B=A.state,u=A.data,p=A.error,f=!p)):(p=B,(a||!B)&&(B="error",0>a&&(a=0)));N.status=a;N.statusText=(b||B)+"";f?I.resolveWith(v,[u,B,N]):I.rejectWith(v,[N,B,p]);N.statusCode(D);D=c;m&&w.trigger(f?"ajaxSuccess":"ajaxError",[N,r,f?u:p]);q.fireWith(v,[N,B]);m&&(w.trigger("ajaxComplete",[N,r]),--l.active||l.event.trigger("ajaxStop"))}}"object"==typeof a&&(b=a,a=c);b=b||{};var e,f,h,g,k,m,n,u,r=l.ajaxSetup({},b),v=r.context||r,w=r.context&&(v.nodeType||v.jquery)?
l(v):l.event,I=l.Deferred(),q=l.Callbacks("once memory"),D=r.statusCode||{},p={},A={},H=0,y="canceled",N={readyState:0,getResponseHeader:function(a){var b;if(2===H){if(!u)for(u={};b=dc.exec(g);)u[b[1].toLowerCase()]=b[2];b=u[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===H?g:null},setRequestHeader:function(a,b){var d=a.toLowerCase();return H||(a=A[d]=A[d]||a,p[a]=b),this},overrideMimeType:function(a){return H||(r.mimeType=a),this},statusCode:function(a){var b;
if(a)if(2>H)for(b in a)D[b]=[D[b],a[b]];else N.always(a[N.status]);return this},abort:function(a){a=a||y;return n&&n.abort(a),d(0,a),this}};if(I.promise(N).complete=q.add,N.success=N.done,N.error=N.fail,r.url=((a||r.url||za)+"").replace(cc,"").replace(fc,Ea[1]+"//"),r.type=b.method||b.type||r.method||r.type,r.dataTypes=l.trim(r.dataType||"*").toLowerCase().match(ha)||[""],null==r.crossDomain&&(e=Gb.exec(r.url.toLowerCase()),r.crossDomain=!(!e||e[1]===Ea[1]&&e[2]===Ea[2]&&(e[3]||("http:"===e[1]?"80":
"443"))===(Ea[3]||("http:"===Ea[1]?"80":"443")))),r.data&&r.processData&&"string"!=typeof r.data&&(r.data=l.param(r.data,r.traditional)),aa(Ib,r,b,N),2===H)return N;(m=r.global)&&0===l.active++&&l.event.trigger("ajaxStart");r.type=r.type.toUpperCase();r.hasContent=!ec.test(r.type);h=r.url;r.hasContent||(r.data&&(h=r.url+=(sb.test(h)?"&":"?")+r.data,delete r.data),!1===r.cache&&(r.url=Fb.test(h)?h.replace(Fb,"$1_="+rb++):h+(sb.test(h)?"&":"?")+"_="+rb++));r.ifModified&&(l.lastModified[h]&&N.setRequestHeader("If-Modified-Since",
l.lastModified[h]),l.etag[h]&&N.setRequestHeader("If-None-Match",l.etag[h]));(r.data&&r.hasContent&&!1!==r.contentType||b.contentType)&&N.setRequestHeader("Content-Type",r.contentType);N.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+("*"!==r.dataTypes[0]?", "+Jb+"; q=0.01":""):r.accepts["*"]);for(f in r.headers)N.setRequestHeader(f,r.headers[f]);if(r.beforeSend&&(!1===r.beforeSend.call(v,N,r)||2===H))return N.abort();y="abort";for(f in{success:1,error:1,
complete:1})N[f](r[f]);if(n=aa(lb,r,b,N)){N.readyState=1;m&&w.trigger("ajaxSend",[N,r]);r.async&&0<r.timeout&&(k=setTimeout(function(){N.abort("timeout")},r.timeout));try{H=1,n.send(p,d)}catch(G){if(!(2>H))throw G;d(-1,G)}}else d(-1,"No Transport");return N},getJSON:function(a,b,d){return l.get(a,b,d,"json")},getScript:function(a,b){return l.get(a,c,b,"script")}});l.each(["get","post"],function(a,b){l[b]=function(a,d,e,f){return l.isFunction(d)&&(f=f||e,e=d,d=c),l.ajax({url:a,type:b,dataType:f,data:d,
success:e})}});l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return l.globalEval(a),a}}});l.ajaxPrefilter("script",function(a){a.cache===c&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});l.ajaxTransport("script",function(a){if(a.crossDomain){var b,d=E.head||l("head")[0]||E.documentElement;return{send:function(c,e){b=E.createElement("script");
b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,d){(d||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,d||e(200,"success"))};d.insertBefore(b,d.firstChild)},abort:function(){b&&b.onload(c,!0)}}}});var Kb=[],tb=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Kb.pop()||l.expando+"_"+rb++;return this[a]=!0,a}});l.ajaxPrefilter("json jsonp",
function(b,d,e){var f,h,g,k=!1!==b.jsonp&&(tb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&tb.test(b.data)&&"data");return k||"jsonp"===b.dataTypes[0]?(f=b.jsonpCallback=l.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,k?b[k]=b[k].replace(tb,"$1"+f):!1!==b.jsonp&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+f),b.converters["script json"]=function(){return g||l.error(f+" was not called"),g[0]},b.dataTypes[0]="json",h=a[f],
a[f]=function(){g=arguments},e.always(function(){a[f]=h;b[f]&&(b.jsonpCallback=d.jsonpCallback,Kb.push(f));g&&l.isFunction(h)&&h(g[0]);g=h=c}),"script"):c});var Ma,Xa,gc=0,ub=a.ActiveXObject&&function(){for(var a in Ma)Ma[a](c,!0)};l.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&Y()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}b=void 0}return b}:Y;Xa=l.ajaxSettings.xhr();l.support.cors=!!Xa&&"withCredentials"in Xa;(Xa=l.support.ajax=!!Xa)&&l.ajaxTransport(function(b){if(!b.crossDomain||
l.support.cors){var d;return{send:function(e,f){var h,g,k=b.xhr();if(b.username?k.open(b.type,b.url,b.async,b.username,b.password):k.open(b.type,b.url,b.async),b.xhrFields)for(g in b.xhrFields)k[g]=b.xhrFields[g];b.mimeType&&k.overrideMimeType&&k.overrideMimeType(b.mimeType);b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(g in e)k.setRequestHeader(g,e[g])}catch(m){}k.send(b.hasContent&&b.data||null);d=function(a,e){var g,m,n,r;try{if(d&&(e||4===k.readyState))if(d=
c,h&&(k.onreadystatechange=l.noop,ub&&delete Ma[h]),e)4!==k.readyState&&k.abort();else{r={};g=k.status;m=k.getAllResponseHeaders();"string"==typeof k.responseText&&(r.text=k.responseText);try{n=k.statusText}catch(u){n=""}g||!b.isLocal||b.crossDomain?1223===g&&(g=204):g=r.text?200:404}}catch(v){e||f(-1,v)}r&&f(g,n,r,m)};b.async?4===k.readyState?setTimeout(d):(h=++gc,ub&&(Ma||(Ma={},l(a).unload(ub)),Ma[h]=d),k.onreadystatechange=d):d()},abort:function(){d&&d(c,!0)}}}});var Ha,ib,hc=/^(?:toggle|show|hide)$/,
Lb=RegExp("^(?:([+-])=|)("+qa+")([a-z%]*)$","i"),ic=/queueHooks$/,ab=[function(a,b,d){var c,e,f,h,g,k=this,m={},n=a.style,r=a.nodeType&&x(a),u=l._data(a,"fxshow");d.queue||(h=l._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,g=h.empty.fire,h.empty.fire=function(){h.unqueued||g()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--;l.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(d.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===
l.css(a,"display")&&"none"===l.css(a,"float")&&(l.support.inlineBlockNeedsLayout&&"inline"!==ba(a.nodeName)?n.zoom=1:n.display="inline-block"));d.overflow&&(n.overflow="hidden",l.support.shrinkWrapBlocks||k.always(function(){n.overflow=d.overflow[0];n.overflowX=d.overflow[1];n.overflowY=d.overflow[2]}));for(c in b)(e=b[c],hc.exec(e))&&(delete b[c],f=f||"toggle"===e,e!==(r?"hide":"show"))&&(m[c]=u&&u[c]||l.style(a,c));if(!l.isEmptyObject(m))for(c in u?"hidden"in u&&(r=u.hidden):u=l._data(a,"fxshow",
{}),f&&(u.hidden=!r),r?l(a).show():k.done(function(){l(a).hide()}),k.done(function(){var b;l._removeData(a,"fxshow");for(b in m)l.style(a,b,m[b])}),m)b=w(r?u[c]:0,c,k),c in u||(u[c]=b.start,r&&(b.end=b.start,b.start="width"===c||"height"===c?1:0))}],Pa={"*":[function(a,b){var d=this.createTween(a,b),c=d.cur(),e=Lb.exec(b),f=e&&e[3]||(l.cssNumber[a]?"":"px"),h=(l.cssNumber[a]||"px"!==f&&+c)&&Lb.exec(l.css(d.elem,a)),g=1,k=20;if(h&&h[3]!==f){f=f||h[3];e=e||[];h=+c||1;do g=g||".5",h/=g,l.style(d.elem,
a,h+f);while(g!==(g=d.cur()/c)&&1!==g&&--k)}return e&&(h=d.start=+h||+c||0,d.unit=f,d.end=e[1]?h+(e[1]+1)*e[2]:+e[2]),d}]};l.Animation=l.extend(K,{tweener:function(a,b){l.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var d,c=0,e=a.length;e>c;c++)d=a[c],Pa[d]=Pa[d]||[],Pa[d].unshift(b)},prefilter:function(a,b){b?ab.unshift(a):ab.push(a)}});l.Tween=F;F.prototype={constructor:F,init:function(a,b,d,c,e,f){this.elem=a;this.prop=d;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=
c;this.unit=f||(l.cssNumber[d]?"":"px")},cur:function(){var a=F.propHooks[this.prop];return a&&a.get?a.get(this):F.propHooks._default.get(this)},run:function(a){var b,d=F.propHooks[this.prop];return this.pos=b=this.options.duration?l.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):F.propHooks._default.set(this),this}};F.prototype.init.prototype=
F.prototype;F.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=l.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){l.fx.step[a.prop]?l.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[l.cssProps[a.prop]]||l.cssHooks[a.prop])?l.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};
l.each(["toggle","show","hide"],function(a,b){var d=l.fn[b];l.fn[b]=function(a,c,e){return null==a||"boolean"==typeof a?d.apply(this,arguments):this.animate(G(b,!0),a,c,e)}});l.fn.extend({fadeTo:function(a,b,d,c){return this.filter(x).css("opacity",0).show().end().animate({opacity:b},a,d,c)},animate:function(a,b,d,c){var e=l.isEmptyObject(a),f=l.speed(b,d,c);b=function(){var b=K(this,l.extend({},a),f);(e||l._data(this,"finish"))&&b.stop(!0)};return b.finish=b,e||!1===f.queue?this.each(b):this.queue(f.queue,
b)},stop:function(a,b,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};return"string"!=typeof a&&(d=b,b=a,a=c),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=l.timers,h=l._data(this);if(c)h[c]&&h[c].stop&&e(h[c]);else for(c in h)h[c]&&h[c].stop&&ic.test(c)&&e(h[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||l.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,
d=l._data(this),c=d[a+"queue"];b=d[a+"queueHooks"];var e=l.timers,f=c?c.length:0;d.finish=!0;l.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=e.length;b--;)e[b].elem===this&&e[b].queue===a&&(e[b].anim.stop(!0),e.splice(b,1));for(b=0;f>b;b++)c[b]&&c[b].finish&&c[b].finish.call(this);delete d.finish})}});l.each({slideDown:G("show"),slideUp:G("hide"),slideToggle:G("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){l.fn[a]=function(a,d,c){return this.animate(b,
a,d,c)}});l.speed=function(a,b,d){var c=a&&"object"==typeof a?l.extend({},a):{complete:d||!d&&b||l.isFunction(a)&&a,duration:a,easing:d&&b||b&&!l.isFunction(b)&&b};return c.duration=l.fx.off?0:"number"==typeof c.duration?c.duration:c.duration in l.fx.speeds?l.fx.speeds[c.duration]:l.fx.speeds._default,(null==c.queue||!0===c.queue)&&(c.queue="fx"),c.old=c.complete,c.complete=function(){l.isFunction(c.old)&&c.old.call(this);c.queue&&l.dequeue(this,c.queue)},c};l.easing={linear:function(a){return a},
swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};l.timers=[];l.fx=F.prototype.init;l.fx.tick=function(){var a,b=l.timers,d=0;for(Ha=l.now();b.length>d;d++)a=b[d],a()||b[d]!==a||b.splice(d--,1);b.length||l.fx.stop();Ha=c};l.fx.timer=function(a){a()&&l.timers.push(a)&&l.fx.start()};l.fx.interval=13;l.fx.start=function(){ib||(ib=setInterval(l.fx.tick,l.fx.interval))};l.fx.stop=function(){clearInterval(ib);ib=null};l.fx.speeds={slow:600,fast:200,_default:400};l.fx.step={};l.expr&&l.expr.filters&&
(l.expr.filters.animated=function(a){return l.grep(l.timers,function(b){return a===b.elem}).length});l.fn.offset=function(a){if(arguments.length)return a===c?this:this.each(function(b){l.offset.setOffset(this,a,b)});var b,d,e={top:0,left:0},f=this[0],h=f&&f.ownerDocument;if(h)return b=h.documentElement,l.contains(b,f)?(typeof f.getBoundingClientRect!==X&&(e=f.getBoundingClientRect()),d=y(h),{top:e.top+(d.pageYOffset||b.scrollTop)-(b.clientTop||0),left:e.left+(d.pageXOffset||b.scrollLeft)-(b.clientLeft||
0)}):e};l.offset={setOffset:function(a,b,d){var c=l.css(a,"position");"static"===c&&(a.style.position="relative");var e=l(a),f=e.offset(),h=l.css(a,"top"),g=l.css(a,"left"),k={},m={},n,r;("absolute"===c||"fixed"===c)&&-1<l.inArray("auto",[h,g])?(m=e.position(),n=m.top,r=m.left):(n=parseFloat(h)||0,r=parseFloat(g)||0);l.isFunction(b)&&(b=b.call(a,d,f));null!=b.top&&(k.top=b.top-f.top+n);null!=b.left&&(k.left=b.left-f.left+r);"using"in b?b.using.call(a,k):e.css(k)}};l.fn.extend({position:function(){if(this[0]){var a,
b,d={top:0,left:0},c=this[0];return"fixed"===l.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),l.nodeName(a[0],"html")||(d=a.offset()),d.top+=l.css(a[0],"borderTopWidth",!0),d.left+=l.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-l.css(c,"marginTop",!0),left:b.left-d.left-l.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||la;a&&!l.nodeName(a,"html")&&"static"===l.css(a,"position");)a=a.offsetParent;return a||
la})}});l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d=/Y/.test(b);l.fn[a]=function(e){return l.access(this,function(a,e,f){var h=y(a);return f===c?h?b in h?h[b]:h.document.documentElement[e]:a[e]:(h?h.scrollTo(d?l(h).scrollLeft():f,d?f:l(h).scrollTop()):a[e]=f,c)},a,e,arguments.length,null)}});l.each({Height:"height",Width:"width"},function(a,b){l.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,e){l.fn[e]=function(e,f){var h=arguments.length&&(d||"boolean"!=
typeof e),g=d||(!0===e||!0===f?"margin":"border");return l.access(this,function(b,d,e){var f;return l.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):e===c?l.css(b,d,g):l.style(b,d,e,g)},b,h?e:c,h,null)}})});l.fn.size=function(){return this.length};l.fn.andSelf=l.fn.addBack;"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=l:(a.jQuery=a.$=
l,"function"==typeof define&&define.amd&&define("jquery",[],function(){return l}))})(window);var AppendScript=function(a,c){var b=document.createElement("script");b.type="text/javascript";b.src=a;c&&(b.onload=c);document.getElementsByTagName("head")[0].appendChild(b)};
$.fn.dimensions=function(){var a={};$(this).each(function(){if(void 0===a.left)a.left=$(this).position().left,a.right=a.left+$(this).outerWidth(),a.top=$(this).position().top,a.bottom=a.top+$(this).outerHeight();else{var c=$(this).position().left,b=c+$(this).outerWidth(),d=$(this).position().top,e=d+$(this).outerHeight();c<a.left&&(a.left=c);b>a.right&&(a.right=b);d<a.top&&(a.top=d);e>a.bottom&&(a.bottom=e)}});a.height=a.bottom-a.top;a.width=a.right-a.left;a.center=a.left+Math.floor(a.width/2);a.middle=
a.top+Math.floor(a.height/2);return a};
(function(a,c){function b(b,c){var e,k,p,t=b.nodeName.toLowerCase();return"area"===t?(e=b.parentNode,k=e.name,b.href&&k&&"map"===e.nodeName.toLowerCase()?(p=a("img[usemap=#"+k+"]")[0],!!p&&d(p)):!1):(/input|select|textarea|button|object/.test(t)?!b.disabled:"a"===t?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,k=/^ui-id-\d+$/;a.ui=a.ui||{};a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,
COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({focus:function(b){return function(d,c){return"number"==typeof d?this.each(function(){var b=this;setTimeout(function(){a(b).focus();c&&c.call(b)},d)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||
/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(b){if(b!==c)return this.css("zIndex",b);if(this.length){var d,
e;for(b=a(this[0]);b.length&&b[0]!==document;){if(d=b.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(b.css("zIndex"),10),!isNaN(e)&&0!==e))return e;b=b.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){k.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(d){return!!a.data(d,b)}}):
function(b,d,c){return!!a.data(b,c[3])},focusable:function(d){return b(d,!isNaN(a.attr(d,"tabindex")))},tabbable:function(d){var c=a.attr(d,"tabindex"),e=isNaN(c);return(e||0<=c)&&b(d,!e)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,d){function e(b,d,c,f){return a.each(k,function(){d-=parseFloat(a.css(b,"padding"+this))||0;c&&(d-=parseFloat(a.css(b,"border"+this+"Width"))||0);f&&(d-=parseFloat(a.css(b,"margin"+this))||0)}),d}var k="Width"===d?["Left","Right"]:["Top","Bottom"],
p=d.toLowerCase(),t={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(b){return b===c?t["inner"+d].call(this):this.each(function(){a(this).css(p,e(this,b)+"px")})};a.fn["outer"+d]=function(b,c){return"number"!=typeof b?t["outer"+d].call(this,b):this.each(function(){a(this).css(p,e(this,b,!0,c)+"px")})}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});
a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(d){return arguments.length?b.call(this,a.camelCase(d)):b.call(this)}}(a.fn.removeData));a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.support.selectstart="onselectstart"in document.createElement("div");a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});
a.extend(a.ui,{plugin:{add:function(b,d,c){var e;b=a.ui[b].prototype;for(e in c)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([d,c[e]])},call:function(a,b,d){var c=a.plugins[b];if(c&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;c.length>b;b++)a.options[c[b][0]]&&c[b][1].apply(a.element,d)}},hasScroll:function(b,d){if("hidden"===a(b).css("overflow"))return!1;var c=d&&"left"===d?"scrollLeft":"scrollTop",e=!1;return 0<b[c]?!0:(b[c]=1,e=0<b[c],b[c]=0,e)}})})(jQuery);
(function(a,c){var b=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d,c=0;null!=(d=b[c]);c++)try{a(d).triggerHandler("remove")}catch(f){}e(b)};a.widget=function(b,d,e){var f,n,p,t,s={},m=b.split(".")[0];b=b.split(".")[1];f=m+"-"+b;e||(e=d,d=a.Widget);a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)};a[m]=a[m]||{};n=a[m][b];p=a[m][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),c):new p(a,b)};a.extend(p,n,{version:e.version,
_proto:a.extend({},e),_childConstructors:[]});t=new d;t.options=a.widget.extend({},t.options);a.each(e,function(b,e){return a.isFunction(e)?(s[b]=function(){var a=function(){return d.prototype[b].apply(this,arguments)},c=function(a){return d.prototype[b].apply(this,a)};return function(){var b,d=this._super,f=this._superApply;return this._super=a,this._superApply=c,b=e.apply(this,arguments),this._super=d,this._superApply=f,b}}(),c):(s[b]=e,c)});p.prototype=a.widget.extend(t,{widgetEventPrefix:n?t.widgetEventPrefix:
b},s,{constructor:p,namespace:m,widgetName:b,widgetFullName:f});n?(a.each(n._childConstructors,function(b,d){var c=d.prototype;a.widget(c.namespace+"."+c.widgetName,p,d._proto)}),delete n._childConstructors):d._childConstructors.push(p);a.widget.bridge(b,p)};a.widget.extend=function(b){for(var e,g,f=d.call(arguments,1),n=0,p=f.length;p>n;n++)for(e in f[n])g=f[n][e],f[n].hasOwnProperty(e)&&g!==c&&(b[e]=a.isPlainObject(g)?a.isPlainObject(b[e])?a.widget.extend({},b[e],g):a.widget.extend({},g):g);return b};
a.widget.bridge=function(b,e){var g=e.prototype.widgetFullName||b;a.fn[b]=function(f){var n="string"==typeof f,p=d.call(arguments,1),t=this;return f=!n&&p.length?a.widget.extend.apply(null,[f].concat(p)):f,n?this.each(function(){var d,e=a.data(this,g);return e?a.isFunction(e[f])&&"_"!==f.charAt(0)?(d=e[f].apply(e,p),d!==e&&d!==c?(t=d&&d.jquery?t.pushStack(d.get()):d,!1):c):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+
f+"'")}):this.each(function(){var b=a.data(this,g);b?b.option(f||{})._init():a.data(this,g,new e(f,this))}),t}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(d,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=b++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),d);
this.bindings=a();this.hoverable=a();this.focusable=a();c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();
this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,d){var e,f,n,p=b;
if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(p={},e=b.split("."),b=e.shift(),e.length){f=p[b]=a.widget.extend({},this.options[b]);for(n=0;e.length-1>n;n++)f[e[n]]=f[e[n]]||{},f=f[e[n]];if(b=e.pop(),d===c)return f[b]===c?null:f[b];f[b]=d}else{if(d===c)return this.options[b]===c?null:this.options[b];p[b]=d}return this._setOptions(p),this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=
b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,d,e){var f,n=this;"boolean"!=typeof b&&(e=d,d=b,b=!1);e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget());a.each(e,function(e,
g){function s(){return b||!0!==n.options.disabled&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?n[g]:g).apply(n,arguments):c}"string"!=typeof g&&(s.guid=g.guid=g.guid||s.guid||a.guid++);var m=e.match(/^(\w+)\s*(.*)$/),v=m[1]+n.eventNamespace;(m=m[2])?f.delegate(m,v,s):d.bind(v,s)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var d=this;return setTimeout(function(){return("string"==typeof a?
d[a]:a).apply(d,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,d,c){var e,n=this.options[b];
if(c=c||{},d=a.Event(d),d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d.target=this.element[0],b=d.originalEvent)for(e in b)e in d||(d[e]=b[e]);return this.element.trigger(d,c),!(a.isFunction(n)&&!1===n.apply(this.element[0],[d].concat(c))||d.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,d){a.Widget.prototype["_"+b]=function(c,e,n){"string"==typeof e&&(e={effect:e});var p,t=e?!0===e||"number"==typeof e?d:e.effect||d:b;e=e||{};"number"==typeof e&&
(e={duration:e});p=!a.isEmptyObject(e);e.complete=n;e.delay&&c.delay(e.delay);p&&a.effects&&a.effects.effect[t]?c[b](e):t!==b&&c[t]?c[t](e.duration,e.easing,n):c.queue(function(d){a(this)[b]();n&&n.call(c[0]);d()})}})})(jQuery);
(function(a){var c=!1;a(document).mouseup(function(){c=!1});a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(d){return!0===a.data(d.target,b.widgetName+".preventClickEvent")?(a.removeData(d.target,b.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1):void 0});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var d=this,e=1===b.which,k="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!k&&this._mouseCapture(b)?(this.mouseDelayMet=
!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),
!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a,c){function b(a,b,d){return[parseFloat(a[0])*(s.test(a[0])?b/100:1),parseFloat(a[1])*(s.test(a[1])?d/100:1)]}function d(b){var d=b[0];return 9===d.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(d)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:d.preventDefault?{width:0,height:0,offset:{top:d.pageY,left:d.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,k=Math.max,h=Math.abs,g=
Math.round,f=/left|center|right/,n=/top|center|bottom/,p=/[\+\-]\d+(\.[\d]+)?%?/,t=/^\w+/,s=/%$/,m=a.fn.position;a.position={scrollbarWidth:function(){if(e!==c)return e;var b,d,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),h=f.children()[0];return a("body").append(f),b=h.offsetWidth,f.css("overflow","scroll"),d=h.offsetWidth,b===d&&(d=f[0].clientWidth),f.remove(),e=b-d},getScrollInfo:function(b){var d=b.isWindow?"":b.element.css("overflow-x"),
c=b.isWindow?"":b.element.css("overflow-y"),d="scroll"===d||"auto"===d&&b.width<b.element[0].scrollWidth;return{width:"scroll"===c||"auto"===c&&b.height<b.element[0].scrollHeight?a.position.scrollbarWidth():0,height:d?a.position.scrollbarWidth():0}},getWithinInfo:function(b){b=a(b||window);var d=a.isWindow(b[0]);return{element:b,isWindow:d,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:d?b.width():b.outerWidth(),height:d?b.height():b.outerHeight()}}};a.fn.position=
function(c){if(!c||!c.of)return m.apply(this,arguments);c=a.extend({},c);var e,u,A,I,D,s,q=a(c.of),x=a.position.getWithinInfo(c.within),M=a.position.getScrollInfo(x),z=(c.collision||"flip").split(" "),P={};return s=d(q),q[0].preventDefault&&(c.at="left top"),u=s.width,A=s.height,I=s.offset,D=a.extend({},I),a.each(["my","at"],function(){var a,b,d=(c[this]||"").split(" ");1===d.length&&(d=f.test(d[0])?d.concat(["center"]):n.test(d[0])?["center"].concat(d):["center","center"]);d[0]=f.test(d[0])?d[0]:
"center";d[1]=n.test(d[1])?d[1]:"center";a=p.exec(d[0]);b=p.exec(d[1]);P[this]=[a?a[0]:0,b?b[0]:0];c[this]=[t.exec(d[0])[0],t.exec(d[1])[0]]}),1===z.length&&(z[1]=z[0]),"right"===c.at[0]?D.left+=u:"center"===c.at[0]&&(D.left+=u/2),"bottom"===c.at[1]?D.top+=A:"center"===c.at[1]&&(D.top+=A/2),e=b(P.at,u,A),D.left+=e[0],D.top+=e[1],this.each(function(){var d,f,m=a(this),n=m.outerWidth(),p=m.outerHeight(),t=parseInt(a.css(this,"marginLeft"),10)||0,s=parseInt(a.css(this,"marginTop"),10)||0,L=n+t+(parseInt(a.css(this,
"marginRight"),10)||0)+M.width,V=p+s+(parseInt(a.css(this,"marginBottom"),10)||0)+M.height,w=a.extend({},D),K=b(P.my,m.outerWidth(),m.outerHeight());"right"===c.my[0]?w.left-=n:"center"===c.my[0]&&(w.left-=n/2);"bottom"===c.my[1]?w.top-=p:"center"===c.my[1]&&(w.top-=p/2);w.left+=K[0];w.top+=K[1];a.support.offsetFractions||(w.left=g(w.left),w.top=g(w.top));d={marginLeft:t,marginTop:s};a.each(["left","top"],function(b,f){a.ui.position[z[b]]&&a.ui.position[z[b]][f](w,{targetWidth:u,targetHeight:A,elemWidth:n,
elemHeight:p,collisionPosition:d,collisionWidth:L,collisionHeight:V,offset:[e[0]+K[0],e[1]+K[1]],my:c.my,at:c.at,within:x,elem:m})});c.using&&(f=function(a){var b=I.left-w.left,d=b+u-n,e=I.top-w.top,f=e+A-p,g={target:{element:q,left:I.left,top:I.top,width:u,height:A},element:{element:m,left:w.left,top:w.top,width:n,height:p},horizontal:0>d?"left":0<b?"right":"center",vertical:0>f?"top":0<e?"bottom":"middle"};n>u&&u>h(b+d)&&(g.horizontal="center");p>A&&A>h(e+f)&&(g.vertical="middle");g.important=k(h(b),
h(d))>k(h(e),h(f))?"horizontal":"vertical";c.using.call(this,a,g)});m.offset(a.extend(w,{using:f}))})};a.ui.position={fit:{left:function(a,b){var d,c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,c=c.width,f=a.left-b.collisionPosition.marginLeft,g=e-f,h=f+b.collisionWidth-c-e;b.collisionWidth>c?0<g&&0>=h?(d=a.left+g+b.collisionWidth-c-e,a.left+=g-d):a.left=0<h&&0>=g?e:g>h?e+c-b.collisionWidth:e:0<g?a.left+=g:0<h?a.left-=h:a.left=k(a.left-f,a.left)},top:function(a,b){var d,c=b.within,c=c.isWindow?
c.scrollTop:c.offset.top,e=b.within.height,f=a.top-b.collisionPosition.marginTop,g=c-f,h=f+b.collisionHeight-e-c;b.collisionHeight>e?0<g&&0>=h?(d=a.top+g+b.collisionHeight-e-c,a.top+=g-d):a.top=0<h&&0>=g?c:g>h?c+e-b.collisionHeight:c:0<g?a.top+=g:0<h?a.top-=h:a.top=k(a.top-f,a.top)}},flip:{left:function(a,b){var d,c,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,e=e.isWindow?e.scrollLeft:e.offset.left,k=a.left-b.collisionPosition.marginLeft,m=k-e,k=k+b.collisionWidth-g-e,n="left"===b.my[0]?-b.elemWidth:
"right"===b.my[0]?b.elemWidth:0,p="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,t=-2*b.offset[0];0>m?(d=a.left+n+p+t+b.collisionWidth-g-f,(0>d||h(m)>d)&&(a.left+=n+p+t)):0<k&&(c=a.left-b.collisionPosition.marginLeft+n+p+t-e,(0<c||k>h(c))&&(a.left+=n+p+t))},top:function(a,b){var d,c,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,e=e.isWindow?e.scrollTop:e.offset.top,k=a.top-b.collisionPosition.marginTop,m=k-e,k=k+b.collisionHeight-g-e,n="top"===b.my[1]?-b.elemHeight:"bottom"===
b.my[1]?b.elemHeight:0,p="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,t=-2*b.offset[1];0>m?(c=a.top+n+p+t+b.collisionHeight-g-f,a.top+n+p+t>m&&(0>c||h(m)>c)&&(a.top+=n+p+t)):0<k&&(d=a.top-b.collisionPosition.marginTop+n+p+t-e,a.top+n+p+t>k&&(0<d||k>h(d))&&(a.top+=n+p+t))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,
arguments)}}};(function(){var b,d,c,e,f=document.getElementsByTagName("body")[0];c=document.createElement("div");b=document.createElement(f?"div":"body");d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in d)b.style[e]=d[e];b.appendChild(c);d=f||document.documentElement;d.insertBefore(b,d.firstChild);c.style.cssText="position: absolute; left: 10.7432222px;";c=a(c).offset().left;a.support.offsetFractions=
10<c&&11>c;b.innerHTML="";d.removeChild(b)})()})(jQuery);
(function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(c){var b=this.options;return this.helper||b.disabled||0<a(c.target).closest(".ui-resizable-handle").length?
!1:(this.handle=this._getHandle(c),this.handle?(a(!0===b.iframeFix?"iframe":b.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(c){var b=this.options;return this.helper=this._createHelper(c),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),
a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},
parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(c),this.originalPageX=c.pageX,this.originalPageY=c.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),this._setContainment(),!1===this._trigger("start",c)?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c),this._mouseDrag(c,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,c),!0)},_mouseDrag:function(c,
b){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(c),this.positionAbs=this._convertPositionTo("absolute"),!b){var d=this._uiHash();if(!1===this._trigger("drag",c,d))return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&
a.ui.ddmanager.drag(this,c),!1},_mouseStop:function(c){var b=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,c)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,
parseInt(this.options.revertDuration,10),function(){!1!==b._trigger("stop",c)&&b._clear()}):!1!==this._trigger("stop",c)&&this._clear(),!1):!1},_mouseUp:function(c){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,c),a.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(c){return this.options.handle?
!!a(c.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(c){var b=this.options;c=a.isFunction(b.helper)?a(b.helper.apply(this.element[0],[c])):"clone"===b.helper?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo("parent"===b.appendTo?this.element[0].parentNode:b.appendTo),c[0]===this.element[0]||/(fixed|absolute)/.test(c.css("position"))||c.css("position","absolute"),c},_adjustOffsetFromHelper:function(c){"string"==
typeof c&&(c=c.split(" "));a.isArray(c)&&(c={left:+c[0],top:+c[1]||0});"left"in c&&(this.offset.click.left=c.left+this.margins.left);"right"in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left);"top"in c&&(this.offset.click.top=c.top+this.margins.top);"bottom"in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_getParentOffset:function(){var c=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&
a.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(c={top:0,left:0}),{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();
return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,b,d,e=this.options;return e.containment?"window"===e.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top],void 0):"document"===e.containment?(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):e.containment.constructor===Array?(this.containment=e.containment,void 0):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),b=a(e.containment),d=b[0],d&&(c="hidden"!==b.css("overflow"),this.containment=[(parseInt(b.css("borderLeftWidth"),
10)||0)+(parseInt(b.css("paddingLeft"),10)||0),(parseInt(b.css("borderTopWidth"),10)||0)+(parseInt(b.css("paddingTop"),10)||0),(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(b.css("borderRightWidth"),10)||0)-(parseInt(b.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(b.css("borderBottomWidth"),10)||0)-(parseInt(b.css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=b),void 0):(this.containment=null,void 0)},_convertPositionTo:function(c,b){b||(b=this.position);var d="absolute"===c?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:b.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===
this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:b.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(c){var b,d,e,k,h=this.options,g="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=c.pageX,n=c.pageY;return this.offset.scroll||(this.offset.scroll=
{top:g.scrollTop(),left:g.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),b=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):b=this.containment,c.pageX-this.offset.click.left<b[0]&&(f=b[0]+this.offset.click.left),c.pageY-this.offset.click.top<b[1]&&(n=b[1]+this.offset.click.top),c.pageX-this.offset.click.left>b[2]&&(f=b[2]+this.offset.click.left),c.pageY-this.offset.click.top>
b[3]&&(n=b[3]+this.offset.click.top)),h.grid&&(e=h.grid[1]?this.originalPageY+Math.round((n-this.originalPageY)/h.grid[1])*h.grid[1]:this.originalPageY,n=b?e-this.offset.click.top>=b[1]||e-this.offset.click.top>b[3]?e:e-this.offset.click.top>=b[1]?e-h.grid[1]:e+h.grid[1]:e,k=h.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/h.grid[0])*h.grid[0]:this.originalPageX,f=b?k-this.offset.click.left>=b[0]||k-this.offset.click.left>b[2]?k:k-this.offset.click.left>=b[0]?k-h.grid[0]:k+h.grid[0]:
k)),{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=
!1},_trigger:function(c,b,d){return d=d||this._uiHash(),a.ui.plugin.call(this,c,[b,d]),"drag"===c&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,c,b,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(c,b){var d=a(this).data("ui-draggable"),e=d.options,k=a.extend({},b,{item:d.element});d.sortables=
[];a(e.connectToSortable).each(function(){var b=a.data(this,"ui-sortable");b&&!b.options.disabled&&(d.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",c,k))})},stop:function(c,b){var d=a(this).data("ui-draggable"),e=a.extend({},b,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),
this.instance._mouseStop(c),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",c,e))})},drag:function(c,b){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var k=!1,h=this;this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&
(k=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==h&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(h.instance.element[0],this.instance.element[0])&&(k=!1),k}));k?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=
this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},c.target=this.instance.currentItem[0],this.instance._mouseCapture(c,!0),this.instance._mouseStart(c,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",c),d.dropped=
this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(c)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",c,this.instance._uiHash(this.instance)),this.instance._mouseStop(c,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),
d._trigger("fromSortable",c),d.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(){var c=a("body"),b=a(this).data("ui-draggable").options;c.css("cursor")&&(b._cursor=c.css("cursor"));c.css("cursor",b.cursor)},stop:function(){var c=a(this).data("ui-draggable").options;c._cursor&&a("body").css("cursor",c._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(c,b){var d=a(b.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity"));d.css("opacity",
e.opacity)},stop:function(c,b){var d=a(this).data("ui-draggable").options;d._opacity&&a(b.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var c=a(this).data("ui-draggable");c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName&&(c.overflowOffset=c.scrollParent.offset())},drag:function(c){var b=a(this).data("ui-draggable"),d=b.options,e=!1;b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(b.overflowOffset.top+
b.scrollParent[0].offsetHeight-c.pageY<d.scrollSensitivity?b.scrollParent[0].scrollTop=e=b.scrollParent[0].scrollTop+d.scrollSpeed:c.pageY-b.overflowOffset.top<d.scrollSensitivity&&(b.scrollParent[0].scrollTop=e=b.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(b.overflowOffset.left+b.scrollParent[0].offsetWidth-c.pageX<d.scrollSensitivity?b.scrollParent[0].scrollLeft=e=b.scrollParent[0].scrollLeft+d.scrollSpeed:c.pageX-b.overflowOffset.left<d.scrollSensitivity&&(b.scrollParent[0].scrollLeft=
e=b.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(c.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(c.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(c.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(c.pageX-a(document).scrollLeft())<
d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed))));!1!==e&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(b,c)}});a.ui.plugin.add("draggable","snap",{start:function(){var c=a(this).data("ui-draggable"),b=c.options;c.snapElements=[];a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var b=a(this),e=b.offset();this!==c.element[0]&&c.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),
top:e.top,left:e.left})})},drag:function(c,b){var d,e,k,h,g,f,n,p,t,s,m=a(this).data("ui-draggable"),v=m.options,r=v.snapTolerance,u=b.offset.left,A=u+m.helperProportions.width,I=b.offset.top,D=I+m.helperProportions.height;for(t=m.snapElements.length-1;0<=t;t--)g=m.snapElements[t].left,f=g+m.snapElements[t].width,n=m.snapElements[t].top,p=n+m.snapElements[t].height,g-r>A||u>f+r||n-r>D||I>p+r||!a.contains(m.snapElements[t].item.ownerDocument,m.snapElements[t].item)?(m.snapElements[t].snapping&&m.options.snap.release&&
m.options.snap.release.call(m.element,c,a.extend(m._uiHash(),{snapItem:m.snapElements[t].item})),m.snapElements[t].snapping=!1):("inner"!==v.snapMode&&(d=r>=Math.abs(n-D),e=r>=Math.abs(p-I),k=r>=Math.abs(g-A),h=r>=Math.abs(f-u),d&&(b.position.top=m._convertPositionTo("relative",{top:n-m.helperProportions.height,left:0}).top-m.margins.top),e&&(b.position.top=m._convertPositionTo("relative",{top:p,left:0}).top-m.margins.top),k&&(b.position.left=m._convertPositionTo("relative",{top:0,left:g-m.helperProportions.width}).left-
m.margins.left),h&&(b.position.left=m._convertPositionTo("relative",{top:0,left:f}).left-m.margins.left)),s=d||e||k||h,"outer"!==v.snapMode&&(d=r>=Math.abs(n-I),e=r>=Math.abs(p-D),k=r>=Math.abs(g-u),h=r>=Math.abs(f-A),d&&(b.position.top=m._convertPositionTo("relative",{top:n,left:0}).top-m.margins.top),e&&(b.position.top=m._convertPositionTo("relative",{top:p-m.helperProportions.height,left:0}).top-m.margins.top),k&&(b.position.left=m._convertPositionTo("relative",{top:0,left:g}).left-m.margins.left),
h&&(b.position.left=m._convertPositionTo("relative",{top:0,left:f-m.helperProportions.width}).left-m.margins.left)),!m.snapElements[t].snapping&&(d||e||k||h||s)&&m.options.snap.snap&&m.options.snap.snap.call(m.element,c,a.extend(m._uiHash(),{snapItem:m.snapElements[t].item})),m.snapElements[t].snapping=d||e||k||h||s)}});a.ui.plugin.add("draggable","stack",{start:function(){var c,b=this.data("ui-draggable").options,b=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||
0)-(parseInt(a(c).css("zIndex"),10)||0)});b.length&&(c=parseInt(a(b[0]).css("zIndex"),10)||0,a(b).each(function(b){a(this).css("zIndex",c+b)}),this.css("zIndex",c+b.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(c,b){var d=a(b.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex"));d.css("zIndex",e.zIndex)},stop:function(c,b){var d=a(this).data("ui-draggable").options;d._zIndex&&a(b.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(a){a.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var c=this.options,b=c.accept;this.isover=!1;this.isout=!0;this.accept=a.isFunction(b)?b:function(a){return a.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[c.scope]=
a.ui.ddmanager.droppables[c.scope]||[];a.ui.ddmanager.droppables[c.scope].push(this);c.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var c=0,b=a.ui.ddmanager.droppables[this.options.scope];b.length>c;c++)b[c]===this&&b.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(c,b){"accept"===c&&(this.accept=a.isFunction(b)?b:function(a){return a.is(b)});a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(c){var b=
a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);b&&this._trigger("activate",c,this.ui(b))},_deactivate:function(c){var b=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",c,this.ui(b))},_over:function(c){var b=a.ui.ddmanager.current;b&&(b.currentItem||b.element)[0]!==this.element[0]&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),
this._trigger("over",c,this.ui(b)))},_out:function(c){var b=a.ui.ddmanager.current;b&&(b.currentItem||b.element)[0]!==this.element[0]&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",c,this.ui(b)))},_drop:function(c,b){var d=b||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=
a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",c,this.ui(d)),
this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(a,b,d){if(!b.offset)return!1;var e,k,h=(a.positionAbs||a.position.absolute).left,g=h+a.helperProportions.width,f=(a.positionAbs||a.position.absolute).top,n=f+a.helperProportions.height,p=b.offset.left,t=p+b.proportions.width,s=b.offset.top,m=s+b.proportions.height;switch(d){case "fit":return h>=p&&t>=g&&f>=s&&m>=n;case "intersect":return h+
a.helperProportions.width/2>p&&t>g-a.helperProportions.width/2&&f+a.helperProportions.height/2>s&&m>n-a.helperProportions.height/2;case "pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,k=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,k>s&&s+b.proportions.height>k&&e>p&&p+b.proportions.width>e;case "touch":return(f>=s&&m>=f||n>=s&&m>=n||s>f&&n>m)&&(h>=p&&t>=h||g>=p&&t>=g||p>h&&g>t);default:return!1}};a.ui.ddmanager={current:null,
droppables:{"default":[]},prepareOffsets:function(c,b){var d,e,k=a.ui.ddmanager.droppables[c.options.scope]||[],h=b?b.type:null,g=(c.currentItem||c.element).find(":data(ui-droppable)").addBack();d=0;a:for(;k.length>d;d++)if(!(k[d].options.disabled||c&&!k[d].accept.call(k[d].element[0],c.currentItem||c.element))){for(e=0;g.length>e;e++)if(g[e]===k[d].element[0]){k[d].proportions.height=0;continue a}k[d].visible="none"!==k[d].element.css("display");k[d].visible&&("mousedown"===h&&k[d]._activate.call(k[d],
b),k[d].offset=k[d].element.offset(),k[d].proportions={width:k[d].element[0].offsetWidth,height:k[d].element[0].offsetHeight})}},drop:function(c,b){var d=!1;return a.each((a.ui.ddmanager.droppables[c.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(c,this,this.options.tolerance)&&(d=this._drop.call(this,b)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,
b)))}),d},dragStart:function(c,b){c.element.parentsUntil("body").bind("scroll.droppable",function(){c.options.refreshPositions||a.ui.ddmanager.prepareOffsets(c,b)})},drag:function(c,b){c.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(c,b);a.each(a.ui.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,k,h=a.ui.intersect(c,this,this.options.tolerance);(h=!h&&this.isover?"isout":h&&!this.isover?"isover":null)&&(this.options.greedy&&
(e=this.options.scope,k=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),k.length&&(d=a.data(k[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,b)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,b),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,b)))}})},dragStop:function(c,b){c.element.parentsUntil("body").unbind("scroll.droppable");
c.options.refreshPositions||a.ui.ddmanager.prepareOffsets(c,b)}}})(jQuery);
(function(a){function c(a){return parseInt(a,10)||0}function b(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,k,h,g,f=this,n=this.options;if(this.element.addClass("ui-resizable"),
a.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),
this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)k=a.trim(b[c]),g="ui-resizable-"+k,h=a("<div class='ui-resizable-handle "+g+"'></div>"),h.css({zIndex:n.zIndex}),"se"===k&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[k]=".ui-resizable-"+k,this.element.append(h);this._renderAxis=function(b){var d,c,e,f;b=b||this.element;for(d in this.handles)this.handles[d].constructor===
String&&(this.handles[d]=a(this.handles[d],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(c=a(this.handles[d],this.element),f=/sw|ne|nw|se|n|s/.test(d)?c.outerHeight():c.outerWidth(),e=["padding",/ne|nw|n/.test(d)?"Top":/se|sw|s/.test(d)?"Bottom":/^e$/.test(d)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[d]).length};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){f.resizing||(this.className&&(h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),f.axis=h&&h[1]?h[1]:"se")});n.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){n.disabled||(a(this).removeClass("ui-resizable-autohide"),f._handles.show())}).mouseleave(function(){n.disabled||f.resizing||(a(this).addClass("ui-resizable-autohide"),f._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),
this},_mouseCapture:function(b){var c,k,h=!1;for(c in this.handles)k=a(this.handles[c])[0],(k===b.target||a.contains(k,b.target))&&(h=!0);return!this.options.disabled&&h},_mouseStart:function(b){var e,k,h,g=this.options,f=this.element.position(),n=this.element;return this.resizing=!0,/absolute/.test(n.css("position"))?n.css({position:"absolute",top:n.css("top"),left:n.css("left")}):n.is(".ui-draggable")&&n.css({position:"absolute",top:f.top,left:f.left}),this._renderProxy(),e=c(this.helper.css("left")),
k=c(this.helper.css("top")),g.containment&&(e+=a(g.containment).scrollLeft()||0,k+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:k},this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalPosition={left:e,top:k},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-
n.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,h=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===h?this.axis+"-resize":h),n.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,k=this.helper,h={},g=this.originalMousePosition,f=this.position.top,n=this.position.left,p=this.size.width,t=this.size.height,
s=b.pageX-g.left||0,g=b.pageY-g.top||0,m=this._change[this.axis];return m?(c=m.apply(this,[b,s,g]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==f&&(h.top=this.position.top+"px"),this.position.left!==n&&(h.left=this.position.left+"px"),this.size.width!==p&&(h.width=this.size.width+"px"),this.size.height!==t&&(h.height=this.size.height+"px"),k.css(h),
!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(h)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,k,h,g,f,n,p,t=this.options;return this._helper&&(c=this._proportionallyResizeElements,k=c.length&&/textarea/i.test(c[0].nodeName),h=k&&a.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height,g=k?0:this.sizeDiff.width,f={width:this.helper.width()-g,height:this.helper.height()-h},n=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,p=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,t.animate||this.element.css(a.extend(f,{top:p,left:n})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!t.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var c,
k,h,g,f;f=this.options;f={minWidth:b(f.minWidth)?f.minWidth:0,maxWidth:b(f.maxWidth)?f.maxWidth:1/0,minHeight:b(f.minHeight)?f.minHeight:0,maxHeight:b(f.maxHeight)?f.maxHeight:1/0};(this._aspectRatio||a)&&(c=f.minHeight*this.aspectRatio,h=f.minWidth/this.aspectRatio,k=f.maxHeight*this.aspectRatio,g=f.maxWidth/this.aspectRatio,c>f.minWidth&&(f.minWidth=c),h>f.minHeight&&(f.minHeight=h),f.maxWidth>k&&(f.maxWidth=k),f.maxHeight>g&&(f.maxHeight=g));this._vBoundaries=f},_updateCache:function(a){this.offset=
this.helper.offset();b(a.left)&&(this.position.left=a.left);b(a.top)&&(this.position.top=a.top);b(a.height)&&(this.size.height=a.height);b(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var c=this.position,k=this.size,h=this.axis;return b(a.height)?a.width=a.height*this.aspectRatio:b(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===h&&(a.left=c.left+(k.width-a.width),a.top=null),"nw"===h&&(a.top=c.top+(k.height-a.height),a.left=c.left+(k.width-a.width)),a},_respectSize:function(a){var c=
this._vBoundaries,k=this.axis,h=b(a.width)&&c.maxWidth&&c.maxWidth<a.width,g=b(a.height)&&c.maxHeight&&c.maxHeight<a.height,f=b(a.width)&&c.minWidth&&c.minWidth>a.width,n=b(a.height)&&c.minHeight&&c.minHeight>a.height,p=this.originalPosition.left+this.originalSize.width,t=this.position.top+this.size.height,s=/sw|nw|w/.test(k),k=/nw|ne|n/.test(k);return f&&(a.width=c.minWidth),n&&(a.height=c.minHeight),h&&(a.width=c.maxWidth),g&&(a.height=c.maxHeight),f&&s&&(a.left=p-c.minWidth),h&&s&&(a.left=p-c.maxWidth),
n&&k&&(a.top=t-c.minHeight),g&&k&&(a.top=t-c.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,h,g,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(g=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[g.css("borderTopWidth"),g.css("borderRightWidth"),g.css("borderBottomWidth"),g.css("borderLeftWidth")],
h=[g.css("paddingTop"),g.css("paddingRight"),g.css("paddingBottom"),g.css("paddingLeft")],b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(h[b],10)||0);g.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+
c}},se:function(b,c,k){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,k]))},sw:function(b,c,k){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,k]))},ne:function(b,c,k){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,k]))},nw:function(b,c,k){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,k]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]);
"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),k=c.options,h=c._proportionallyResizeElements,g=h.length&&/textarea/i.test(h[0].nodeName),f=g&&a.ui.hasScroll(h[0],"left")?0:c.sizeDiff.height,g=
{width:c.size.width-(g?0:c.sizeDiff.width),height:c.size.height-f},f=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,n=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(g,n&&f?{top:n,left:f}:{}),{duration:k.animateDuration,easing:k.animateEasing,step:function(){var f={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),
10)};h&&h.length&&a(h[0]).css({width:f.width,height:f.height});c._updateCache(f);c._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var b,e,k,h,g,f,n,p=a(this).data("ui-resizable"),t=p.element,s=p.options.containment;(t=s instanceof a?s.get(0):/parent/.test(s)?t.parent().get(0):s)&&(p.containerElement=a(t),/document/.test(s)||s===document?(p.containerOffset={left:0,top:0},p.containerPosition={left:0,top:0},p.parentData={element:a(document),left:0,top:0,width:a(document).width(),
height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(t),e=[],a(["Top","Right","Left","Bottom"]).each(function(a,f){e[a]=c(b.css("padding"+f))}),p.containerOffset=b.offset(),p.containerPosition=b.position(),p.containerSize={height:b.innerHeight()-e[3],width:b.innerWidth()-e[1]},k=p.containerOffset,h=p.containerSize.height,g=p.containerSize.width,f=a.ui.hasScroll(t,"left")?t.scrollWidth:g,n=a.ui.hasScroll(t)?t.scrollHeight:h,p.parentData={element:t,left:k.left,top:k.top,width:f,
height:n}))},resize:function(b){var c,k,h,g,f=a(this).data("ui-resizable");c=f.options;k=f.containerOffset;h=f.position;b=f._aspectRatio||b.shiftKey;g={top:0,left:0};var n=f.containerElement;n[0]!==document&&/static/.test(n.css("position"))&&(g=k);h.left<(f._helper?k.left:0)&&(f.size.width+=f._helper?f.position.left-k.left:f.position.left-g.left,b&&(f.size.height=f.size.width/f.aspectRatio),f.position.left=c.helper?k.left:0);h.top<(f._helper?k.top:0)&&(f.size.height+=f._helper?f.position.top-k.top:
f.position.top,b&&(f.size.width=f.size.height*f.aspectRatio),f.position.top=f._helper?k.top:0);f.offset.left=f.parentData.left+f.position.left;f.offset.top=f.parentData.top+f.position.top;c=Math.abs(f.offset.left-g.left+f.sizeDiff.width);k=Math.abs((f._helper?f.offset.top-g.top:f.offset.top-k.top)+f.sizeDiff.height);h=f.containerElement.get(0)===f.element.parent().get(0);g=/relative|absolute/.test(f.containerElement.css("position"));h&&g&&(c-=f.parentData.left);c+f.size.width>=f.parentData.width&&
(f.size.width=f.parentData.width-c,b&&(f.size.height=f.size.width/f.aspectRatio));k+f.size.height>=f.parentData.height&&(f.size.height=f.parentData.height-k,b&&(f.size.width=f.size.height*f.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,k=b.containerOffset,h=b.containerPosition,g=b.containerElement,f=a(b.helper),n=f.offset(),p=f.outerWidth()-b.sizeDiff.width,f=f.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(g.css("position"))&&a(this).css({left:n.left-
h.left-k.left,width:p,height:f});b._helper&&!c.animate&&/static/.test(g.css("position"))&&a(this).css({left:n.left-h.left-k.left,width:p,height:f})}});a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable").options,c=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof b.alsoResize||b.alsoResize.parentNode?
c(b.alsoResize):b.alsoResize.length?(b.alsoResize=b.alsoResize[0],c(b.alsoResize)):a.each(b.alsoResize,function(a){c(a)})},resize:function(b,c){var k=a(this).data("ui-resizable"),h=k.options,g=k.originalSize,f=k.originalPosition,n={height:k.size.height-g.height||0,width:k.size.width-g.width||0,top:k.position.top-f.top||0,left:k.position.left-f.left||0},p=function(b,d){a(b).each(function(){var b=a(this),f=a(this).data("ui-resizable-alsoresize"),g={},h=d&&d.length?d:b.parents(c.originalElement[0]).length?
["width","height"]:["width","height","top","left"];a.each(h,function(a,b){var c=(f[b]||0)+(n[b]||0);c&&0<=c&&(g[b]=c||null)});b.css(g)})};"object"!=typeof h.alsoResize||h.alsoResize.nodeType?p(h.alsoResize):a.each(h.alsoResize,function(a,b){p(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,k=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",
height:k.height,width:k.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),
c=b.options,k=b.size,h=b.originalSize,g=b.originalPosition,f=b.axis,n="number"==typeof c.grid?[c.grid,c.grid]:c.grid,p=n[0]||1,t=n[1]||1,s=Math.round((k.width-h.width)/p)*p,k=Math.round((k.height-h.height)/t)*t,m=h.width+s,h=h.height+k,v=c.maxWidth&&m>c.maxWidth,r=c.maxHeight&&h>c.maxHeight,u=c.minWidth&&c.minWidth>m,A=c.minHeight&&c.minHeight>h;c.grid=n;u&&(m+=p);A&&(h+=t);v&&(m-=p);r&&(h-=t);/^(se|s|e)$/.test(f)?(b.size.width=m,b.size.height=h):/^(ne)$/.test(f)?(b.size.width=m,b.size.height=h,b.position.top=
g.top-k):/^(sw)$/.test(f)?(b.size.width=m,b.size.height=h,b.position.left=g.left-s):(b.size.width=m,b.size.height=h,b.position.top=g.top-k,b.position.left=g.left-s)}})})(jQuery);
(function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var c,b=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){c=a(b.options.filter,b.element[0]);c.addClass("ui-selectee");c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,
left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy()},_mouseStart:function(c){var b=this,d=this.options;this.opos=[c.pageX,c.pageY];this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",c),a(d.appendTo).append(this.helper),this.helper.css({left:c.pageX,top:c.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0;c.metaKey||c.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,
d.$element.addClass("ui-unselecting"),d.unselecting=!0,b._trigger("unselecting",c,{unselecting:d.element}))}),a(c.target).parents().addBack().each(function(){var d,k=a.data(this,"selectable-item");return k?(d=!c.metaKey&&!c.ctrlKey||!k.$element.hasClass("ui-selected"),k.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),k.unselecting=!d,k.selecting=d,k.selected=d,d?b._trigger("selecting",c,{selecting:k.element}):b._trigger("unselecting",c,{unselecting:k.element}),
!1):void 0}))},_mouseDrag:function(c){if(this.dragged=!0,!this.options.disabled){var b,d=this,e=this.options,k=this.opos[0],h=this.opos[1],g=c.pageX,f=c.pageY;return k>g&&(b=g,g=k,k=b),h>f&&(b=f,f=h,h=b),this.helper.css({left:k,top:h,width:g-k,height:f-h}),this.selectees.each(function(){var b=a.data(this,"selectable-item"),p=!1;b&&b.element!==d.element[0]&&("touch"===e.tolerance?p=!(b.left>g||k>b.right||b.top>f||h>b.bottom):"fit"===e.tolerance&&(p=b.left>k&&g>b.right&&b.top>h&&f>b.bottom),p?(b.selected&&
(b.$element.removeClass("ui-selected"),b.selected=!1),b.unselecting&&(b.$element.removeClass("ui-unselecting"),b.unselecting=!1),b.selecting||(b.$element.addClass("ui-selecting"),b.selecting=!0,d._trigger("selecting",c,{selecting:b.element}))):(b.selecting&&((c.metaKey||c.ctrlKey)&&b.startselected?(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.$element.addClass("ui-selected"),b.selected=!0):(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.startselected&&(b.$element.addClass("ui-unselecting"),
b.unselecting=!0),d._trigger("unselecting",c,{unselecting:b.element}))),b.selected&&(c.metaKey||c.ctrlKey||b.startselected||(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,d._trigger("unselecting",c,{unselecting:b.element})))))}),!1}},_mouseStop:function(c){var b=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=!1;d.startselected=
!1;b._trigger("unselected",c,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;b._trigger("selected",c,{selected:d.element})}),this._trigger("stop",c),this.helper.remove(),!1}})})(jQuery);
(function(a){function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",
zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();
for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var e=null,k=!1,h=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,h.widgetName+"-item")===
h?(e=a(this),!1):void 0}),a.data(b.target,h.widgetName+"-item")===h&&(e=a(b.target)),e?!this.options.handle||c||(a(this.options.handle,e).find("*").addBack().each(function(){this===b.target&&(k=!0)}),k)?(this.currentItem=e,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(b,c,e){var k;c=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),
this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),c.containment&&this._setContainment(),c.cursor&&"auto"!==c.cursor&&(k=this.document.find("body"),this.storedCursor=k.css("cursor"),k.css("cursor",c.cursor),this.storedStylesheet=a("<style>*{ cursor: "+c.cursor+" !important; }</style>").appendTo(k)),c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),
this.helper.css("opacity",c.opacity)),c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!e)for(e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&
(a.ui.ddmanager.current=this),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,e,k,h;c=this.options;var g=!1;this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+
this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=
g=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?g=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(g=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?g=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(g=a(document).scrollLeft(a(document).scrollLeft()+
c.scrollSpeed))),!1!==g&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(c=this.items.length-1;0<=c;c--)if(e=this.items[c],k=e.item[0],h=this._intersectsWithPointer(e),h&&e.instance===this.currentContainer&&k!==this.currentItem[0]&&
this.placeholder[1===h?"next":"prev"]()[0]!==k&&!a.contains(this.placeholder[0],k)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],k):!0)){if(this.direction=1===h?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(e))break;this._rearrange(b,e);this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,
c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var e=this,k=this.placeholder.offset(),h=this.options.axis,g={};h&&"x"!==h||(g.left=k.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));h&&"y"!==h||(g.top=k.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;a(this.helper).animate(g,parseInt(this.options.revert,
10)||500,function(){e._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=
0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),e=[];return b=
b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&e.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!e.length&&b.key&&e.push(b.key+"="),e.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),e=[];return b=b||{},c.each(function(){e.push(a(b.item||this).attr(b.attribute||"id")||"")}),e},_intersectsWith:function(a){var c=this.positionAbs.left,e=c+this.helperProportions.width,k=this.positionAbs.top,
h=k+this.helperProportions.height,g=a.left,f=g+a.width,n=a.top,p=n+a.height,t=this.offset.click.top,s=this.offset.click.left,s="y"===this.options.axis||c+s>g&&f>c+s,t=("x"===this.options.axis||k+t>n&&p>k+t)&&s;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?t:c+this.helperProportions.width/2>g&&f>e-this.helperProportions.width/2&&k+this.helperProportions.height/
2>n&&p>h-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c="y"===this.options.axis||this.positionAbs.left+this.offset.click.left>a.left&&a.left+a.width>this.positionAbs.left+this.offset.click.left;a=("x"===this.options.axis||this.positionAbs.top+this.offset.click.top>a.top&&a.top+a.height>this.positionAbs.top+this.offset.click.top)&&c;var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return a?this.floating?e&&"right"===e||"down"===c?2:1:c&&("down"===
c?2:1):!1},_intersectsWithSides:function(a){var c=this.positionAbs.top+this.offset.click.top>a.top+a.height/2&&a.top+a.height/2+a.height>this.positionAbs.top+this.offset.click.top;a=this.positionAbs.left+this.offset.click.left>a.left+a.width/2&&a.left+a.width/2+a.width>this.positionAbs.left+this.offset.click.left;var e=this._getDragVerticalDirection(),k=this._getDragHorizontalDirection();return this.floating&&k?"right"===k&&a||"left"===k&&!a:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=
this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c,e,k,h=[],g=[],f=this._connectWith();if(f&&b)for(b=f.length-1;0<=
b;b--)for(e=a(f[b]),c=e.length-1;0<=c;c--)(k=a.data(e[c],this.widgetFullName))&&k!==this&&!k.options.disabled&&g.push([a.isFunction(k.options.items)?k.options.items.call(k.element):a(k.options.items,k.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),k]);g.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);
for(b=g.length-1;0<=b;b--)g[b][0].each(function(){h.push(this)});return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var c,e,k,h,g,f=this.items,n=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,
this.element),this]];if((g=this._connectWith())&&this.ready)for(c=g.length-1;0<=c;c--)for(k=a(g[c]),e=k.length-1;0<=e;e--)(h=a.data(k[e],this.widgetFullName))&&h!==this&&!h.options.disabled&&(n.push([a.isFunction(h.options.items)?h.options.items.call(h.element[0],b,{item:this.currentItem}):a(h.options.items,h.element),h]),this.containers.push(h));for(c=n.length-1;0<=c;c--)for(b=n[c][1],k=n[c][0],e=0,g=k.length;g>e;e++)h=a(k[e]),h.data(this.widgetName+"-item",b),f.push({item:h,instance:b,width:0,height:0,
left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,e,k,h;for(c=this.items.length-1;0<=c;c--)e=this.items[c],e.instance!==this.currentContainer&&this.currentContainer&&e.item[0]!==this.currentItem[0]||(k=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item,b||(e.width=k.outerWidth(),e.height=k.outerHeight()),h=k.offset(),e.left=h.left,e.top=h.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(c=this.containers.length-1;0<=c;c--)h=this.containers[c].element.offset(),this.containers[c].containerCache.left=h.left,this.containers[c].containerCache.top=h.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,e=b.options;e.placeholder&&e.placeholder.constructor!==String||(c=e.placeholder,e.placeholder={element:function(){var e=
b.currentItem[0].nodeName.toLowerCase(),h=a("<"+e+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===e?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(h)}):"img"===e&&h.attr("src",b.currentItem.attr("src")),c||h.css("visibility","hidden"),h},update:function(a,h){(!c||e.forcePlaceholderSize)&&(h.height()||h.height(b.currentItem.innerHeight()-
parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),h.width()||h.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}});b.placeholder=a(e.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);e.placeholder.update(b,b.placeholder)},_contactContainers:function(b){var d,e,k,h,g,f,n,p,t,s=e=null;for(d=this.containers.length-1;0<=d;d--)a.contains(this.currentItem[0],
this.containers[d].element[0])||(this._intersectsWith(this.containers[d].containerCache)?e&&a.contains(this.containers[d].element[0],e.element[0])||(e=this.containers[d],s=d):this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",b,this._uiHash(this)),this.containers[d].containerCache.over=0));if(e)if(1===this.containers.length)this.containers[s].containerCache.over||(this.containers[s]._trigger("over",b,this._uiHash(this)),this.containers[s].containerCache.over=1);else{d=1E4;
k=null;h=(t=e.floating||c(this.currentItem))?"left":"top";g=t?"width":"height";f=this.positionAbs[h]+this.offset.click[h];for(e=this.items.length-1;0<=e;e--)a.contains(this.containers[s].element[0],this.items[e].item[0])&&this.items[e].item[0]!==this.currentItem[0]&&(!t||this.positionAbs.top+this.offset.click.top>this.items[e].top&&this.items[e].top+this.items[e].height>this.positionAbs.top+this.offset.click.top)&&(n=this.items[e].item.offset()[h],p=!1,Math.abs(n-f)>Math.abs(n+this.items[e][g]-f)&&
(p=!0,n+=this.items[e][g]),d>Math.abs(n-f)&&(d=Math.abs(n-f),k=this.items[e],this.direction=p?"up":"down"));(k||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[s]&&(k?this._rearrange(b,k,null,!0):this._rearrange(b,null,this.containers[s].element,!0),this._trigger("change",b,this._uiHash()),this.containers[s]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[s],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[s]._trigger("over",
b,this._uiHash(this)),this.containers[s].containerCache.over=1)}},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return b.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!b[0].style.width||c.forceHelperSize)&&b.width(this.currentItem.width()),(!b[0].style.height||c.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in
b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&
"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,e,k=this.options;"parent"===k.containment&&(k.containment=this.helper[0].parentNode);"document"!==k.containment&&"window"!==k.containment||(this.containment=[0-this.offset.relative.left-
this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===k.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===k.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(k.containment)||(b=a(k.containment)[0],c=a(k.containment).offset(),e="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),
10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(e?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(e?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var e="absolute"===b?1:-1,k="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(k[0].tagName);return{top:c.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:k.scrollTop())*e,left:c.left+this.offset.relative.left*
e+this.offset.parent.left*e-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:k.scrollLeft())*e}},_generatePosition:function(b){var c,e,k=this.options,h=b.pageX,g=b.pageY,f="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(f[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=
this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(h=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(h=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),k.grid&&(c=this.originalPageY+Math.round((g-
this.originalPageY)/k.grid[1])*k.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-k.grid[1]:c+k.grid[1]:c,e=this.originalPageX+Math.round((h-this.originalPageX)/k.grid[0])*k.grid[0],h=this.containment?e-this.offset.click.left>=this.containment[0]&&e-this.offset.click.left<=this.containment[2]?e:e-this.offset.click.left>=this.containment[0]?e-k.grid[0]:e+k.grid[0]:e)),{top:g-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:f.scrollTop()),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:f.scrollLeft())}},_rearrange:function(a,c,e,k){e?e[0].appendChild(this.placeholder[0]):c.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?c.item[0]:c.item[0].nextSibling);var h=this.counter=this.counter?++this.counter:
1;this._delay(function(){h===this.counter&&this.refreshPositions(!k)})},_clear:function(a,c){this.reverting=!1;var e,k=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(e in this._storedCSS)"auto"!==this._storedCSS[e]&&"static"!==this._storedCSS[e]||(this._storedCSS[e]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&
!c&&k.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||c||k.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&(c||(k.push(function(a){this._trigger("remove",a,this._uiHash())}),k.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),
k.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(e=this.containers.length-1;0<=e;e--)c||k.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(k.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",
this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",a,this._uiHash());for(e=0;k.length>e;e++)k[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(c||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(e=0;k.length>e;e++)k[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})})(jQuery);
var Lasso={id:"Lasso",container:"body",selector:"div",style:{"z-index":100,border:"1px solid #0c79cc",position:"absolute"},scrollTop:0,append:function(){if(0<$("#"+Lasso.id).length)return null;var a=$("<div></div>");a.attr("id",Lasso.id);a.css(Lasso.style);a.css({top:Lasso.mousedown.pageY,left:Lasso.mousedown.pageX});$(Lasso.container).append(a)},disable:function(){$(document).off("mousedown",Lasso.onmousedown);$(document).off("slide",Lasso.slide);$(document).off("slideend",Lasso.release)},enable:function(){$(document).on("mousedown",
Lasso.onmousedown);$(document).on("slide",Lasso.slide);$(document).on("slideend",Lasso.release)},onmousedown:function(a){Lasso.mousedown=a;Lasso.scrollTop=$(Lasso.container).scrollTop();return!0},release:function(a,c){var b=$("#"+Lasso.id);if(0===b.length)return null;var d,e,k,h;d=b.offset().left;e=b.offset().left+b.outerWidth();k=b.offset().top;h=b.offset().top+b.outerHeight();$();$(Lasso.selector).each(function(){var a=$(this);if(a.offset().left<d||a.offset().left+a.outerWidth()>e||a.offset().top<
k||a.offset().top+a.outerHeight()>h)return!0;$(this).addClass("Lasso")});$(".Lasso").each(function(){$(this).find(".Lasso").each(function(){$(this).removeClass("Lasso")})});$(".Lasso").each(function(){$(this).removeClass("Lasso");$(this).trigger("lasso")});b.remove()},slide:function(a,c){Lasso.append();var b=$("#"+Lasso.id),d=$(Lasso.container).scrollTop()-Lasso.scrollTop,d={vertical:Lasso.mousedown.pageY-d,horizontal:Lasso.mousedown.pageX},e;for(e in d){var k=e,h=d[e],g="horizontal"==k?c.pageX:c.pageY,
f="horizontal"==k?"width":"height",k="horizontal"==k?"left":"top",n=g-h;0<=n?b.css(f,n).css(k,h):b.css(k,g).css(f,-n)}}},ValidateEmail=function(a){return/\S+@\S+\.\S+/.test(a)},ParseQueryString=function(){for(var a={},c,b=/\+/g,d=/([^&=]+)=?([^&]*)/g,e=window.location.search.substring(1);c=d.exec(e);)a[decodeURIComponent(c[1].replace(b," "))]=decodeURIComponent(c[2].replace(b," "));return a},Permalink=function(a){return a?a.toLowerCase().replace(/[^a-z0-9- _\.]/gi,"").replace(/ /g,"_"):""};
$.scrollbarWidth=function(){if(navigator.userAgent.match(/Mac OS X 10_7/))return 10;var a=$('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"> </div>');$("body").append(a);var c=$("div",a).innerWidth();a.css("overflow-y","scroll");var b=$("div",a).innerWidth();a.remove();return c-b};
$.isOnScrollbar=function(a,c){var b=$.scrollbarWidth(),d=$(window).width(),e=$(window).height(),k=$("body").width(),h=$("body").height()>e;return h&&d-a<b||k>d&&e-c<b?!0:!1};var ToProperCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},ParseName=function(a){return a?ToProperCase(a.replace(/\@.*/,"").replace(/[0-9]/g,"").replace(/\./," ")):""};
$.topDiv=function(a,c,b){var d=null;$(a).each(function(){var a=$(this);if(a.position().left>c||a.position().left+a.outerWidth()<c)return!0;var k=a.position().top;if(k>b||k+a.outerHeight()<b)return!0;if(!d)return d=a;var k=parseFloat(a.css("z-index")),h=parseFloat(d.css("z-index"));if(k>h)return d=a;if(k<h)return!0;if(a.index()>d.index())return d=a});return d};
(function(a,c,b){function d(a,b,c){for(var d=[],e=0;e<a.length;e++){var f=tinycolor(a[e]),g=0.5>f.toHsl().l?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light",g=g+(tinycolor.equals(b,a[e])?" sp-thumb-active":""),h=r?"background-color:"+f.toRgbString():"filter:"+f.toFilter();d.push('<span title="'+f.toRgbString()+'" data-color="'+f.toRgbString()+'" class="'+g+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}return"<div class='sp-cf "+c+"'>"+d.join("")+"</div>"}function e(a,b){var d=
c.extend({},s,a);d.callbacks={move:n(d.move,b),change:n(d.change,b),show:n(d.show,b),hide:n(d.hide,b),beforeShow:n(d.beforeShow,b)};return d}function k(g,k){function n(){Q.toggleClass("sp-flat",y);Q.toggleClass("sp-input-disabled",!G.showInput);Q.toggleClass("sp-alpha-enabled",G.showAlpha);Q.toggleClass("sp-buttons-disabled",!G.showButtons||y);Q.toggleClass("sp-palette-disabled",!G.showPalette);Q.toggleClass("sp-palette-only",G.showPaletteOnly);Q.toggleClass("sp-initial-disabled",!G.showInitial);
Q.addClass(G.className);C()}function q(b){if(N&&(b=tinycolor(b).toRgbString(),-1===c.inArray(b,ha)&&ha.push(b),R&&a.localStorage))try{a.localStorage[R]=ha.join(";")}catch(d){}}function x(){var a=[],b=ha,c={},d;if(G.showPalette){for(var e=0;e<qa.length;e++)for(var f=0;f<qa[e].length;f++)d=tinycolor(qa[e][f]).toRgbString(),c[d]=!0;for(e=0;e<b.length;e++)d=tinycolor(b[e]).toRgbString(),c.hasOwnProperty(d)||(a.push(b[e]),c[d]=!0)}return a.reverse().slice(0,G.maxSelectionSize)}function s(){var a=J(),b=
c.map(qa,function(b,c){return d(b,a,"sp-palette-row sp-palette-row-"+c)});ha&&b.push(d(x(),a,"sp-palette-row sp-palette-row-selection"));Ya.html(b.join(""))}function z(){if(G.showInitial){var a=ea,b=J();ta.html(d([a,b],b,"sp-palette-row-initial"))}}function P(){0!==W&&0!==ja&&0!==S||C();Q.addClass(bb)}function da(){Q.removeClass(bb)}function ba(){var a=tinycolor(fa.val());a.ok?aa(a):fa.addClass("sp-validation-error")}function T(){la?U():Z()}function Z(){if(la)C();else if(!1!==ca.beforeShow(J())){for(var b=
0;b<m.length;b++)m[b]&&m[b].hide();la=!0;c(Ia).bind("click.spectrum",U);c(a).bind("resize.spectrum",E);ya.addClass("sp-active");Q.show();G.showPalette&&s();C();V();ea=J();z();ca.show(ea)}}function U(b){b&&"click"==b.type&&2==b.button||(!la||y)||(la=!1,c(Ia).unbind("click.spectrum",U),c(a).unbind("resize.spectrum",E),ya.removeClass("sp-active"),Q.hide(),tinycolor.equals(J(),ea)||(fb&&"cancel"!==b?K(!0):aa(ea,!0)),ca.hide(J()))}function aa(a,b){if(!tinycolor.equals(a,J())){var c=tinycolor(a),d=c.toHsv();
ia=d.h;xa=d.s;ka=d.v;ma=d.a;V();b||(La=Wa||c.format)}}function J(){return tinycolor.fromRatio({h:ia,s:xa,v:ka,a:Math.round(100*ma)/100})}function Y(){V();ca.move(J())}function V(){fa.removeClass("sp-validation-error");w();var a=tinycolor({h:ia,s:"1.0",v:"1.0"});Ja.css("background-color",a.toHexString());a=La;1>ma&&("hex"===a||"name"===a)&&(a="rgb");var b=J(),c=b.toHexString(),d=b.toRgbString();r||1===b.alpha?ra.css("background-color",d):(ra.css("background-color","transparent"),ra.css("filter",b.toFilter()));
if(G.showAlpha){d=b.toRgb();d.a=0;var d=tinycolor(d).toRgbString(),e="linear-gradient(left, "+d+", "+c+")";v?ga.css("filter",tinycolor(d).toFilter({gradientType:1},c)):(ga.css("background","-webkit-"+e),ga.css("background","-moz-"+e),ga.css("background","-ms-"+e),ga.css("background",e))}G.showInput&&(1>ma&&("hex"===a||"name"===a)&&(a="rgb"),fa.val(b.toString(a)));G.showPalette&&s();z()}function w(){var a=xa*ja,b=W-ka*W,a=Math.max(-H,Math.min(ja-H,a-H)),b=Math.max(-H,Math.min(W-H,b-H));db.css({top:b,
left:a});Na.css({left:ma*ua-sa/2});eb.css({top:ia*S-pa})}function K(a){var b=J();Ua&&na.val(b.toString(La)).change();var c=!tinycolor.equals(b,ea);ea=b;q(b);a&&c&&ca.change(b)}function C(){ja=Ja.width();W=Ja.height();H=db.height();Ra.width();S=Ra.height();pa=eb.height();ua=Sa.width();sa=Na.width();y||Q.offset(h(Q,va));w()}function F(){U();Qa=!0;na.attr("disabled",!0);va.addClass("sp-disabled")}var G=e(k,g),y=G.flat,N=G.showSelectionPalette,R=G.localStorageKey,X=G.theme,ca=G.callbacks,E=t(C,10),la=
!1,ja=0,W=0,H=0,S=0,ua=0,sa=0,pa=0,ia=0,xa=0,ka=0,ma=1,l=G.palette.slice(0),qa=c.isArray(l[0])?l:[l],ha=G.selectionPalette.slice(0),bb="sp-dragging",Ia=g.ownerDocument,cb=Ia.body,na=c(g),Qa=!1,Q=c(A,Ia).addClass(X),Ja=Q.find(".sp-color"),db=Q.find(".sp-dragger"),Ra=Q.find(".sp-hue"),eb=Q.find(".sp-slider"),ga=Q.find(".sp-alpha-inner"),Sa=Q.find(".sp-alpha"),Na=Q.find(".sp-alpha-handle"),fa=Q.find(".sp-input"),Ya=Q.find(".sp-palette"),ta=Q.find(".sp-initial"),Ta=Q.find(".sp-cancel"),Ka=Q.find(".sp-choose"),
Ua=na.is("input"),Va=Ua&&!y,ya=Va?c(u).addClass(X):c([]),va=Va?ya:na,ra=ya.find(".sp-preview-inner"),wa=G.color||Ua&&na.val(),ea=!1,Wa=G.preferredFormat,La=Wa,fb=!G.showButtons||G.clickoutFiresChange;(function(){function b(a){a.data&&a.data.ignore?(aa(c(this).data("color")),Y()):(aa(c(this).data("color")),K(!0),Y(),U());return!1}v&&Q.find("*:not(input)").attr("unselectable","on");n();Va&&na.hide().after(ya);y?na.after(Q).hide():c(cb).append(Q.hide());if(R&&a.localStorage){try{var d=a.localStorage[R].split(",#");
1<d.length&&(delete a.localStorage[R],c.each(d,function(a,b){q(b)}))}catch(e){}try{ha=a.localStorage[R].split(";")}catch(g){}}va.bind("click.spectrum touchstart.spectrum",function(a){Qa||T();a.stopPropagation();c(a.target).is("input")||a.preventDefault()});(na.is(":disabled")||!0===G.disabled)&&F();Q.click(f);fa.change(ba);fa.bind("paste",function(){setTimeout(ba,1)});fa.keydown(function(a){13==a.keyCode&&ba()});Ta.text(G.cancelText);Ta.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();
U("cancel")});Ka.text(G.chooseText);Ka.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();fa.hasClass("sp-validation-error")||(K(!0),U())});p(Sa,function(a,b,c){ma=a/ua;c.shiftKey&&(ma=Math.round(10*ma)/10);Y()});p(Ra,function(a,b){ia=parseFloat(b/S);Y()},P,da);p(Ja,function(a,b){xa=parseFloat(a/ja);ka=parseFloat((W-b)/W);Y()},P,da);wa?(aa(wa),V(),La=Wa||tinycolor(wa).format,q(wa)):V();y&&Z();d=v?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ya.delegate(".sp-thumb-el",
d,b);ta.delegate(".sp-thumb-el:nth-child(1)",d,{ignore:!0},b)})();var Da={show:Z,hide:U,toggle:T,reflow:C,option:function(a,d){if(a===b)return c.extend({},G);if(d===b)return G[a];G[a]=d;n()},enable:function(){Qa=!1;na.attr("disabled",!1);va.removeClass("sp-disabled")},disable:F,set:function(a){aa(a);K()},get:J,destroy:function(){na.show();va.unbind("click.spectrum touchstart.spectrum");Q.remove();ya.remove();m[Da.id]=null},container:Q};Da.id=m.push(Da)-1;return Da}function h(a,b){var d=a.outerWidth(),
e=a.outerHeight(),f=b.outerHeight(),g=a[0].ownerDocument,h=g.documentElement,k=h.clientWidth+c(g).scrollLeft(),g=h.clientHeight+c(g).scrollTop(),h=b.offset();h.top+=f;h.left-=Math.min(h.left,h.left+d>k&&k>d?Math.abs(h.left+d-k):0);h.top-=Math.min(h.top,h.top+e>g&&g>e?Math.abs(e+f-0):0);return h}function g(){}function f(a){a.stopPropagation()}function n(a,b){var c=Array.prototype.slice,d=c.call(arguments,2);return function(){return a.apply(b,d.concat(c.call(arguments)))}}function p(b,d,e,f){function g(a){a.stopPropagation&&
a.stopPropagation();a.preventDefault&&a.preventDefault();a.returnValue=!1}function h(a){if(n){if(v&&9>document.documentMode&&!a.button)return k();var c=a.originalEvent.touches,e=c?c[0].pageY:a.pageY,c=Math.max(0,Math.min((c?c[0].pageX:a.pageX)-u.left,p)),e=Math.max(0,Math.min(e-u.top,r));A&&g(a);d.apply(b,[c,e,a])}}function k(){n&&(c(m).unbind(t),c(m.body).removeClass("sp-dragging"),f.apply(b,arguments));n=!1}d=d||function(){};e=e||function(){};f=f||function(){};var m=b.ownerDocument||document,n=
!1,u={},r=0,p=0,A="ontouchstart"in a,t={};t.selectstart=g;t.dragstart=g;t[A?"touchmove":"mousemove"]=h;t[A?"touchend":"mouseup"]=k;c(b).bind(A?"touchstart":"mousedown",function(a){(a.which?3==a.which:2==a.button)||n||!1===e.apply(b,arguments)||(n=!0,r=c(b).height(),p=c(b).width(),u=c(b).offset(),c(m).bind(t),c(m.body).addClass("sp-dragging"),A||h(a),g(a))})}function t(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null;a.apply(e,f)};c&&clearTimeout(d);if(c||!d)d=setTimeout(g,
b)}}var s={beforeShow:g,move:g,change:g,show:g,hide:g,color:!1,flat:!1,showInput:!0,showButtons:!1,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},m=[],v=!!/msie/i.exec(a.navigator.userAgent),r=function(){var a=document.createElement("div").style;a.cssText="background-color:rgba(0,0,0,.5)";
return!!~(""+a.backgroundColor).indexOf("rgba")||!!~(""+a.backgroundColor).indexOf("hsla")}(),u="<div class='sp-replacer'><div class='sp-preview'><div class='sp-preview-inner'></div></div></div>",A=function(){var a="";if(v)for(var b=1;6>=b;b++)a+="<div class='sp-"+b+"'></div>";return["<div class='sp-container'><div class='sp-palette-container'><div class='sp-palette sp-thumb sp-cf'></div></div><div class='sp-picker-container'><div class='sp-top sp-cf'><div class='sp-fill'></div><div class='sp-top-inner'><div class='sp-color'><div class='sp-sat'><div class='sp-val'><div class='sp-dragger'></div></div></div></div><div class='sp-hue'><div class='sp-slider'></div>",
a,"</div></div><div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div></div><div class='sp-input-container sp-cf'><input class='sp-input' type='text' spellcheck='false'  /></div><div class='sp-initial sp-thumb sp-cf'></div><div class='sp-button-container sp-cf'><a class='sp-cancel' href='#'></a><button class='sp-choose'></button></div></div></div>"].join("")}();c.fn.spectrum=function(a,b){if("string"==typeof a){var d=this,e=Array.prototype.slice.call(arguments,
1);this.each(function(){var b=m[c(this).data("spectrum.id")];if(b){var f=b[a];if(!f)throw Error("Spectrum: no such method: '"+a+"'");"get"==a?d=b.get():"container"==a?d=b.container:"option"==a?d=b.option.apply(b,e):"destroy"==a?(b.destroy(),c(this).removeData("spectrum.id")):f.apply(b,e)}});return d}return this.spectrum("destroy").each(function(){var b=k(this,a);c(this).data("spectrum.id",b.id)})};c.fn.spectrum.load=!0;c.fn.spectrum.loadOpts={};c.fn.spectrum.draggable=p;c.fn.spectrum.defaults=s;c.spectrum=
{};c.spectrum.localization={};c.spectrum.palettes={};c.fn.spectrum.processNativeColorInputs=function(){var a=c("<input type='color' value='!' />")[0];"color"===a.type&&"!"!=a.value||c("input[type=color]").spectrum({preferredFormat:"hex6"})};(function(a){function b(a,e){if("object"==typeof a&&a.hasOwnProperty("_tc_id"))return a;var h=c(a),m=h.r,n=h.g,r=h.b,p=w(h.a);return{ok:h.ok,format:h.format,_tc_id:u++,alpha:p,toHsv:function(){var a=f(m,n,r);return{h:a.h,s:a.s,v:a.v,a:p}},toHsvString:function(){var a=
f(m,n,r),b=v(360*a.h),c=v(100*a.s),a=v(100*a.v);return 1==p?"hsv("+b+", "+c+"%, "+a+"%)":"hsva("+b+", "+c+"%, "+a+"%, "+p+")"},toHsl:function(){var a=d(m,n,r);return{h:a.h,s:a.s,l:a.l,a:p}},toHslString:function(){var a=d(m,n,r),b=v(360*a.h),c=v(100*a.s),a=v(100*a.l);return 1==p?"hsl("+b+", "+c+"%, "+a+"%)":"hsla("+b+", "+c+"%, "+a+"%, "+p+")"},toHex:function(){return g(m,n,r)},toHexString:function(a){return"#"+g(m,n,r,a)},toRgb:function(){return{r:v(m),g:v(n),b:v(r),a:p}},toRgbString:function(){return 1==
p?"rgb("+v(m)+", "+v(n)+", "+v(r)+")":"rgba("+v(m)+", "+v(n)+", "+v(r)+", "+p+")"},toName:function(){return C[g(m,n,r)]||!1},toFilter:function(a,c){var d=g(m,n,r,!0),e=d,f=Math.round(255*w(p)).toString(16),h=f,u=a&&a.gradientType?"GradientType = 1, ":"";c&&(h=b(c),e=h.toHex(),h=Math.round(255*w(h.alpha)).toString(16));return"progid:DXImageTransform.Microsoft.gradient("+u+"startColorstr=#"+k(f)+d+",endColorstr=#"+k(h)+e+")"},toString:function(a){a=a||this.format;var b=!1;"rgb"===a&&(b=this.toRgbString());
"hex"===a&&(b=this.toHexString());"hex6"===a&&(b=this.toHexString(!0));"name"===a&&(b=this.toName());"hsl"===a&&(b=this.toHslString());"hsv"===a&&(b=this.toHsvString());return b||this.toHexString(!0)}}}function c(a){var b={r:0,g:0,b:0},d=1,f=!1,g=!1;if("string"==typeof a)a:{a=a.replace(m,"").replace(n,"").toLowerCase();var k=!1;if(K[a])a=K[a],k=!0;else if("transparent"==a){a={r:0,g:0,b:0,a:0};break a}var u;a=(u=s.rgb.exec(a))?{r:u[1],g:u[2],b:u[3]}:(u=s.rgba.exec(a))?{r:u[1],g:u[2],b:u[3],a:u[4]}:
(u=s.hsl.exec(a))?{h:u[1],s:u[2],l:u[3]}:(u=s.hsla.exec(a))?{h:u[1],s:u[2],l:u[3],a:u[4]}:(u=s.hsv.exec(a))?{h:u[1],s:u[2],v:u[3]}:(u=s.hex6.exec(a))?{r:parseInt(u[1],16),g:parseInt(u[2],16),b:parseInt(u[3],16),format:k?"name":"hex"}:(u=s.hex3.exec(a))?{r:parseInt(u[1]+""+u[1],16),g:parseInt(u[2]+""+u[2],16),b:parseInt(u[3]+""+u[3],16),format:k?"name":"hex"}:!1}if("object"==typeof a){if(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b"))b={r:255*h(a.r,255),g:255*h(a.g,255),b:255*
h(a.b,255)},f=!0,g="rgb";else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")){var g=a.h,k=a.s,b=a.v,g=6*h(g,360),k=h(k,100),b=h(b,100),f=r.floor(g),w=g-f,g=b*(1-k);u=b*(1-w*k);k=b*(1-(1-w)*k);f%=6;b={r:255*[b,u,g,g,k,b][f],g:255*[k,b,b,u,g,g][f],b:255*[g,g,k,b,b,u][f]};f=!0;g="hsv"}else a.hasOwnProperty("h")&&(a.hasOwnProperty("s")&&a.hasOwnProperty("l"))&&(b=e(a.h,a.s,a.l),f=!0,g="hsl");a.hasOwnProperty("a")&&(d=a.a)}b.r=p(255,A(b.r,0));b.g=p(255,A(b.g,0));b.b=p(255,A(b.b,
0));1>b.r&&(b.r=v(b.r));1>b.g&&(b.g=v(b.g));1>b.b&&(b.b=v(b.b));return{ok:f,format:a&&a.format||g,r:b.r,g:b.g,b:b.b,a:d}}function d(a,b,c){a=h(a,255);b=h(b,255);c=h(c,255);var e=A(a,b,c),f=p(a,b,c),g,k=(e+f)/2;if(e==f)g=f=0;else{var m=e-f,f=0.5<k?m/(2-e-f):m/(e+f);switch(e){case a:g=(b-c)/m+(b<c?6:0);break;case b:g=(c-a)/m+2;break;case c:g=(a-b)/m+4}g/=6}return{h:g,s:f,l:k}}function e(a,b,c){function d(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*c:0.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a}a=h(a,
360);b=h(b,100);c=h(c,100);if(0===b)c=b=a=c;else{var f=0.5>c?c*(1+b):c+b-c*b,g=2*c-f;c=d(g,f,a+1/3);b=d(g,f,a);a=d(g,f,a-1/3)}return{r:255*c,g:255*b,b:255*a}}function f(a,b,c){a=h(a,255);b=h(b,255);c=h(c,255);var d=A(a,b,c),e=p(a,b,c),g,k=d-e;if(d==e)g=0;else{switch(d){case a:g=(b-c)/k+(b<c?6:0);break;case b:g=(c-a)/k+2;break;case c:g=(a-b)/k+4}g/=6}return{h:g,s:0===d?0:k/d,v:d}}function g(a,b,c,d){a=[k(v(a).toString(16)),k(v(b).toString(16)),k(v(c).toString(16))];return d||a[0].charAt(0)!=a[0].charAt(1)||
a[1].charAt(0)!=a[1].charAt(1)||a[2].charAt(0)!=a[2].charAt(1)?a.join(""):a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)}function h(a,b){"string"==typeof a&&(-1!=a.indexOf(".")&&1===w(a))&&(a="100%");var c="string"===typeof a&&-1!=a.indexOf("%");a=p(b,A(0,w(a)));c&&(a*=b/100);return 1E-6>r.abs(a-b)?1:1<=a?a%b/w(b):a}function k(a){return 1==a.length?"0"+a:""+a}var m=/^[\s,#]+/,n=/\s+$/,u=0,r=Math,v=r.round,p=r.min,A=r.max,t=r.random,w=a.parseFloat;b.fromRatio=function(a){if("object"==typeof a)for(var c in a)1===
a[c]&&(a[c]="1.0");return b(a)};b.equals=function(a,c){return a&&c?b(a).toRgbString()==b(c).toRgbString():!1};b.random=function(){return b.fromRatio({r:t(),g:t(),b:t()})};b.desaturate=function(a,c){var d=b(a).toHsl();d.s-=(c||10)/100;d.s=p(1,A(0,d.s));return b(d)};b.saturate=function(a,c){var d=b(a).toHsl();d.s+=(c||10)/100;d.s=p(1,A(0,d.s));return b(d)};b.greyscale=function(a){return b.desaturate(a,100)};b.lighten=function(a,c){var d=b(a).toHsl();d.l+=(c||10)/100;d.l=p(1,A(0,d.l));return b(d)};b.darken=
function(a,c){var d=b(a).toHsl();d.l-=(c||10)/100;d.l=p(1,A(0,d.l));return b(d)};b.complement=function(a){a=b(a).toHsl();a.h=(a.h+0.5)%1;return b(a)};b.triad=function(a){var c=b(a).toHsl(),d=360*c.h;return[b(a),b({h:(d+120)%360,s:c.s,l:c.l}),b({h:(d+240)%360,s:c.s,l:c.l})]};b.tetrad=function(a){var c=b(a).toHsl(),d=360*c.h;return[b(a),b({h:(d+90)%360,s:c.s,l:c.l}),b({h:(d+180)%360,s:c.s,l:c.l}),b({h:(d+270)%360,s:c.s,l:c.l})]};b.splitcomplement=function(a){var c=b(a).toHsl(),d=360*c.h;return[b(a),
b({h:(d+72)%360,s:c.s,l:c.l}),b({h:(d+216)%360,s:c.s,l:c.l})]};b.analogous=function(a,c,d){c=c||6;d=d||30;var e=b(a).toHsl();d=360/d;a=[b(a)];e.h*=360;for(e.h=(e.h-(d*c>>1)+720)%360;--c;)e.h=(e.h+d)%360,a.push(b(e));return a};b.monochromatic=function(a,c){c=c||6;for(var d=b(a).toHsv(),e=d.h,f=d.s,d=d.v,g=[],h=1/c;c--;)g.push(b({h:e,s:f,v:d})),d=(d+h)%1;return g};b.readable=function(a,c){var d=b(a).toRgb(),e=b(c).toRgb();return 10404<(e.r-d.r)*(e.r-d.r)+(e.g-d.g)*(e.g-d.g)+(e.b-d.b)*(e.b-d.b)};var K=
b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",
darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",
gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",
lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",
orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",
springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=b.hexNames=function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}(K),s={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};a.tinycolor=b})(this);c(function(){c.fn.spectrum.load&&c.fn.spectrum.processNativeColorInputs()})})(window,jQuery);
(function(){function a(b,c,d){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;b._chain&&(b=b._wrapped);c._chain&&(c=c._wrapped);if(b.isEqual&&q.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&q.isFunction(c.isEqual))return c.isEqual(b);var e=f.call(b);if(e!=f.call(c))return!1;switch(e){case "[object String]":return b==""+c;case "[object Number]":return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==
c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return!1;for(var g=d.length;g--;)if(d[g]==b)return!0;d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=b.length,h=g==c.length)for(;g--&&(h=g in b==g in c&&a(b[g],c[g],d)););}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var k in b)if(q.has(b,k)&&(g++,!(h=q.has(c,k)&&a(b[k],c[k],d))))break;if(h){for(k in c)if(q.has(c,k)&&!g--)break;
h=!g}}d.pop();return h}var c=this,b=c._,d={},e=Array.prototype,k=Object.prototype,h=e.slice,g=e.unshift,f=k.toString,n=k.hasOwnProperty,p=e.forEach,t=e.map,s=e.reduce,m=e.reduceRight,v=e.filter,r=e.every,u=e.some,A=e.indexOf,I=e.lastIndexOf,k=Array.isArray,D=Object.keys,L=Function.prototype.bind,q=function(a){return new J(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=q),exports._=q):c._=q;q.VERSION="1.3.3";var x=q.each=q.forEach=function(a,
b,c){if(null!=a)if(p&&a.forEach===p)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,f=a.length;e<f&&!(e in a&&b.call(c,a[e],e,a)===d);e++);else for(e in a)if(q.has(a,e)&&b.call(c,a[e],e,a)===d)break};q.map=q.collect=function(a,b,c){var d=[];if(null==a)return d;if(t&&a.map===t)return a.map(b,c);x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});a.length===+a.length&&(d.length=a.length);return d};q.reduce=q.foldl=q.inject=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(s&&a.reduce===
s)return d&&(b=q.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};q.reduceRight=q.foldr=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(m&&a.reduceRight===m)return d&&(b=q.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=q.toArray(a).reverse();d&&!e&&(b=q.bind(b,d));return e?q.reduce(f,b,c,d):q.reduce(f,b)};q.find=q.detect=function(a,b,c){var d;M(a,function(a,
e,f){if(b.call(c,a,e,f))return d=a,!0});return d};q.filter=q.select=function(a,b,c){var d=[];if(null==a)return d;if(v&&a.filter===v)return a.filter(b,c);x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)});return d};q.reject=function(a,b,c){var d=[];if(null==a)return d;x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)});return d};q.every=q.all=function(a,b,c){var e=!0;if(null==a)return e;if(r&&a.every===r)return a.every(b,c);x(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return d});return!!e};
var M=q.some=q.any=function(a,b,c){b||(b=q.identity);var e=!1;if(null==a)return e;if(u&&a.some===u)return a.some(b,c);x(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return d});return!!e};q.include=q.contains=function(a,b){var c=!1;return null==a?c:A&&a.indexOf===A?-1!=a.indexOf(b):c=M(a,function(a){return a===b})};q.invoke=function(a,b){var c=h.call(arguments,2);return q.map(a,function(a){return(q.isFunction(b)?b||a:a[b]).apply(a,c)})};q.pluck=function(a,b){return q.map(a,function(a){return a[b]})};
q.max=function(a,b,c){if(!b&&q.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&q.isEmpty(a))return-Infinity;var d={computed:-Infinity};x(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e>=d.computed&&(d={value:a,computed:e})});return d.value};q.min=function(a,b,c){if(!b&&q.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&q.isEmpty(a))return Infinity;var d={computed:Infinity};x(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e<d.computed&&(d={value:a,computed:e})});return d.value};q.shuffle=
function(a){var b=[],c;x(a,function(a,d){c=Math.floor(Math.random()*(d+1));b[d]=b[c];b[c]=a});return b};q.sortBy=function(a,b,c){var d=q.isFunction(b)?b:function(a){return a[b]};return q.pluck(q.map(a,function(a,b,e){return{value:a,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return void 0===c?1:void 0===d?-1:c<d?-1:c>d?1:0}),"value")};q.groupBy=function(a,b){var c={},d=q.isFunction(b)?b:function(a){return a[b]};x(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)});
return c};q.sortedIndex=function(a,b,c){c||(c=q.identity);for(var d=0,e=a.length;d<e;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d};q.toArray=function(a){return a?q.isArray(a)||q.isArguments(a)?h.call(a):a.toArray&&q.isFunction(a.toArray)?a.toArray():q.values(a):[]};q.size=function(a){return q.isArray(a)?a.length:q.keys(a).length};q.first=q.head=q.take=function(a,b,c){return null==b||c?a[0]:h.call(a,0,b)};q.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))};q.last=function(a,b,
c){return null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))};q.rest=q.tail=function(a,b,c){return h.call(a,null==b||c?1:b)};q.compact=function(a){return q.filter(a,function(a){return!!a})};q.flatten=function(a,b){return q.reduce(a,function(a,c){if(q.isArray(c))return a.concat(b?c:q.flatten(c));a[a.length]=c;return a},[])};q.without=function(a){return q.difference(a,h.call(arguments,1))};q.uniq=q.unique=function(a,b,c){c=c?q.map(a,c):a;var d=[];3>a.length&&(b=!0);q.reduce(c,function(c,e,f){(b?
q.last(c)===e&&c.length:q.include(c,e))||(c.push(e),d.push(a[f]));return c},[]);return d};q.union=function(){return q.uniq(q.flatten(arguments,!0))};q.intersection=q.intersect=function(a){var b=h.call(arguments,1);return q.filter(q.uniq(a),function(a){return q.every(b,function(b){return 0<=q.indexOf(b,a)})})};q.difference=function(a){var b=q.flatten(h.call(arguments,1),!0);return q.filter(a,function(a){return!q.include(b,a)})};q.zip=function(){for(var a=h.call(arguments),b=q.max(q.pluck(a,"length")),
c=Array(b),d=0;d<b;d++)c[d]=q.pluck(a,""+d);return c};q.indexOf=function(a,b,c){if(null==a)return-1;var d;if(c)return c=q.sortedIndex(a,b),a[c]===b?c:-1;if(A&&a.indexOf===A)return a.indexOf(b);c=0;for(d=a.length;c<d;c++)if(c in a&&a[c]===b)return c;return-1};q.lastIndexOf=function(a,b){if(null==a)return-1;if(I&&a.lastIndexOf===I)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};q.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=
Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};var z=function(){};q.bind=function(a,b){var c,d;if(a.bind===L&&L)return L.apply(a,h.call(arguments,1));if(!q.isFunction(a))throw new TypeError;d=h.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,d.concat(h.call(arguments)));z.prototype=a.prototype;var e=new z,f=a.apply(e,d.concat(h.call(arguments)));return Object(f)===f?f:e}};q.bindAll=function(a){var b=h.call(arguments,1);0==b.length&&(b=q.functions(a));
x(b,function(b){a[b]=q.bind(a[b],a)});return a};q.memoize=function(a,b){var c={};b||(b=q.identity);return function(){var d=b.apply(this,arguments);return q.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};q.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};q.defer=function(a){return q.delay.apply(q,[a,1].concat(h.call(arguments,1)))};q.throttle=function(a,b){var c,d,e,f,g,h,k=q.debounce(function(){g=f=!1},b);return function(){c=this;d=arguments;e||
(e=setTimeout(function(){e=null;g&&a.apply(c,d);k()},b));f?g=!0:h=a.apply(c,d);k();f=!0;return h}};q.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments;c&&!d&&a.apply(e,f);clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b)}};q.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};q.wrap=function(a,b){return function(){var c=[a].concat(h.call(arguments,0));return b.apply(this,c)}};q.compose=function(){var a=arguments;
return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};q.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};q.keys=D||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)q.has(a,c)&&(b[b.length]=c);return b};q.values=function(a){return q.map(a,q.identity)};q.functions=q.methods=function(a){var b=[],c;for(c in a)q.isFunction(a[c])&&b.push(c);return b.sort()};q.extend=function(a){x(h.call(arguments,
1),function(b){for(var c in b)a[c]=b[c]});return a};q.pick=function(a){var b={};x(q.flatten(h.call(arguments,1)),function(c){c in a&&(b[c]=a[c])});return b};q.defaults=function(a){x(h.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};q.clone=function(a){return q.isObject(a)?q.isArray(a)?a.slice():q.extend({},a):a};q.tap=function(a,b){b(a);return a};q.isEqual=function(b,c){return a(b,c,[])};q.isEmpty=function(a){if(null==a)return!0;if(q.isArray(a)||q.isString(a))return 0===
a.length;for(var b in a)if(q.has(a,b))return!1;return!0};q.isElement=function(a){return!(!a||1!=a.nodeType)};q.isArray=k||function(a){return"[object Array]"==f.call(a)};q.isObject=function(a){return a===Object(a)};q.isArguments=function(a){return"[object Arguments]"==f.call(a)};q.isArguments(arguments)||(q.isArguments=function(a){return!(!a||!q.has(a,"callee"))});q.isFunction=function(a){return"[object Function]"==f.call(a)};q.isString=function(a){return"[object String]"==f.call(a)};q.isNumber=function(a){return"[object Number]"==
f.call(a)};q.isFinite=function(a){return q.isNumber(a)&&isFinite(a)};q.isNaN=function(a){return a!==a};q.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==f.call(a)};q.isDate=function(a){return"[object Date]"==f.call(a)};q.isRegExp=function(a){return"[object RegExp]"==f.call(a)};q.isNull=function(a){return null===a};q.isUndefined=function(a){return void 0===a};q.has=function(a,b){return n.call(a,b)};q.noConflict=function(){c._=b;return this};q.identity=function(a){return a};q.times=
function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};q.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};q.result=function(a,b){if(null==a)return null;var c=a[b];return q.isFunction(c)?c.call(a):c};q.mixin=function(a){x(q.functions(a),function(b){V(b,q[b]=a[b])})};var P=0;q.uniqueId=function(a){var b=P++;return a?a+b:b};q.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};var da=/.^/,ba={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},T;for(T in ba)ba[ba[T]]=T;var Z=/\\|'|\r|\n|\t|\u2028|\u2029/g,U=/\\(\\|'|r|n|t|u2028|u2029)/g,aa=function(a){return a.replace(U,function(a,b){return ba[b]})};q.template=function(a,b,c){c=q.defaults(c||{},q.templateSettings);a="__p+='"+a.replace(Z,function(a){return"\\"+ba[a]}).replace(c.escape||da,function(a,b){return"'+\n_.escape("+aa(b)+")+\n'"}).replace(c.interpolate||da,function(a,
b){return"'+\n("+aa(b)+")+\n'"}).replace(c.evaluate||da,function(a,b){return"';\n"+aa(b)+"\n;__p+='"})+"';\n";c.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var d=new Function(c.variable||"obj","_",a);if(b)return d(b,q);b=function(a){return d.call(this,a,q)};b.source="function("+(c.variable||"obj")+"){\n"+a+"}";return b};q.chain=function(a){return q(a).chain()};var J=function(a){this._wrapped=a};q.prototype=
J.prototype;var Y=function(a,b){return b?q(a).chain():a},V=function(a,b){J.prototype[a]=function(){var a=h.call(arguments);g.call(a,this._wrapped);return Y(b.apply(q,a),this._chain)}};q.mixin(q);x("pop push reverse shift sort splice unshift".split(" "),function(a){var b=e[a];J.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;"shift"!=a&&"splice"!=a||0!==d||delete c[0];return Y(c,this._chain)}});x(["concat","join","slice"],function(a){var b=e[a];J.prototype[a]=function(){return Y(b.apply(this._wrapped,
arguments),this._chain)}});J.prototype.chain=function(){this._chain=!0;return this};J.prototype.value=function(){return this._wrapped}}).call(this);
(function(){function a(a,b){return"!"!==a[0][0]?'<a href="'+k(b.href)+'"'+(b.title?' title="'+k(b.title)+'"':"")+">"+m.lexer(a[1])+"</a>":'<img src="'+k(b.href)+'" alt="'+k(a[1])+'"'+(b.title?' title="'+k(b.title)+'"':"")+">"}function c(){return r=v.pop()}function b(){switch(r.type){case "space":return"";case "hr":return"<hr>\n";case "heading":return"<h"+r.depth+">"+m.lexer(r.text)+"</h"+r.depth+">\n";case "code":return u.highlight&&(r.code=u.highlight(r.text,r.lang),null!=r.code&&r.code!==r.text&&
(r.escaped=!0,r.text=r.code)),r.escaped||(r.text=k(r.text,!0)),"<pre><code"+(r.lang?' class="lang-'+r.lang+'"':"")+">"+r.text+"</code></pre>\n";case "blockquote_start":for(var a="";"blockquote_end"!==c().type;)a+=b();return"<blockquote>\n"+a+"</blockquote>\n";case "list_start":for(var e=r.ordered?"ol":"ul",a="";"list_end"!==c().type;)a+=b();return"<"+e+">\n"+a+"</"+e+">\n";case "list_item_start":for(a="";"list_item_end"!==c().type;)a+="text"===r.type?d():b();return"<li>"+a+"</li>\n";case "loose_item_start":for(a=
"";"list_item_end"!==c().type;)a+=b();return"<li>"+a+"</li>\n";case "html":return u.sanitize?m.lexer(r.text):r.pre||u.pedantic?r.text:m.lexer(r.text);case "paragraph":return"<p>"+m.lexer(r.text)+"</p>\n";case "text":return"<p>"+d()+"</p>\n"}}function d(){for(var a=r.text,b;(b=v[v.length-1])&&"text"===b.type;)a+="\n"+c().text;return m.lexer(a)}function e(a){v=a.reverse();for(a="";c();)a+=b();r=v=null;return a}function k(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function h(a){for(var b="",c=a.length,d=0,e;d<c;d++)e=a.charCodeAt(d),0.5<Math.random()&&(e="x"+e.toString(16)),b+="&#"+e+";";return b}function g(){return"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b"}function f(a,b){a=a.source;b=b||"";return function q(c,d){if(!c)return RegExp(a,b);a=a.replace(c,d.source||d);return q}}function n(){}function p(a,
b){t(b);return e(s.lexer(a))}function t(a){a||(a=A);u!==a&&(u=a,u.gfm?(s.fences=s.gfm.fences,s.paragraph=s.gfm.paragraph,m.text=m.gfm.text,m.url=m.gfm.url):(s.fences=s.normal.fences,s.paragraph=s.normal.paragraph,m.text=m.normal.text,m.url=m.normal.url),u.pedantic?(m.em=m.pedantic.em,m.strong=m.pedantic.strong):(m.em=m.normal.em,m.strong=m.normal.strong))}var s={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:n,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,
blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [^\0]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^([^\n]+\n?(?!body))+\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/};s.item=f(s.item,"gm")(/bull/g,s.bullet)();s.list=f(s.list)(/bull/g,s.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)();s.html=f(s.html)("comment",
/\x3c!--[^\0]*?--\x3e/)("closed",/<(tag)[^\0]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,g())();s.paragraph=function(){var a=s.paragraph.source,b=[];(function q(a){a=s[a]?s[a].source:a;b.push(a.replace(/(^|[^\[])\^/g,"$1"));return q})("hr")("heading")("lheading")("blockquote")("<"+g())("def");return RegExp(a.replace("body",b.join("|")))}();s.normal={fences:s.fences,paragraph:s.paragraph};s.gfm={fences:/^ *(```|~~~) *(\w+)? *\n([^\0]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/};s.gfm.paragraph=
f(s.paragraph)("(?!","(?!"+s.gfm.fences.source.replace(/(^|[^\[])\^/g,"$2")+"|")();s.lexer=function(a){var b=[];b.links={};a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ");return s.token(a,b,!0)};s.token=function(a,b,c){a=a.replace(/^ +$/gm,"");for(var d,e,f,g,h,k;a;){if(f=s.newline.exec(a))a=a.substring(f[0].length),1<f[0].length&&b.push({type:"space"});if(f=s.code.exec(a))a=a.substring(f[0].length),f=f[0].replace(/^ {4}/gm,""),b.push({type:"code",text:u.pedantic?f:f.replace(/\n+$/,"")});else if(f=
s.fences.exec(a))a=a.substring(f[0].length),b.push({type:"code",lang:f[2],text:f[3]});else if(f=s.heading.exec(a))a=a.substring(f[0].length),b.push({type:"heading",depth:f[1].length,text:f[2]});else if(f=s.lheading.exec(a))a=a.substring(f[0].length),b.push({type:"heading",depth:"="===f[2]?1:2,text:f[1]});else if(f=s.hr.exec(a))a=a.substring(f[0].length),b.push({type:"hr"});else if(f=s.blockquote.exec(a))a=a.substring(f[0].length),b.push({type:"blockquote_start"}),f=f[0].replace(/^ *> ?/gm,""),s.token(f,
b,c),b.push({type:"blockquote_end"});else if(f=s.list.exec(a)){a=a.substring(f[0].length);b.push({type:"list_start",ordered:isFinite(f[2])});f=f[0].match(s.item);d=!1;k=f.length;for(h=0;h<k;h++)g=f[h],e=g.length,g=g.replace(/^ *([*+-]|\d+\.) +/,""),~g.indexOf("\n ")&&(e-=g.length,g=u.pedantic?g.replace(/^ {1,4}/gm,""):g.replace(RegExp("^ {1,"+e+"}","gm"),"")),e=d||/\n\n(?!\s*$)/.test(g),h!==k-1&&(d="\n"===g[g.length-1],e||(e=d)),b.push({type:e?"loose_item_start":"list_item_start"}),s.token(g,b),b.push({type:"list_item_end"});
b.push({type:"list_end"})}else if(f=s.html.exec(a))a=a.substring(f[0].length),b.push({type:"html",pre:"pre"===f[1],text:f[0]});else if(c&&(f=s.def.exec(a)))a=a.substring(f[0].length),b.links[f[1].toLowerCase()]={href:f[2],title:f[3]};else if(c&&(f=s.paragraph.exec(a)))a=a.substring(f[0].length),b.push({type:"paragraph",text:f[0]});else if(f=s.text.exec(a))a=a.substring(f[0].length),b.push({type:"text",text:f[0]})}return b};var m={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,
url:n,tag:/^\x3c!--[^\0]*?--\x3e|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,em:/^\b_((?:__|[^\0])+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,code:/^(`+)([^\0]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[^\0]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_linkInside:/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,_linkHref:/\s*<?([^\s]*?)>?(?:\s+['"]([^\0]*?)['"])?\s*/};
m.link=f(m.link)("inside",m._linkInside)("href",m._linkHref)();m.reflink=f(m.reflink)("inside",m._linkInside)();m.normal={url:m.url,strong:m.strong,em:m.em,text:m.text};m.pedantic={strong:/^__(?=\S)([^\0]*?\S)__(?!_)|^\*\*(?=\S)([^\0]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([^\0]*?\S)_(?!_)|^\*(?=\S)([^\0]*?\S)\*(?!\*)/};m.gfm={url:/^(https?:\/\/[^\s]+[^.,:;"')\]\s])/,text:/^[^\0]+?(?=[\\<!\[_*`]|https?:\/\/| {2,}\n|$)/};m.lexer=function(b){for(var c="",d=v.links,e,f;b;)if(f=m.escape.exec(b))b=b.substring(f[0].length),
c+=f[1];else if(f=m.autolink.exec(b))b=b.substring(f[0].length),"@"===f[2]?(e=":"===f[1][6]?h(f[1].substring(7)):h(f[1]),f=h("mailto:")+e):f=e=k(f[1]),c+='<a href="'+f+'">'+e+"</a>";else if(f=m.url.exec(b))b=b.substring(f[0].length),f=e=k(f[1]),c+='<a href="'+f+'">'+e+"</a>";else if(f=m.tag.exec(b))b=b.substring(f[0].length),c+=u.sanitize?k(f[0]):f[0];else if(f=m.link.exec(b))b=b.substring(f[0].length),c+=a(f,{href:f[2],title:f[3]});else if((f=m.reflink.exec(b))||(f=m.nolink.exec(b)))b=b.substring(f[0].length),
e=(f[2]||f[1]).replace(/\s+/g," "),(e=d[e.toLowerCase()])&&e.href?c+=a(f,e):(c+=f[0][0],b=f[0].substring(1)+b);else if(f=m.strong.exec(b))b=b.substring(f[0].length),c+="<strong>"+m.lexer(f[2]||f[1])+"</strong>";else if(f=m.em.exec(b))b=b.substring(f[0].length),c+="<em>"+m.lexer(f[2]||f[1])+"</em>";else if(f=m.code.exec(b))b=b.substring(f[0].length),c+="<code>"+k(f[2],!0)+"</code>";else if(f=m.br.exec(b))b=b.substring(f[0].length),c+="<br>";else if(f=m.text.exec(b))b=b.substring(f[0].length),c+=k(f[0]);
return c};var v,r;n.exec=n;var u,A;p.options=p.setOptions=function(a){A=a;t(a);return p};p.setOptions({gfm:!0,pedantic:!1,sanitize:!1,highlight:null});p.parser=function(a,b){t(b);return e(a)};p.lexer=function(a,b){t(b);return s.lexer(a)};p.parse=p;"undefined"!==typeof module?module.exports=p:this.marked=p}).call(function(){return this||("undefined"!==typeof window?window:global)}());
function NaturalSort(a,c){var b=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,k=/^0x[0-9a-f]+$/i,h=/^0/,g=(NaturalSort.insensitive&&(""+a).toLowerCase()||""+a).replace(d,"")||"",f=(NaturalSort.insensitive&&(""+c).toLowerCase()||""+c).replace(d,"")||"",d=g.replace(b,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),b=f.replace(b,"\x00$1\x00").replace(/\0$/,
"").replace(/^\0/,"").split("\x00"),g=parseInt(g.match(k))||1!=d.length&&g.match(e)&&Date.parse(g);if(e=parseInt(f.match(k))||g&&f.match(e)&&Date.parse(f)||null){if(g<e)return-1;if(g>e)return 1}g=0;for(f=Math.max(d.length,b.length);g<f;g++){e=!(d[g]||"").match(h)&&parseFloat(d[g])||d[g]||0;k=!(b[g]||"").match(h)&&parseFloat(b[g])||b[g]||0;if(isNaN(e)!==isNaN(k))return isNaN(e)?1:-1;typeof e!==typeof k&&(e+="",k+="");if(e<k)return-1;if(e>k)return 1}return 0}
(function(){var a={},c=window,b=c.document,d;a.disabled=!1;a.set=function(a,b){};a.get=function(a){};a.remove=function(a){};a.clear=function(){};a.transact=function(b,c,d){var e=a.get(b);null==d&&(d=c,c=null);"undefined"==typeof e&&(e=c||{});d(e);a.set(b,e)};a.getAll=function(){};a.serialize=function(a){return JSON.stringify(a)};a.deserialize=function(a){return"string"!=typeof a?void 0:JSON.parse(a)};var e;try{e="localStorage"in c&&c.localStorage}catch(k){e=!1}if(e)d=c.localStorage,a.set=function(b,
c){if(void 0===c)return a.remove(b);d.setItem(b,a.serialize(c))},a.get=function(b){return a.deserialize(d.getItem(b))},a.remove=function(a){d.removeItem(a)},a.clear=function(){d.clear()},a.getAll=function(){for(var b={},c=0;c<d.length;++c){var e=d.key(c);b[e]=a.get(e)}return b};else{var h;try{h="globalStorage"in c&&c.globalStorage&&c.globalStorage[c.location.hostname]}catch(g){h=!1}if(h)d=c.globalStorage[c.location.hostname],a.set=function(b,c){if(void 0===c)return a.remove(b);d[b]=a.serialize(c)},
a.get=function(b){return a.deserialize(d[b]&&d[b].value)},a.remove=function(a){delete d[a]},a.clear=function(){for(var a in d)delete d[a]},a.getAll=function(){for(var b={},c=0;c<d.length;++c){var e=d.key(c);b[e]=a.get(e)}return b};else if(b.documentElement.addBehavior){var f,n;try{n=new ActiveXObject("htmlfile"),n.open(),n.write('<script>document.w=window\x3c/script><iframe src="/favicon.ico"></frame>'),n.close(),f=n.w.frames[0].document,d=f.createElement("div")}catch(p){d=b.createElement("div"),
f=b.body}var c=function(b){return function(){var c=Array.prototype.slice.call(arguments,0);c.unshift(d);f.appendChild(d);d.addBehavior("#default#userData");d.load("localStorage");c=b.apply(a,c);f.removeChild(d);return c}},t=/[!"#$%&'()*+,/\\:;<=>?@[\]^`{|}~]/g;a.set=c(function(b,c,d){c=c.replace(t,"___");if(void 0===d)return a.remove(c);b.setAttribute(c,a.serialize(d));b.save("localStorage")});a.get=c(function(b,c){c=c.replace(t,"___");return a.deserialize(b.getAttribute(c))});a.remove=c(function(a,
b){b=b.replace(t,"___");a.removeAttribute(b);a.save("localStorage")});a.clear=c(function(a){var b=a.XMLDocument.documentElement.attributes;a.load("localStorage");for(var c=0,d;d=b[c];c++)a.removeAttribute(d.name);a.save("localStorage")});a.getAll=c(function(b){var c=b.XMLDocument.documentElement.attributes;b.load("localStorage");b={};for(var d=0,e;e=c[d];++d)b[e]=a.get(e);return b})}}try{a.set("__storejs__","__storejs__"),"__storejs__"!=a.get("__storejs__")&&(a.disabled=!0),a.remove("__storejs__")}catch(s){a.disabled=
!0}a.enabled=!a.disabled;"undefined"!=typeof module&&"function"!=typeof module?module.exports=a:"function"===typeof define&&define.amd?define(a):this.store=a})();if("undefined"===typeof Events)var Events={};Events.slide={};Events.slide.timeout=!1;Events.slide.target=!1;Events.slide.started=!1;Events.slide.mouseDelay=70;Events.slide.mousedown=null;Events.slide.mouseThreshold=4;Events.slide.touchstart=null;Events.slide.touchThreshold=20;
Events.slide.onMouseMove=function(a){var c=Events.slide.mousedown;if(!c)return!0;var b=Events.slide.target;if(Events.slide.started)return $(b).trigger("slide",a),!0;if(1!=a.which||(new Date).getTime()-c.timeStamp<Events.slide.mouseDelay)return!0;var d=Math.abs(a.screenX-c.screenX),c=Math.abs(a.screenY-c.screenY);if(d+c<Events.slide.mouseThreshold)return!0;$(b).trigger("slidestart",a);Events.slide.started=!0};Events.slide.onMouseDown=function(a){Events.slide.mousedown=a;Events.slide.target=a.target};
Events.slide.onMouseUp=function(a){Events.slide.started&&(Events.slide.started=!1,$(Events.slide.target).trigger("slideend",a));Events.slide.mousedown=!1;return!0};Events.slide.onTouchStart=function(a){Events.slide.touchstart=a;Events.slide.target=a.target};Events.slide.onTouchEnd=function(a){Events.slide.started&&(Events.slide.started=!1,$(Events.slide.touchstart.target).trigger("slideend",a));return!0};
Events.slide.onTouchMove=function(a){var c=Events.slide.touchstart,b=Events.slide.target;if((new Date).getTime()-c.timeStamp<Events.slide.delay)return!0;var d=Math.abs(a.screenX-c.screenX),c=Math.abs(a.screenY-c.screenY);if(d+c<Events.slide.threshold)return!0;if(Events.slide.started)return $(b).trigger("slide",a),!0;$(b).trigger("slidestart",a);Events.slide.started=!0};
navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?(document.addEventListener("touchstart",Events.slide.onTouchStart,!0),document.addEventListener("touchmove",Events.slide.onTouchMove,!0),document.addEventListener("touchend",Events.slide.onTouchEnd,!0)):(document.addEventListener("mousedown",Events.slide.onMouseDown,!0),document.addEventListener("mousemove",Events.slide.onMouseMove,!0),document.addEventListener("mouseup",Events.slide.onMouseUp,!0));"undefined"===typeof Events&&(Events={});
Events.tap={};Events.tap.mouseTime=750;Events.tap.mousedown=null;Events.tap.maxMouseDistance=8;Events.tap.onMouseDown=function(a){Events.tap.mousedown=a};Events.tap.onMouseUp=function(a){var c=Events.tap.mousedown;if(!c||a.timeStamp-c.timeStamp>Events.tap.mouseTime||a.target!==c.target)return!0;var b=Math.abs(a.screenX-c.screenX),d=Math.abs(a.screenY-c.screenY);if(b+d>Events.tap.maxMouseDistance)return!0;if(Events.tap.onPass)Events.tap.onPass(a);$(a.target).trigger("tap",c,a)};
Events.tap.touchstart=null;Events.tap.maxTouchDistance=20;Events.tap.onTouchStart=function(a){Events.tap.touchstart=a};Events.tap.onTouchEnd=function(a){var c=Events.tap.touchstart;if(a.timeStamp-c.timeStamp>Events.tap.maxTime||a.target!==c.target)return!0;var b=Math.abs(a.screenX-c.screenX),d=Math.abs(a.screenY-c.screenY);if(b+d>Events.tap.maxTouchDistance)return!0;$(a.target).trigger("tap",c,a)};
navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?(document.addEventListener("touchstart",Events.tap.onTouchStart,!0),document.addEventListener("touchend",Events.tap.onTouchEnd,!0)):(document.addEventListener("mousedown",Events.tap.onMouseDown,!0),document.addEventListener("mouseup",Events.tap.onMouseUp,!0));$(document).on("keydown","input",function(a){if(13!==a.keyCode)return!0;$(this).trigger("enterkey")});"undefined"===typeof Events&&(Events={});Events.hold={};Events.hold.mousetime=750;
Events.hold.touchtime=1E3;Events.hold.mousedown=null;Events.hold.target=!1;Events.hold.maxMouseDistance=8;Events.hold.timeout=!1;Events.hold.onMouseDown=function(a){if(1!==a.which)return!0;Events.hold.mousedown=a;Events.hold.target=a.target;Events.hold.timeout=setTimeout("Events.hold.fireMouse()",Events.hold.mousetime)};Events.hold.onMouseMove=function(a){Events.hold.mousemove=a};Events.hold.onMouseUp=function(a){Events.hold.mousedown=!1;clearTimeout(Events.hold.timeout);return!0};
Events.hold.fireMouse=function(){var a=Events.hold.mousedown,c=Events.hold.mousemove;if(!Events.hold.mousedown)return!0;var b=Math.abs(c.screenX-a.screenX),c=Math.abs(c.screenY-a.screenY);if(b+c>Events.hold.maxMouseDistance)return!0;$(Events.hold.target).trigger("hold",a)};Events.hold.touchstart=null;Events.hold.maxTouchDistance=8;
Events.hold.onTouchStart=function(a){Events.hold.touchstart=a;Events.hold.touchmove=a;Events.hold.startX=a.touches[0].pageX;Events.hold.startY=a.touches[0].pageY;Events.hold.target=a.target;Events.hold.timeout=setTimeout("Events.hold.fireTouch()",Events.hold.touchtime)};Events.hold.onTouchMove=function(a){console.log(Events.hold.touchstart.touches[0].pageX);Events.hold.touchmove=a};Events.hold.onTouchEnd=function(a){Events.hold.touchstart=!1;clearTimeout(Events.hold.timeout);return!0};
Events.hold.fireTouch=function(){var a=Events.hold.touchmove,c=Math.abs(a.touches[0].pageX-Events.hold.startX),a=Math.abs(a.touches[0].pageY-Events.hold.startY);if(c+a>Events.hold.maxTouchDistance)return!0;$(Events.hold.target).trigger("hold",Events.hold.touchstart)};
navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?(document.addEventListener("touchstart",Events.hold.onTouchStart,!0),document.addEventListener("touchend",Events.hold.onTouchEnd,!0),document.addEventListener("touchmove",Events.hold.onTouchMove,!0)):(document.addEventListener("mousedown",Events.hold.onMouseDown,!0),document.addEventListener("mousemove",Events.hold.onMouseMove,!0),document.addEventListener("mouseup",Events.hold.onMouseUp,!0));"undefined"===typeof Events&&(Events={});
Events.shortcut={};Events.shortcut.context="";Events.shortcut.isEditingText=function(){return $("input:focus,div:focus,textarea:focus,a:focus,[contenteditable=true]:focus").length||$("div[contenteditable]").get(0)==document.activeElement?!0:!1};Events.shortcut.on=!0;Events.shortcut.shortcuts={};
Events.shortcut.fire=function(a){if(!Events.shortcut.on||Events.shortcut.isEditingText())return!0;var c=Events.shortcut.string_from_keycode(a.keyCode);a.shiftKey&&(c="shift+"+c);a.metaKey&&(c="meta+"+c);a.ctrlKey&&(c="ctrl+"+c);a.altKey&&(c="alt+"+c);if(Events.shortcut.shortcuts[c]){var b=Events.shortcut.shortcuts[c];"function"===typeof b?b():$(Events.shortcut.context+"#"+b).trigger("tap");if(Events.shortcut.onfire)Events.shortcut.onfire(c);a.preventDefault()}};
Events.shortcut.string_from_keycode=function(a){var c=String.fromCharCode(a).toLowerCase(),b={8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",
121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",190:".",191:"/",224:"meta"};a in b&&(c=b[a]);return c};$(document).on("ready",function(){$(document).on("keydown",Events.shortcut.fire)});
var parseCookie=function(a){var c={};a.split(/[;,] */).forEach(function(a){var d=a.indexOf("="),e=a.substr(0,d).trim();a=a.substr(++d,a.length).trim();'"'==a[0]&&(a=a.slice(1,-1));if(void 0==c[e])try{c[e]=decodeURIComponent(a)}catch(k){c[e]=a}});return c},MoveCursorToEnd=function(a){if(!a)return null;var c;document.createRange&&(c=document.createRange(),c.selectNodeContents(a),c.collapse(!1),a=window.getSelection(),a.removeAllRanges(),a.addRange(c))},io="undefined"===typeof module?{}:module.exports;
(function(){(function(a,b){a.version="0.9.11";a.protocol=1;a.transports=[];a.j=[];a.sockets={};a.connect=function(d,e){var k=a.util.parseUri(d),h,g;b&&b.location&&(k.protocol=k.protocol||b.location.protocol.slice(0,-1),k.host=k.host||(b.document?b.document.domain:b.location.hostname),k.port=k.port||b.location.port);h=a.util.uniqueUri(k);var f={host:k.host,secure:"https"==k.protocol,port:k.port||("https"==k.protocol?443:80),query:k.query||""};a.util.merge(f,e);if(f["force new connection"]||!a.sockets[h])g=
new a.Socket(f);!f["force new connection"]&&g&&(a.sockets[h]=g);g=g||a.sockets[h];return g.of(1<k.path.length?k.path:"")}})("object"===typeof module?module.exports:this.io={},this);(function(a,b){var d=a.util={},e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,k="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");
d.parseUri=function(a){a=e.exec(a||"");for(var b={},c=14;c--;)b[k[c]]=a[c]||"";return b};d.uniqueUri=function(a){var c=a.protocol,d=a.host;a=a.port;"document"in b?(d=d||document.domain,a=a||("https"==c&&"https:"!==document.location.protocol?443:document.location.port)):(d=d||"localhost",a||"https"!=c||(a=443));return(c||"http")+"://"+d+":"+(a||80)};d.query=function(a,b){var c=d.chunkQuery(a||""),e=[];d.merge(c,d.chunkQuery(b||""));for(var h in c)c.hasOwnProperty(h)&&e.push(h+"="+c[h]);return e.length?
"?"+e.join("&"):""};d.chunkQuery=function(a){var b={};a=a.split("&");for(var c=0,d=a.length,e;c<d;++c)e=a[c].split("="),e[0]&&(b[e[0]]=e[1]);return b};var h=!1;d.load=function(a){if("document"in b&&"complete"===document.readyState||h)return a();d.on(b,"load",a,!1)};d.on=function(a,b,c,d){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,d)};d.request=function(a){if(a&&"undefined"!=typeof XDomainRequest&&!d.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&
(!a||d.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new (window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(b){}return null};"undefined"!=typeof window&&d.load(function(){h=!0});d.defer=function(a){if(!d.ua.webkit||"undefined"!=typeof importScripts)return a();d.load(function(){setTimeout(a,100)})};d.merge=function(a,b,c,e){e=e||[];c="undefined"==typeof c?2:c;for(var h in b)b.hasOwnProperty(h)&&0>d.indexOf(e,h)&&("object"===typeof a[h]&&c?d.merge(a[h],b[h],c-1,e):(a[h]=
b[h],e.push(b[h])));return a};d.mixin=function(a,b){d.merge(a.prototype,b.prototype)};d.inherit=function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c};d.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};d.intersect=function(a,b){for(var c=[],e=a.length>b.length?a:b,h=a.length>b.length?b:a,k=0,m=h.length;k<m;k++)~d.indexOf(e,h[k])&&c.push(h[k]);return c};d.indexOf=function(a,b,c){var d=a.length;for(c=0>c?0>c+d?0:c+d:c||0;c<d&&a[c]!==b;c++);
return d<=c?-1:c};d.toArray=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b};d.ua={};d.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=new XMLHttpRequest}catch(b){return!1}return void 0!=a.withCredentials}();d.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);d.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);(function(a,b){function d(){}a.EventEmitter=
d;d.prototype.on=function(a,c){this.$events||(this.$events={});this.$events[a]?b.util.isArray(this.$events[a])?this.$events[a].push(c):this.$events[a]=[this.$events[a],c]:this.$events[a]=c;return this};d.prototype.addListener=d.prototype.on;d.prototype.once=function(a,b){function c(){d.removeListener(a,c);b.apply(this,arguments)}var d=this;c.listener=b;this.on(a,c);return this};d.prototype.removeListener=function(a,c){if(this.$events&&this.$events[a]){var d=this.$events[a];if(b.util.isArray(d)){for(var g=
-1,f=0,n=d.length;f<n;f++)if(d[f]===c||d[f].listener&&d[f].listener===c){g=f;break}if(0>g)return this;d.splice(g,1);d.length||delete this.$events[a]}else(d===c||d.listener&&d.listener===c)&&delete this.$events[a]}return this};d.prototype.removeAllListeners=function(a){if(void 0===a)return this.$events={},this;this.$events&&this.$events[a]&&(this.$events[a]=null);return this};d.prototype.listeners=function(a){this.$events||(this.$events={});this.$events[a]||(this.$events[a]=[]);b.util.isArray(this.$events[a])||
(this.$events[a]=[this.$events[a]]);return this.$events[a]};d.prototype.emit=function(a){if(!this.$events)return!1;var c=this.$events[a];if(!c)return!1;var d=Array.prototype.slice.call(arguments,1);if("function"==typeof c)c.apply(this,d);else if(b.util.isArray(c))for(var c=c.slice(),g=0,f=c.length;g<f;g++)c[g].apply(this,d);else return!1;return!0}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(a,b){function d(a){return 10>a?"0"+a:a}function e(a){f.lastIndex=
0;return f.test(a)?'"'+a.replace(f,function(a){var b=t[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function k(a,b){var c,f,g,h,t=n,L,q=b[a];q instanceof Date&&(q=isFinite(a.valueOf())?a.getUTCFullYear()+"-"+d(a.getUTCMonth()+1)+"-"+d(a.getUTCDate())+"T"+d(a.getUTCHours())+":"+d(a.getUTCMinutes())+":"+d(a.getUTCSeconds())+"Z":null);"function"===typeof s&&(q=s.call(b,a,q));switch(typeof q){case "string":return e(q);case "number":return isFinite(q)?
String(q):"null";case "boolean":case "null":return String(q);case "object":if(!q)return"null";n+=p;L=[];if("[object Array]"===Object.prototype.toString.apply(q)){h=q.length;for(c=0;c<h;c+=1)L[c]=k(c,q)||"null";g=0===L.length?"[]":n?"[\n"+n+L.join(",\n"+n)+"\n"+t+"]":"["+L.join(",")+"]";n=t;return g}if(s&&"object"===typeof s)for(h=s.length,c=0;c<h;c+=1)"string"===typeof s[c]&&(f=s[c],(g=k(f,q))&&L.push(e(f)+(n?": ":":")+g));else for(f in q)Object.prototype.hasOwnProperty.call(q,f)&&(g=k(f,q))&&L.push(e(f)+
(n?": ":":")+g);g=0===L.length?"{}":n?"{\n"+n+L.join(",\n"+n)+"\n"+t+"}":"{"+L.join(",")+"}";n=t;return g}}if(b&&b.parse)return a.JSON={parse:b.parse,stringify:b.stringify};var h=a.JSON={},g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,p,t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},
s;h.stringify=function(a,b,c){var d;p=n="";if("number"===typeof c)for(d=0;d<c;d+=1)p+=" ";else"string"===typeof c&&(p=c);if((s=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return k("",{"":a})};h.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}var d;a=String(a);g.lastIndex=0;g.test(a)&&(a=a.replace(g,
function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");}})("undefined"!=typeof io?io:module.exports,"undefined"!==typeof JSON?JSON:void 0);(function(a,b){var d=a.parser={},e=d.packets="disconnect connect heartbeat message json event ack error noop".split(" "),
k=d.reasons=["transport not supported","client not handshaken","unauthorized"],h=d.advice=["reconnect"],g=b.JSON,f=b.util.indexOf;d.encodePacket=function(a){var b=f(e,a.type),c=a.id||"",d=a.endpoint||"",n=a.ack,r=null;switch(a.type){case "error":var u=a.reason?f(k,a.reason):"";a=a.advice?f(h,a.advice):"";if(""!==u||""!==a)r=u+(""!==a?"+"+a:"");break;case "message":""!==a.data&&(r=a.data);break;case "event":r={name:a.name};a.args&&a.args.length&&(r.args=a.args);r=g.stringify(r);break;case "json":r=
g.stringify(a.data);break;case "connect":a.qs&&(r=a.qs);break;case "ack":r=a.ackId+(a.args&&a.args.length?"+"+g.stringify(a.args):"")}b=[b,c+("data"==n?"+":""),d];null!==r&&void 0!==r&&b.push(r);return b.join(":")};d.encodePayload=function(a){var b="";if(1==a.length)return a[0];for(var c=0,d=a.length;c<d;c++)b+="\ufffd"+a[c].length+"\ufffd"+a[c];return b};var n=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;d.decodePacket=function(a){var b=a.match(n);if(!b)return{};var c=b[2]||"";a=b[5]||"";var d=
{type:e[b[1]],endpoint:b[4]||""};c&&(d.id=c,d.ack=b[3]?"data":!0);switch(d.type){case "error":b=a.split("+");d.reason=k[b[0]]||"";d.advice=h[b[1]]||"";break;case "message":d.data=a||"";break;case "event":try{var f=g.parse(a);d.name=f.name;d.args=f.args}catch(r){}d.args=d.args||[];break;case "json":try{d.data=g.parse(a)}catch(u){}break;case "connect":d.qs=a||"";break;case "ack":if(b=a.match(/^([0-9]+)(\+)?(.*)/))if(d.ackId=b[1],d.args=[],b[3])try{d.args=b[3]?g.parse(b[3]):[]}catch(A){}}return d};d.decodePayload=
function(a){if("\ufffd"==a.charAt(0)){for(var b=[],c=1,e="";c<a.length;c++)"\ufffd"==a.charAt(c)?(b.push(d.decodePacket(a.substr(c+1).substr(0,e))),c+=Number(e)+1,e=""):e+=a.charAt(c);return b}return[d.decodePacket(a)]}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(a,b){function d(a,b){this.socket=a;this.sessid=b}a.Transport=d;b.util.mixin(d,b.EventEmitter);d.prototype.heartbeats=function(){return!0};d.prototype.onData=function(a){this.clearCloseTimeout();
(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(""!==a&&(a=b.parser.decodePayload(a))&&a.length)for(var c=0,d=a.length;c<d;c++)this.onPacket(a[c]);return this};d.prototype.onPacket=function(a){this.socket.setHeartbeatTimeout();if("heartbeat"==a.type)return this.onHeartbeat();if("connect"==a.type&&""==a.endpoint)this.onConnect();"error"==a.type&&"reconnect"==a.advice&&(this.isOpen=!1);this.socket.onPacket(a);return this};d.prototype.setCloseTimeout=
function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}};d.prototype.onDisconnect=function(){this.isOpen&&this.close();this.clearTimeouts();this.socket.onDisconnect();return this};d.prototype.onConnect=function(){this.socket.onConnect();return this};d.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)};d.prototype.clearTimeouts=function(){this.clearCloseTimeout();
this.reopenTimeout&&clearTimeout(this.reopenTimeout)};d.prototype.packet=function(a){this.send(b.parser.encodePacket(a))};d.prototype.onHeartbeat=function(a){this.packet({type:"heartbeat"})};d.prototype.onOpen=function(){this.isOpen=!0;this.clearCloseTimeout();this.socket.onOpen()};d.prototype.onClose=function(){this.isOpen=!1;this.socket.onClose();this.onDisconnect()};d.prototype.prepareUrl=function(){var a=this.socket.options;return this.scheme()+"://"+a.host+":"+a.port+"/"+a.resource+"/"+b.protocol+
"/"+this.name+"/"+this.sessid};d.prototype.ready=function(a,b){b.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(a,b,d){function e(a){this.options={port:80,secure:!1,document:"document"in d?document:!1,resource:"socket.io",transports:b.transports,"connect timeout":1E4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3E3,"max reconnection attempts":10,"sync disconnect on unload":!1,
"auto connect":!0,"flash policy port":10843,manualFlush:!1};b.util.merge(this.options,a);this.reconnecting=this.connecting=this.open=this.connected=!1;this.namespaces={};this.buffer=[];this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||b.util.ua.hasCORS)){var c=this;b.util.on(d,"beforeunload",function(){c.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function k(){}a.Socket=e;b.util.mixin(e,b.EventEmitter);e.prototype.of=function(a){this.namespaces[a]||
(this.namespaces[a]=new b.SocketNamespace(this,a),""!==a&&this.namespaces[a].packet({type:"connect"}));return this.namespaces[a]};e.prototype.publish=function(){this.emit.apply(this,arguments);var a,b;for(b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(a=this.of(b),a.$emit.apply(a,arguments))};e.prototype.handshake=function(a){function c(b){b instanceof Error?(d.connecting=!1,d.onError(b.message)):a.apply(null,b.split(":"))}var d=this,e=this.options,e=["http"+(e.secure?"s":"")+":/",e.host+
":"+e.port,e.resource,b.protocol,b.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!b.util.ua.hasCORS){var p=document.getElementsByTagName("script")[0],t=document.createElement("script");t.src=e+"&jsonp="+b.j.length;p.parentNode.insertBefore(t,p);b.j.push(function(a){c(a);t.parentNode.removeChild(t)})}else{var s=b.util.request();s.open("GET",e,!0);this.isXDomain()&&(s.withCredentials=!0);s.onreadystatechange=function(){if(4==s.readyState)if(s.onreadystatechange=k,200==
s.status)c(s.responseText);else if(403==s.status)d.onError(s.responseText);else d.connecting=!1,!d.reconnecting&&d.onError(s.responseText)};s.send(null)}};e.prototype.getTransport=function(a){a=a||this.transports;for(var c=0,d;d=a[c];c++)if(b.Transport[d]&&b.Transport[d].check(this)&&(!this.isXDomain()||b.Transport[d].xdomainCheck(this)))return new b.Transport[d](this,this.sessionid);return null};e.prototype.connect=function(a){if(this.connecting)return this;var c=this;c.connecting=!0;this.handshake(function(d,
e,k,t){function s(a){c.transport&&c.transport.clearTimeouts();c.transport=c.getTransport(a);if(!c.transport)return c.publish("connect_failed");c.transport.ready(c,function(){c.connecting=!0;c.publish("connecting",c.transport.name);c.transport.open();c.options["connect timeout"]&&(c.connectTimeoutTimer=setTimeout(function(){if(!c.connected&&(c.connecting=!1,c.options["try multiple transports"])){for(var a=c.transports;0<a.length&&a.splice(0,1)[0]!=c.transport.name;);a.length?s(a):c.publish("connect_failed")}},
c.options["connect timeout"]))})}c.sessionid=d;c.closeTimeout=1E3*k;c.heartbeatTimeout=1E3*e;c.transports||(c.transports=c.origTransports=t?b.util.intersect(t.split(","),c.options.transports):c.options.transports);c.setHeartbeatTimeout();s(c.transports);c.once("connect",function(){clearTimeout(c.connectTimeoutTimer);a&&"function"==typeof a&&a()})});return this};e.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(!this.transport||this.transport.heartbeats()){var a=
this;this.heartbeatTimeoutTimer=setTimeout(function(){a.transport.onClose()},this.heartbeatTimeout)}};e.prototype.packet=function(a){this.connected&&!this.doBuffer?this.transport.packet(a):this.buffer.push(a);return this};e.prototype.setBuffer=function(a){this.doBuffer=a;!a&&(this.connected&&this.buffer.length)&&(this.options.manualFlush||this.flushBuffer())};e.prototype.flushBuffer=function(){this.transport.payload(this.buffer);this.buffer=[]};e.prototype.disconnect=function(){if(this.connected||
this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this};e.prototype.disconnectSync=function(){var a=b.util.request(),c=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,b.protocol,"",this.sessionid].join("/")+"/?disconnect=1";a.open("GET",c,!1);a.send(null);this.onDisconnect("booted")};e.prototype.isXDomain=function(){var a=d.location.port||("https:"==d.location.protocol?443:80);return this.options.host!==
d.location.hostname||this.options.port!=a};e.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))};e.prototype.onOpen=function(){this.open=!0};e.prototype.onClose=function(){this.open=!1;clearTimeout(this.heartbeatTimeoutTimer)};e.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)};e.prototype.onError=function(a){a&&a.advice&&("reconnect"===a.advice&&(this.connected||this.connecting))&&(this.disconnect(),
this.options.reconnect&&this.reconnect());this.publish("error",a&&a.reason?a.reason:a)};e.prototype.onDisconnect=function(a){var b=this.connected,c=this.connecting;this.open=this.connecting=this.connected=!1;if(b||c)this.transport.close(),this.transport.clearTimeouts(),b&&(this.publish("disconnect",a),"booted"!=a&&(this.options.reconnect&&!this.reconnecting)&&this.reconnect())};e.prototype.reconnect=function(){function a(){if(c.connected){for(var d in c.namespaces)c.namespaces.hasOwnProperty(d)&&
""!==d&&c.namespaces[d].packet({type:"connect"});c.publish("reconnect",c.transport.name,c.reconnectionAttempts)}clearTimeout(c.reconnectionTimer);c.removeListener("connect_failed",b);c.removeListener("connect",b);c.reconnecting=!1;delete c.reconnectionAttempts;delete c.reconnectionDelay;delete c.reconnectionTimer;delete c.redoTransports;c.options["try multiple transports"]=e}function b(){if(c.reconnecting){if(c.connected)return a();if(c.connecting&&c.reconnecting)return c.reconnectionTimer=setTimeout(b,
1E3);c.reconnectionAttempts++>=d?c.redoTransports?(c.publish("reconnect_failed"),a()):(c.on("connect_failed",b),c.options["try multiple transports"]=!0,c.transports=c.origTransports,c.transport=c.getTransport(),c.redoTransports=!0,c.connect()):(c.reconnectionDelay<k&&(c.reconnectionDelay*=2),c.connect(),c.publish("reconnecting",c.reconnectionDelay,c.reconnectionAttempts),c.reconnectionTimer=setTimeout(b,c.reconnectionDelay))}}this.reconnecting=!0;this.reconnectionAttempts=0;this.reconnectionDelay=
this.options["reconnection delay"];var c=this,d=this.options["max reconnection attempts"],e=this.options["try multiple transports"],k=this.options["reconnection limit"];this.options["try multiple transports"]=!1;this.reconnectionTimer=setTimeout(b,this.reconnectionDelay);this.on("connect",b)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(a,b){function d(a,b){this.socket=a;this.name=b||"";this.flags={};this.json=new e(this,"json");this.ackPackets=
0;this.acks={}}function e(a,b){this.namespace=a;this.name=b}a.SocketNamespace=d;b.util.mixin(d,b.EventEmitter);d.prototype.$emit=b.EventEmitter.prototype.emit;d.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};d.prototype.packet=function(a){a.endpoint=this.name;this.socket.packet(a);this.flags={};return this};d.prototype.send=function(a,b){var c={type:this.flags.json?"json":"message",data:a};"function"==typeof b&&(c.id=++this.ackPackets,c.ack=!0,this.acks[c.id]=b);return this.packet(c)};
d.prototype.emit=function(a){var b=Array.prototype.slice.call(arguments,1),c=b[b.length-1],d={type:"event",name:a};"function"==typeof c&&(d.id=++this.ackPackets,d.ack="data",this.acks[d.id]=c,b=b.slice(0,b.length-1));d.args=b;return this.packet(d)};d.prototype.disconnect=function(){""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect"));return this};d.prototype.onPacket=function(a){function c(){d.packet({type:"ack",args:b.util.toArray(arguments),ackId:a.id})}
var d=this;switch(a.type){case "connect":this.$emit("connect");break;case "disconnect":if(""===this.name)this.socket.onDisconnect(a.reason||"booted");else this.$emit("disconnect",a.reason);break;case "message":case "json":var e=["message",a.data];"data"==a.ack?e.push(c):a.ack&&this.packet({type:"ack",ackId:a.id});this.$emit.apply(this,e);break;case "event":e=[a.name].concat(a.args);"data"==a.ack&&e.push(c);this.$emit.apply(this,e);break;case "ack":this.acks[a.ackId]&&(this.acks[a.ackId].apply(this,
a.args),delete this.acks[a.ackId]);break;case "error":if(a.advice)this.socket.onError(a);else"unauthorized"==a.reason?this.$emit("connect_failed",a.reason):this.$emit("error",a.reason)}};e.prototype.send=function(){this.namespace.flags[this.name]=!0;this.namespace.send.apply(this.namespace,arguments)};e.prototype.emit=function(){this.namespace.flags[this.name]=!0;this.namespace.emit.apply(this.namespace,arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b,d){function e(a){b.Transport.apply(this,arguments)}a.websocket=e;b.util.inherit(e,b.Transport);e.prototype.name="websocket";e.prototype.open=function(){var a=b.util.query(this.socket.options.query),c=this,e;e||(e=d.MozWebSocket||d.WebSocket);this.websocket=new e(this.prepareUrl()+a);this.websocket.onopen=function(){c.onOpen();c.socket.setBuffer(!1)};this.websocket.onmessage=function(a){c.onData(a.data)};this.websocket.onclose=function(){c.onClose();c.socket.setBuffer(!0)};this.websocket.onerror=
function(a){c.onError(a)};return this};e.prototype.send=b.util.ua.iDevice?function(a){var b=this;setTimeout(function(){b.websocket.send(a)},0);return this}:function(a){this.websocket.send(a);return this};e.prototype.payload=function(a){for(var b=0,c=a.length;b<c;b++)this.packet(a[b]);return this};e.prototype.close=function(){this.websocket.close();return this};e.prototype.onError=function(a){this.socket.onError(a)};e.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};e.check=
function(){return"WebSocket"in d&&!("__addTask"in WebSocket)||"MozWebSocket"in d};e.xdomainCheck=function(){return!0};b.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(c,b){function d(){b.Transport.websocket.apply(this,arguments)}c.flashsocket=d;b.util.inherit(d,b.Transport.websocket);d.prototype.name="flashsocket";d.prototype.open=function(){var a=this,c=arguments;WebSocket.__addTask(function(){b.Transport.websocket.prototype.open.apply(a,
c)});return this};d.prototype.send=function(){var a=this,c=arguments;WebSocket.__addTask(function(){b.Transport.websocket.prototype.send.apply(a,c)});return this};d.prototype.close=function(){WebSocket.__tasks.length=0;b.Transport.websocket.prototype.close.call(this);return this};d.prototype.ready=function(a,c){function h(){var b=a.options,h=b["flash policy port"],p=["http"+(b.secure?"s":"")+":/",b.host+":"+b.port,b.resource,"static/flashsocket","WebSocketMain"+(a.isXDomain()?"Insecure":"")+".swf"];
d.loaded||("undefined"===typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=p.join("/")),843!==h&&WebSocket.loadFlashPolicyFile("xmlsocket://"+b.host+":"+h),WebSocket.__initialize(),d.loaded=!0);c.call(g)}var g=this;if(document.body)return h();b.util.load(h)};d.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&a?10<=a.getFlashPlayerVersion().major:!1};d.xdomainCheck=function(){return!0};"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0);b.transports.push("flashsocket")})("undefined"!=
typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window)var a=function(){function c(){if(!w){try{var a=z.getElementsByTagName("body")[0].appendChild(z.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}w=!0;for(var a=ba.length,c=0;c<a;c++)ba[c]()}}function b(a){w?a():ba[ba.length]=a}function d(a){if(typeof M.addEventListener!=D)M.addEventListener("load",a,!1);else if(typeof z.addEventListener!=D)z.addEventListener("load",
a,!1);else if(typeof M.attachEvent!=D)v(M,"onload",a);else if("function"==typeof M.onload){var b=M.onload;M.onload=function(){b();a()}}else M.onload=a}function e(){var a=z.getElementsByTagName("body")[0],b=z.createElement(L);b.setAttribute("type",q);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=D){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),y.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);
return}a.removeChild(b);c=null;k()})()}else k()}function k(){var a=T.length;if(0<a)for(var b=0;b<a;b++){var c=T[b].id,d=T[b].callbackFn,e={success:!1,id:c};if(0<y.pv[0]){var k=m(c);if(k)if(!r(T[b].swfVersion)||y.wk&&312>y.wk)if(T[b].expressInstall&&g()){e={};e.data=T[b].expressInstall;e.width=k.getAttribute("width")||"0";e.height=k.getAttribute("height")||"0";k.getAttribute("class")&&(e.styleclass=k.getAttribute("class"));k.getAttribute("align")&&(e.align=k.getAttribute("align"));for(var u={},k=k.getElementsByTagName("param"),
v=k.length,H=0;H<v;H++)"movie"!=k[H].getAttribute("name").toLowerCase()&&(u[k[H].getAttribute("name")]=k[H].getAttribute("value"));f(e,u,c,d)}else n(k),d&&d(e);else A(c,!0),d&&(e.success=!0,e.ref=h(c),d(e))}else A(c,!0),d&&((c=h(c))&&typeof c.SetVariable!=D&&(e.success=!0,e.ref=c),d(e))}}function h(a){var b=null;(a=m(a))&&"OBJECT"==a.nodeName&&(typeof a.SetVariable!=D?b=a:(a=a.getElementsByTagName(L)[0])&&(b=a));return b}function g(){return!K&&r("6.0.65")&&(y.win||y.mac)&&!(y.wk&&312>y.wk)}function f(a,
b,c,d){K=!0;Y=d||null;V={success:!1,id:c};var e=m(c);if(e){"OBJECT"==e.nodeName?(aa=p(e),J=null):(aa=e,J=c);a.id=x;if(typeof a.width==D||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==D||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";z.title=z.title.slice(0,47)+" - Flash Player Installation";d=y.ie&&y.win?["Active"].concat("").join("X"):"PlugIn";d="MMredirectURL="+M.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+z.title;b.flashvars=
typeof b.flashvars!=D?b.flashvars+("&"+d):d;y.ie&&(y.win&&4!=e.readyState)&&(d=z.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());t(a,b,c)}}function n(a){if(y.ie&&y.win&&4!=a.readyState){var b=z.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(p(a),b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):
setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(p(a),a)}function p(a){var b=z.createElement("div");if(y.win&&y.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(L)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function t(a,b,c){var d,e=m(c);if(y.wk&&312>y.wk)return d;if(e)if(typeof a.id==D&&(a.id=c),y.ie&&y.win){var f="",g;for(g in a)a[g]!=Object.prototype[g]&&
("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";Z[Z.length]=a.id;d=m(a.id)}else{h=z.createElement(L);h.setAttribute("type",q);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?h.setAttribute("class",
a[k]):"classid"!=k.toLowerCase()&&h.setAttribute(k,a[k]));for(f in b)b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&(a=h,g=f,k=b[f],c=z.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",k),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}return d}function s(a){var b=m(a);b&&"OBJECT"==b.nodeName&&(y.ie&&y.win?(b.style.display="none",function(){if(4==b.readyState){var c=m(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,
10)}()):b.parentNode.removeChild(b))}function m(a){var b=null;try{b=z.getElementById(a)}catch(c){}return b}function v(a,b,c){a.attachEvent(b,c);U[U.length]=[a,b,c]}function r(a){var b=y.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function u(a,b,c,d){if(!y.ie||!y.mac){var e=z.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(F=C=null),C&&F==c||
(d=z.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),C=e.appendChild(d),y.ie&&(y.win&&typeof z.styleSheets!=D&&0<z.styleSheets.length)&&(C=z.styleSheets[z.styleSheets.length-1]),F=c),y.ie&&y.win?C&&typeof C.addRule==L&&C.addRule(a,b):C&&typeof z.createTextNode!=D&&C.appendChild(z.createTextNode(a+" {"+b+"}")))}}function A(a,b){if(G){var c=b?"visible":"hidden";w&&m(a)?m(a).style.visibility=c:u("#"+a,"visibility:"+c)}}function I(a){return null!=/[\\\"<>\.;]/.exec(a)&&
typeof encodeURIComponent!=D?encodeURIComponent(a):a}var D="undefined",L="object",q="application/x-shockwave-flash",x="SWFObjectExprInst",M=window,z=document,P=navigator,da=!1,ba=[function(){da?e():k()}],T=[],Z=[],U=[],aa,J,Y,V,w=!1,K=!1,C,F,G=!0,y=function(){var a=typeof z.getElementById!=D&&typeof z.getElementsByTagName!=D&&typeof z.createElement!=D,b=P.userAgent.toLowerCase(),c=P.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,
"$1")):!1,e=!+"\v1",f=[0,0,0],g=null;if(typeof P.plugins!=D&&typeof P.plugins["Shockwave Flash"]==L)!(g=P.plugins["Shockwave Flash"].description)||typeof P.mimeTypes!=D&&P.mimeTypes[q]&&!P.mimeTypes[q].enabledPlugin||(da=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof M[["Active"].concat("Object").join("X")]!=D)try{var h=
new (window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash");h&&(g=h.GetVariable("$version"))&&(e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}catch(k){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){y.w3&&((typeof z.readyState!=D&&"complete"==z.readyState||typeof z.readyState==D&&(z.getElementsByTagName("body")[0]||z.body))&&c(),w||(typeof z.addEventListener!=D&&z.addEventListener("DOMContentLoaded",c,!1),y.ie&&y.win&&
(z.attachEvent("onreadystatechange",function(){"complete"==z.readyState&&(z.detachEvent("onreadystatechange",arguments.callee),c())}),M==top&&function(){if(!w){try{z.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}c()}}()),y.wk&&function(){w||(/loaded|complete/.test(z.readyState)?c():setTimeout(arguments.callee,0))}(),d(c)))})();(function(){y.ie&&y.win&&window.attachEvent("onunload",function(){for(var b=U.length,c=0;c<b;c++)U[c][0].detachEvent(U[c][1],U[c][2]);b=Z.length;
for(c=0;c<b;c++)s(Z[c]);for(var d in y)y[d]=null;y=null;for(var e in a)a[e]=null;a=null})})();return{registerObject:function(a,b,c,d){if(y.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;T[T.length]=e;A(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(y.w3)return h(a)},embedSWF:function(a,c,d,e,h,k,m,n,u,v){var q={success:!1,id:c};y.w3&&!(y.wk&&312>y.wk)&&a&&c&&d&&e&&h?(A(c,!1),b(function(){d+="";e+="";var b={};if(u&&typeof u===L)for(var p in u)b[p]=u[p];
b.data=a;b.width=d;b.height=e;p={};if(n&&typeof n===L)for(var s in n)p[s]=n[s];if(m&&typeof m===L)for(var I in m)p.flashvars=typeof p.flashvars!=D?p.flashvars+("&"+I+"="+m[I]):I+"="+m[I];if(r(h))s=t(b,p,c),b.id==c&&A(c,!0),q.success=!0,q.ref=s;else{if(k&&g()){b.data=k;f(b,p,c,v);return}A(c,!0)}v&&v(q)})):v&&v(q)},switchOffAutoHideShow:function(){G=!1},ua:y,getFlashPlayerVersion:function(){return{major:y.pv[0],minor:y.pv[1],release:y.pv[2]}},hasFlashPlayerVersion:r,createSWF:function(a,b,c){if(y.w3)return t(a,
b,c)},showExpressInstall:function(a,b,c,d){y.w3&&g()&&f(a,b,c,d)},removeSWF:function(a){y.w3&&s(a)},createCSS:function(a,b,c,d){y.w3&&u(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:d,getQueryParamValue:function(a){var b=z.location.search||z.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return I(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return I(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var a=m(x);
a&&aa&&(a.parentNode.replaceChild(aa,a),J&&(A(J,!0),y.ie&&y.win&&(aa.style.display="block")),Y&&Y(V));K=!1}}}}();(function(){if("undefined"!=typeof window&&!window.WebSocket){var c=window.console;c&&c.log&&c.error||(c={log:function(){},error:function(){}});a.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&c.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(a,
c,e,k,h){var g=this;g.__id=WebSocket.__nextId++;WebSocket.__instances[g.__id]=g;g.readyState=WebSocket.CONNECTING;g.bufferedAmount=0;g.__events={};c?"string"==typeof c&&(c=[c]):c=[];setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(g.__id,a,c,e||null,k||0,h||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";a=WebSocket.__flash.send(this.__id,encodeURIComponent(a));
if(0>a)return!0;this.bufferedAmount+=a;return!1},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(a,c,e){a in this.__events||(this.__events[a]=[]);this.__events[a].push(c)},WebSocket.prototype.removeEventListener=function(a,c,e){if(a in this.__events)for(a=this.__events[a],e=a.length-1;0<=e;--e)if(a[e]===c){a.splice(e,1);break}},
WebSocket.prototype.dispatchEvent=function(a){for(var c=this.__events[a.type]||[],e=0;e<c.length;++e)c[e](a);(c=this["on"+a.type])&&c(a)},WebSocket.prototype.__handleEvent=function(a){"readyState"in a&&(this.readyState=a.readyState);"protocol"in a&&(this.protocol=a.protocol);if("open"==a.type||"error"==a.type)a=this.__createSimpleEvent(a.type);else if("close"==a.type)a=this.__createSimpleEvent("close");else if("message"==a.type)a=decodeURIComponent(a.message),a=this.__createMessageEvent("message",
a);else throw"unknown event type: "+a.type;this.dispatchEvent(a)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var c=document.createEvent("Event");c.initEvent(a,!1,!1);return c}return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(a,c){if(document.createEvent&&window.MessageEvent&&!window.opera){var e=document.createEvent("MessageEvent");e.initMessageEvent("message",!1,!1,c,null,null,window,null);return e}return{type:a,
data:c,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},WebSocket.__initialize=function(){if(!WebSocket.__flash)if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){var b=document.createElement("div");
b.id="webSocketContainer";b.style.position="absolute";WebSocket.__isFlashLite()?(b.style.left="0px",b.style.top="0px"):(b.style.left="-100px",b.style.top="-100px");var d=document.createElement("div");d.id="webSocketFlash";b.appendChild(d);document.body.appendChild(b);a.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(a){a.success||c.error("[WebSocket] swfobject.embedSWF failed")})}else c.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},
WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){setTimeout(function(){try{for(var a=WebSocket.__flash.receiveEvents(),d=0;d<a.length;++d)WebSocket.__instances[a[d].webSocketId].__handleEvent(a[d])}catch(e){c.error(e)}},
0);return!0},WebSocket.__log=function(a){c.log(decodeURIComponent(a))},WebSocket.__error=function(a){c.error(decodeURIComponent(a))},WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return a&&a.enabledPlugin&&a.enabledPlugin.filename?a.enabledPlugin.filename.match(/flashlite/i)?!0:!1:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||
(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))):c.error("Flash Player >= 10.0.0 is required.")}})();(function(a,b,d){function e(a){a&&(b.Transport.apply(this,arguments),this.sendBuffer=[])}function k(){}a.XHR=e;b.util.inherit(e,b.Transport);e.prototype.open=function(){this.socket.setBuffer(!1);this.onOpen();this.get();this.setCloseTimeout();return this};e.prototype.payload=function(a){for(var c=
[],d=0,e=a.length;d<e;d++)c.push(b.parser.encodePacket(a[d]));this.send(b.parser.encodePayload(c))};e.prototype.send=function(a){this.post(a);return this};e.prototype.post=function(a){function b(){if(4==this.readyState)if(this.onreadystatechange=k,e.posting=!1,200==this.status)e.socket.setBuffer(!1);else e.onClose()}function c(){this.onload=k;e.socket.setBuffer(!1)}var e=this;this.socket.setBuffer(!0);this.sendXHR=this.request("POST");d.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=
this.sendXHR.onerror=c:this.sendXHR.onreadystatechange=b;this.sendXHR.send(a)};e.prototype.close=function(){this.onClose();return this};e.prototype.request=function(a){var c=b.util.request(this.socket.isXDomain()),d=b.util.query(this.socket.options.query,"t="+ +new Date);c.open(a||"GET",this.prepareUrl()+d,!0);if("POST"==a)try{c.setRequestHeader?c.setRequestHeader("Content-type","text/plain;charset=UTF-8"):c.contentType="text/plain"}catch(e){}return c};e.prototype.scheme=function(){return this.socket.options.secure?
"https":"http"};e.check=function(a,c){try{var e=b.util.request(c),k=d.XDomainRequest&&e instanceof XDomainRequest,p=a&&a.options&&a.options.secure?"https:":"http:",t=d.location&&p!=d.location.protocol;if(e&&(!k||!t))return!0}catch(s){}return!1};e.xdomainCheck=function(a){return e.check(a,!0)}})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(a,b){function d(a){b.Transport.XHR.apply(this,arguments)}a.htmlfile=d;b.util.inherit(d,b.Transport.XHR);
d.prototype.name="htmlfile";d.prototype.get=function(){this.doc=new (window[["Active"].concat("Object").join("X")])("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var a=this.doc.createElement("div");a.className="socketio";this.doc.body.appendChild(a);this.iframe=this.doc.createElement("iframe");a.appendChild(this.iframe);var c=this,a=b.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+a;b.util.on(window,
"unload",function(){c.destroy()})};d.prototype._=function(a,b){this.onData(a);try{var c=b.getElementsByTagName("script")[0];c.parentNode.removeChild(c)}catch(d){}};d.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(a){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};d.prototype.close=function(){this.destroy();return b.Transport.XHR.prototype.close.call(this)};d.check=function(a){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in
window)try{return new (window[["Active"].concat("Object").join("X")])("htmlfile")&&b.Transport.XHR.check(a)}catch(c){}return!1};d.xdomainCheck=function(){return!1};b.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(a,b,d){function e(){b.Transport.XHR.apply(this,arguments)}function k(){}a["xhr-polling"]=e;b.util.inherit(e,b.Transport.XHR);b.util.merge(e,b.Transport.XHR);e.prototype.name="xhr-polling";e.prototype.heartbeats=
function(){return!1};e.prototype.open=function(){b.Transport.XHR.prototype.open.call(this);return!1};e.prototype.get=function(){function a(){if(4==this.readyState)if(this.onreadystatechange=k,200==this.status)e.onData(this.responseText),e.get();else e.onClose()}function b(){this.onerror=this.onload=k;e.retryCounter=1;e.onData(this.responseText);e.get()}function c(){e.retryCounter++;if(!e.retryCounter||3<e.retryCounter)e.onClose();else e.get()}if(this.isOpen){var e=this;this.xhr=this.request();d.XDomainRequest&&
this.xhr instanceof XDomainRequest?(this.xhr.onload=b,this.xhr.onerror=c):this.xhr.onreadystatechange=a;this.xhr.send(null)}};e.prototype.onClose=function(){b.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=k;try{this.xhr.abort()}catch(a){}this.xhr=null}};e.prototype.ready=function(a,c){var d=this;b.util.defer(function(){c.call(d)})};b.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=
typeof io?io:module.parent.exports,this);(function(a,b,d){function e(a){b.Transport["xhr-polling"].apply(this,arguments);this.index=b.j.length;var c=this;b.j.push(function(a){c._(a)})}var k=d.document&&"MozAppearance"in d.document.documentElement.style;a["jsonp-polling"]=e;b.util.inherit(e,b.Transport["xhr-polling"]);e.prototype.name="jsonp-polling";e.prototype.post=function(a){function c(){d();e.socket.setBuffer(!1)}function d(){e.iframe&&e.form.removeChild(e.iframe);try{v=document.createElement('<iframe name="'+
e.iframeId+'">')}catch(a){v=document.createElement("iframe"),v.name=e.iframeId}v.id=e.iframeId;e.form.appendChild(v);e.iframe=v}var e=this,k=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var t=document.createElement("form"),s=document.createElement("textarea"),m=this.iframeId="socketio_iframe_"+this.index,v;t.className="socketio";t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.style.display="none";t.target=m;t.method="POST";t.setAttribute("accept-charset",
"utf-8");s.name="d";t.appendChild(s);document.body.appendChild(t);this.form=t;this.area=s}this.form.action=this.prepareUrl()+k;d();this.area.value=b.JSON.stringify(a);try{this.form.submit()}catch(r){}this.iframe.attachEvent?v.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c;this.socket.setBuffer(!0)};e.prototype.get=function(){var a=this,c=document.createElement("script"),d=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&
(this.script.parentNode.removeChild(this.script),this.script=null);c.async=!0;c.src=this.prepareUrl()+d;c.onerror=function(){a.onClose()};d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d);this.script=c;k&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};e.prototype._=function(a){this.onData(a);this.isOpen&&this.get();return this};e.prototype.ready=function(a,c){var d=this;if(!k)return c.call(this);
b.util.load(function(){c.call(d)})};e.check=function(){return"document"in d};e.xdomainCheck=function(){return!0};b.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);"function"===typeof define&&define.amd&&define([],function(){return io})})();
(function(a){function c(a,b,c,d){var e=c.lang();return e[a].call?e[a](c,d):e[a][b]}function b(a,b){return function(c){return g(a.call(this,c),b)}}function d(a){return function(b){b=a.call(this,b);return b+this.lang().ordinal(b)}}function e(a,b,c){this._d=a;this._isUTC=!!b;this._a=a._a||null;this._lang=c||!1}function k(a){var b=this._data={},c=a.years||a.y||0,d=a.months||a.M||0,e=a.weeks||a.w||0,f=a.days||a.d||0,g=a.hours||a.h||0,k=a.minutes||a.m||0,m=a.seconds||a.s||0;a=a.milliseconds||a.ms||0;this._milliseconds=
a+1E3*m+6E4*k+36E5*g;this._days=f+7*e;this._months=d+12*c;b.milliseconds=a%1E3;m+=h(a/1E3);b.seconds=m%60;k+=h(m/60);b.minutes=k%60;g+=h(k/60);b.hours=g%24;f+=h(g/24);f+=7*e;b.days=f%30;d+=h(f/30);b.months=d%12;c+=h(d/12);b.years=c;this._lang=!1}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function g(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function f(a,b,c){var d=b._milliseconds,e=b._days;b=b._months;var f;d&&a._d.setTime(+a+d*c);e&&a.date(a.date()+e*c);b&&(f=a.date(),a.date(1).month(a.month()+
b*c).date(Math.min(f,a.daysInMonth())))}function n(a){return"[object Array]"===Object.prototype.toString.call(a)}function p(a,b){var c=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),e=0,f;for(f=0;f<c;f++)~~a[f]!==~~b[f]&&e++;return e+d}function t(a,b,c,d){var e,f,g=[];for(e=0;7>e;e++)g[e]=a[e]=null==a[e]?2===e?1:0:a[e];return a[7]=g[7]=b,null!=a[8]&&(g[8]=a[8]),a[3]+=c||0,a[4]+=d||0,f=new Date(0),b?(f.setUTCFullYear(a[0],a[1],a[2]),f.setUTCHours(a[3],a[4],a[5],a[6])):(f.setFullYear(a[0],
a[1],a[2]),f.setHours(a[3],a[4],a[5],a[6])),f._a=g,f}function s(a,b){var c,d,e=[];!b&&ba&&(b=require("./lang/"+a));for(c=0;c<T.length;c++)b[T[c]]=b[T[c]]||P.en[T[c]];for(c=0;12>c;c++)d=x([2E3,c]),e[c]=RegExp("^"+(b.months[c]||b.months(d,""))+"|^"+(b.monthsShort[c]||b.monthsShort(d,"")).replace(".",""),"i");return b.monthsParse=b.monthsParse||e,P[a]=b,b}function m(a){return(a="string"==typeof a&&a||a&&a._lang||null)?P[a]||s(a):x}function v(a){var b=a.match(U),c,d;c=0;for(d=b.length;c<d;c++)W[b[c]]?
b[c]=W[b[c]]:b[c]=b[c].match(/\[.*\]/)?b[c].replace(/^\[|\]$/g,""):b[c].replace(/\\/g,"");return function(e){var f="";for(c=0;c<d;c++)f+="function"==typeof b[c].call?b[c].call(e,a):b[c];return f}}function r(a,b){function c(b){return a.lang().longDateFormat[b]||b}for(var d=5;d--&&aa.test(b);)b=b.replace(aa,c);return E[b]||(E[b]=v(b)),E[b](a)}function u(a){switch(a){case "DDDD":return w;case "YYYY":return K;case "S":case "SS":case "SSS":case "DDD":return V;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":case "a":case "A":return C;
case "Z":case "ZZ":return F;case "T":return G;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return Y;default:return RegExp(a.replace("\\",""))}}function A(a,b){var c=[0,0,1,0,0,0,0],d={tzh:0,tzm:0},e=b.match(U),f,g;for(f=0;f<e.length;f++)if((g=(u(e[f]).exec(a)||[])[0])&&(a=a.slice(a.indexOf(g)+g.length)),W[e[f]]){var h=c,k=d,l=void 0,n=void 0;switch(e[f]){case "M":case "MM":h[1]=null==g?0:~~g-1;break;case "MMM":case "MMMM":for(l=
0;12>l;l++)if(m().monthsParse[l].test(g)){h[1]=l;n=!0;break}n||(h[8]=!1);break;case "D":case "DD":case "DDD":case "DDDD":null!=g&&(h[2]=~~g);break;case "YY":h[0]=~~g+(70<~~g?1900:2E3);break;case "YYYY":h[0]=~~Math.abs(g);break;case "a":case "A":k.isPm="pm"===(g+"").toLowerCase();break;case "H":case "HH":case "h":case "hh":h[3]=~~g;break;case "m":case "mm":h[4]=~~g;break;case "s":case "ss":h[5]=~~g;break;case "S":case "SS":case "SSS":h[6]=~~(1E3*("0."+g));break;case "Z":case "ZZ":k.isUTC=!0,(l=(g+
"").match(R))&&l[1]&&(k.tzh=~~l[1]),l&&l[2]&&(k.tzm=~~l[2]),l&&"+"===l[0]&&(k.tzh=-k.tzh,k.tzm=-k.tzm)}null==g&&(h[8]=!1)}return d.isPm&&12>c[3]&&(c[3]+=12),!1===d.isPm&&12===c[3]&&(c[3]=0),t(c,d.isUTC,d.tzh,d.tzm)}function I(a,b,c,d,e){e=e.relativeTime[a];return"function"==typeof e?e(b||1,!!c,a,d):e.replace(/%d/i,b||1)}function D(a,b){x.fn[a]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function L(a){x.duration.fn[a]=function(){return this._data[a]}}
function q(a,b){x.duration.fn["as"+a]=function(){return+this/b}}for(var x,M=Math.round,z,P={},da="en",ba="undefined"!=typeof module&&module.exports,T="months monthsShort weekdays weekdaysShort weekdaysMin longDateFormat calendar relativeTime ordinal meridiem".split(" "),Z=/^\/?Date\((\-?\d+)/i,U=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,aa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,J=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,
Y=/\d\d?/,V=/\d{1,3}/,w=/\d{3}/,K=/\d{1,4}/,C=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,F=/Z|[\+\-]\d\d:?\d\d/i,G=/T/i,y=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,N=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],R=/([\+\-]|\d\d)/gi,X="Month Date Hours Minutes Seconds Milliseconds".split(" "),ca={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},
E={},la=["DDD","w","M","D","d"],ja="MDHhmsw".split(""),W={M:function(){return this.month()+1},MMM:function(a){return c("monthsShort",this.month(),this,a)},MMMM:function(a){return c("months",this.month(),this,a)},D:function(){return this.date()},DDD:function(){var a=new Date(this.year(),this.month(),this.date()),b=new Date(this.year(),0,1);return~~((a-b)/864E5+1.5)},d:function(){return this.day()},dd:function(a){return c("weekdaysMin",this.day(),this,a)},ddd:function(a){return c("weekdaysShort",this.day(),
this,a)},dddd:function(a){return c("weekdays",this.day(),this,a)},w:function(){var a=new Date(this.year(),this.month(),this.date()-this.day()+5),b=new Date(a.getFullYear(),0,4);return~~((a-b)/864E5/7+1.5)},YY:function(){return g(this.year()%100,2)},YYYY:function(){return g(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%
12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return g(~~(this.milliseconds()/10),2)},SSS:function(){return g(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+g(~~(a/60),2)+":"+g(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+g(~~(10*a/6),4)}};la.length;)z=la.pop(),W[z+"o"]=d(W[z]);for(;ja.length;)z=ja.pop(),W[z+z]=b(W[z],2);W.DDDD=b(W.DDD,
3);x=function(b,c){if(null===b||""===b)return null;var d;if(x.isMoment(b))d=new e(new Date(+b._d),b._isUTC,b._lang);else{if(c)if(n(c)){var f=b.match(J)||[],g,h=99,k,m;for(k=0;k<c.length;k++)m=A(b,c[k]),g=r(new e(m),c[k]).match(J)||[],g=p(f,g),g<h&&(h=g,d=m)}else d=A(b,c);else if(d=Z.exec(b),b===a)d=new Date;else if(d)d=new Date(+d[1]);else if(b instanceof Date)d=b;else if(n(b))d=t(b);else if("string"==typeof b)if(d="YYYY-MM-DDT",y.exec(b)){for(f=0;4>f;f++)if(N[f][1].exec(b)){d+=N[f][0];break}d=F.exec(b)?
A(b,d+" Z"):A(b,d)}else d=new Date(b);else d=new Date(b);d=new e(d)}return d};x.utc=function(a,b){return n(a)?new e(t(a,!0),!0):("string"==typeof a&&!F.exec(a)&&(a+=" +0000",b&&(b+=" Z")),x(a,b).utc())};x.unix=function(a){return x(1E3*a)};x.duration=function(a,b){var c=x.isDuration(a),d="number"==typeof a,e=c?a._data:d?{}:a,f;return d&&(b?e[b]=a:e.milliseconds=a),f=new k(e),c&&(f._lang=a._lang),f};x.humanizeDuration=function(a,b,c){return x.duration(a,!0===b?null:b).humanize(!0===b?!0:c)};x.version=
"1.7.2";x.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";x.lang=function(a,b){var c;if(!a)return da;!b&&P[a]||s(a,b);if(P[a]){for(c=0;c<T.length;c++)x[T[c]]=P[a][T[c]];x.monthsParse=P[a].monthsParse;da=a}};x.langData=m;x.isMoment=function(a){return a instanceof e};x.isDuration=function(a){return a instanceof k};x.lang("en",{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",
mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});x.fn=e.prototype={clone:function(){return x(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1E3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),
this.minutes(),this.seconds(),this.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!p(this._a,(this._a[7]?x.utc(this._a):x(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){return r(this,a?a:x.defaultFormat)},add:function(a,b){var c=b?x.duration(+b,a):x.duration(a);return f(this,c,1),this},subtract:function(a,b){var c=b?x.duration(+b,a):x.duration(a);
return f(this,c,-1),this},diff:function(a,b,c){a=this._isUTC?x(a).utc():x(a).local();var d=6E4*(this.zone()-a.zone()),d=this._d-a._d-d,e=this.year()-a.year(),f=this.month()-a.month();a=this.date()-a.date();var g;return"months"===b?g=12*e+f+a/30:"years"===b?g=e+(f+a/30)/12:g="seconds"===b?d/1E3:"minutes"===b?d/6E4:"hours"===b?d/36E5:"days"===b?d/864E5:"weeks"===b?d/6048E5:d,c?g:M(g)},from:function(a,b){return x.duration(this.diff(a)).lang(this._lang).humanize(!b)},fromNow:function(a){return this.from(x(),
a)},calendar:function(){var a=this.diff(x().sod(),"days",!0),b=this.lang().calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"==typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<x([this.year()]).zone()||this.zone()<x([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==
a?b:this.add({d:a-b})},startOf:function(a){switch(a.replace(/s$/,"")){case "year":this.month(0);case "month":this.date(1);case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},
daysInMonth:function(){return x.utc([this.year(),this.month()+1,0]).date()},lang:function(b){return b===a?m(this):(this._lang=b,this)}};for(z=0;z<X.length;z++)D(X[z].toLowerCase(),X[z]);D("year","FullYear");x.duration.fn=k.prototype={weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*this._months},humanize:function(a){var b=+this,c=this.lang().relativeTime,d;d=!a;var e=this.lang(),f=M(Math.abs(b)/1E3),g=M(f/60),h=M(g/60),k=M(h/24),l=M(k/
365),f=45>f&&["s",f]||1===g&&["m"]||45>g&&["mm",g]||1===h&&["h"]||22>h&&["hh",h]||1===k&&["d"]||25>=k&&["dd",k]||45>=k&&["M"]||345>k&&["MM",M(k/30)]||1===l&&["y"]||["yy",l];d=(f[2]=d,f[3]=0<b,f[4]=e,I.apply({},f));b=0>=b?c.past:c.future;return a&&("function"==typeof b?d=b(d):d=b.replace(/%s/i,d)),d},lang:x.fn.lang};for(z in ca)ca.hasOwnProperty(z)&&(q(z,ca[z]),L(z.toLowerCase()));q("Weeks",6048E5);ba&&(module.exports=x);"undefined"==typeof ender&&(this.moment=x);"function"==typeof define&&define.amd&&
define("moment",[],function(){return x})}).call(this);
(function(a){var c=8,b=function(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535},d=function(a,b){return a>>>b|a<<32-b},e=function(a,c){var e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,
338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],h=Array(64),k,v,r,u,A,I,D,L,q,x,M,z;a[c>>5]|=128<<24-c%
32;a[(c+64>>9<<4)+15]=c;for(q=0;q<a.length;q+=16){k=g[0];v=g[1];r=g[2];u=g[3];A=g[4];I=g[5];D=g[6];L=g[7];for(x=0;64>x;x++)h[x]=16>x?a[x+q]:b(b(b(d(h[x-2],17)^d(h[x-2],19)^h[x-2]>>>10,h[x-7]),d(h[x-15],7)^d(h[x-15],18)^h[x-15]>>>3),h[x-16]),M=b(b(b(b(L,d(A,6)^d(A,11)^d(A,25)),A&I^~A&D),e[x]),h[x]),z=b(d(k,2)^d(k,13)^d(k,22),k&v^k&r^v&r),L=D,D=I,I=A,A=b(u,M),u=r,r=v,v=k,k=b(M,z);g[0]=b(k,g[0]);g[1]=b(v,g[1]);g[2]=b(r,g[2]);g[3]=b(u,g[3]);g[4]=b(A,g[4]);g[5]=b(I,g[5]);g[6]=b(D,g[6]);g[7]=b(L,g[7])}return g},
k=function(a){for(var b=[],d=(1<<c)-1,e=0;e<a.length*c;e+=c)b[e>>5]|=(a.charCodeAt(e/c)&d)<<24-e%32;return b},h=function(a){for(var b="",c=0;c<4*a.length;c++)b+="0123456789abcdef".charAt(a[c>>2]>>8*(3-c%4)+4&15)+"0123456789abcdef".charAt(a[c>>2]>>8*(3-c%4)&15);return b},g=function(b){return b="object"==typeof b?a(b).val():b.toString()};a.extend({sha256:function(a){a=g(a);return h(e(k(a),a.length*c))},sha256hmac:function(a,b){a=g(a);b=g(b);var d,t=a;d=b;var s=k(t);16<s.length&&(s=e(s,t.length*c));
for(var m=Array(16),t=Array(16),v=0;16>v;v++)m[v]=s[v]^909522486,t[v]=s[v]^1549556828;d=e(m.concat(k(d)),512+d.length*c);d=e(t.concat(d),768);return h(d)},sha256config:function(a){c=parseInt(a)||8}});a.fn.sha256=function(b){a.sha256config(b);b=g(a(this).val());b=a.sha256(b);a.sha256config(8);return b}})(jQuery);function Space(a){this.keys=[];this.values={};this.events={};this._parse(a);return this}Space.pathBranch=function(a){a=a.split(/ /g);if(2>a.length)return"";a.pop();return a.join(" ")};
Space.pathLeaf=function(a){var c=a.split(/ /g);return 2>c.length?a:c[c.length-1]};Space.strRepeat=function(a,c){for(var b="",d=0;d<c;d++)b+=" ";return b};Space.union=function(){var a=Space.unionSingle(arguments[0],arguments[1]),c;for(c in arguments)if(1!==c&&(a=Space.unionSingle(a,arguments[c]),!a.keys.length))break;return a};
Space.unionSingle=function(a,c){var b=new Space;if(!(c instanceof Space))return b;for(var d in a.keys){var e=a.keys[d],k=a.values[e];k instanceof Space&&(c.values[e]&&c.values[e]instanceof Space)&&b._set(e,Space.unionSingle(k,c.values[e]));k===c.values[e]&&b._set(e,k)}return b};Space.prototype.keys=[];Space.prototype.values={};Space.prototype.append=function(a,c){this._set(a,c);this.trigger("append",a,c);this.trigger("change");return this};
Space.prototype._clear=function(){this.keys=[];this.values={};return this};Space.prototype.clear=function(a){if(this.isEmpty())return this;this._clear();this.trigger("clear");a&&this._parse(a);this.trigger("change");return this};Space.prototype.clone=function(){return new Space(this.toString())};Space.prototype.create=function(a,c){this._set(a,c);this.trigger("create",a,c);this.trigger("change");return this};
Space.prototype._delete=function(a){if(!a.toString().match(/ /)){var c=this.keys.indexOf(a);if(-1===c)return 0;this.keys.splice(c,1);delete this.values[a];return 1}c=a.split(/ /);a=c.pop();c=this.get(c.join(" "));return c instanceof Space?c._delete(a):0};Space.prototype["delete"]=function(a){this._delete(a)&&this.trigger("delete",a);this.trigger("change");return this};
Space.prototype.diff=function(a){var c=new Space;a instanceof Space||(a=new Space(a));for(var b in this.keys){var d=this.keys[b],e=a.values[d];"undefined"===typeof e?c._set(d,""):typeof this.values[d]!==typeof e?"object"===typeof e?c._set(d,new Space(e)):this.values[d]!=e&&c._set(d,e):"object"!==typeof this.values[d]?this.values[d]!=e&&c._set(d,e):(e=this.values[d].diff(e),e.keys.length&&c._set(d,e))}for(b in a.keys)d=a.keys[b],e=a.values[d],this.values[d]||("object"!==typeof e?c._set(d,e):e instanceof
Space?c._set(d,new Space(e)):c._set(d,new Space(a)));return c};Space.prototype.diffOrder=function(a){a instanceof Space||(a=new Space(a));var c=new Space,b;for(b in a.keys){var d=a.keys[b],e=a.values[d];e instanceof Space&&this.values[d]instanceof Space&&(e=this.values[d].diffOrder(e),e.isEmpty()||c._set(d,e))}if(a.keys.join(" ")===this.keys.join(" "))return c;c.keys=a.keys;for(b in a.keys)d=a.keys[b],c.values.hasOwnProperty(d)||(c.values[d]=new Space);return c};
Space.prototype.each=function(a){for(var c in this.keys)if(!1===a.call(this,this.keys[c],this.values[this.keys[c]]))break;return this};Space.prototype.find=function(a,c){var b=new Space;this.get(a)===c&&b.push(this);this.each(function(d,e){if(!(e instanceof Space))return!0;e.find(a,c).each(function(a,c){b.push(c)})});return b};Space.prototype.isEmpty=function(){return 0===this.keys.length};
Space.prototype.every=function(a){for(var c in this.keys){var b=this.values[this.keys[c]];b instanceof Space&&b.every(a);a.call(this,this.keys[c],this.values[this.keys[c]])}return this};Space.prototype.get=function(a){switch(typeof a){case "string":return this.getByString(a);case "object":return this.getBySpace(a);case "number":return this.getByInt(a)}return null};Space.prototype.getByInt=function(a){0>a&&(a=this.keys.length+a);return this.values[this.keys[a]]};
Space.prototype.getByString=function(a){if(a){if(!a.match(/ /))return this.values[a];a=a.split(/ /g);var c=a.shift();if(c in this.values&&this.values[c]instanceof Space)return this.values[c].get(a.join(" "))}};Space.prototype.getBySpace=function(a){var c=new Space,b;for(b in a.keys){var d=a.keys[b],e=this.values[d];"undefined"!==typeof e&&(a.values[d]instanceof Space&&a.values[d].keys.length?e instanceof Space&&c._set(d,e.getBySpace(a.values[d])):c._set(d,e))}return c};
Space.prototype.getTokens=function(a){for(var c=this.toString(),b="K",d="",e=1,k=0,h=0;h<c.length-1;h++){var g=c.substr(h,1);a&&console.log("map: %s; mode: %s; char: %s",d,b,g);0<k?(d+="E",k--):" "!==g&&"\n"!==g?("N"===b&&(b="K"),d+=b):" "===g?"V"===b?d+=b:"K"===b?(d+="S",b="V"):(e++,d+="N"):"K"===b?(b="N",e=1,d+="N"):"V"===b&&(c.substr(h+1,e)===Space.strRepeat(" ",e)?(d+="V",k=e):(b="N",e=1,d+="N"))}return d};
Space.prototype.getTokensConcise=function(){return this.getTokens().replace(/[^\w\s]|(.)(?=\1)/gi,"")};Space.prototype.keyCount=function(){var a=this.length();this.each(function(c,b){b instanceof Space&&(a+=b.keyCount())});return a};Space.prototype.length=function(){return this.keys.length};Space.prototype.next=function(a){a=this.keys.indexOf(a)+1;return this.keys[a]?this.keys[a]:this.keys[0]};
Space.prototype.off=function(a,c){if(!this.events[a])return!0;for(var b in this.events[a])this.events[a][b]===c&&this.events[a].splice(b,1)};Space.prototype.objectCount=function(){var a=0;this.each(function(c,b){b instanceof Space&&(a+=1+b.objectCount())});return a};Space.prototype.on=function(a,c){this.events[a]||(this.events[a]=[]);this.events[a].push(c)};
Space.prototype._parse=function(a){if("string"===typeof a)return this._parseFromString(a);if(a instanceof Space){this.keys=a.keys;for(var c in this.keys){var b=this.keys[c];this.values[b]=a.values[b]}return this}for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c=a[b],"object"===typeof c?this._set(b,new Space(c)):this._set(b,c))};
Space.prototype._parseFromString=function(a){a=a.replace(/^[\n ]*/,"");a=a.replace(/\n\r/g,"\n").replace(/\r\n/g,"\n");a=a.replace(/\n[\n ]*$/,"");a=a.replace(/\n\n+/,"\n");a=a.split(/\n(?! )/g);for(var c in a){var b=a[c];(matches=b.match(/^([^ ]+)(\n|$)/))?this._set(matches[1],new Space(b.substr(matches[1].length).replace(/\n /g,"\n"))):(matches=b.match(/^([^ ]+) /))&&this._set(matches[1],b.substr(matches[1].length+1).replace(/^\n /,"").replace(/\n /g,"\n"))}return this};
Space.prototype._patch=function(a){a instanceof Space||(a=new Space(a));for(var c in a.keys){var b=a.keys[c],d=a.values[b];"string"===typeof d?""===d?this._delete(b):this._set(b,d):"number"===typeof d?this._set(b,d):d instanceof Space&&!d.keys.length?this._delete(b):this.values[b]instanceof Space?this.values[b]._patch(d):this._set(b,new Space(d))}return this};Space.prototype.patch=function(a){this._patch(a);this.trigger("patch",a);this.trigger("change");return this};
Space.prototype._patchOrder=function(a){a instanceof Space||(a=new Space(a));var c=this.keys.length,b;for(b in a.keys){var d=a.keys[b];if(!this.values.hasOwnProperty(d))break;c--}0===c&&(this.keys=a.keys);for(b in a.keys)d=a.keys[b],c=a.values[d],c instanceof Space&&(c.keys.length&&this.values[d]instanceof Space)&&this.values[d]._patchOrder(c);return this};Space.prototype.patchOrder=function(a){this._patchOrder(a);this.trigger("patchOrder",a);this.trigger("change");return this};
Space.prototype.pop=function(){if(!this.keys.length)return null;var a=this.keys.pop(),c=new Space;c.set(a,this.get(a));this._delete(a);return c};Space.prototype.prev=function(a){a=this.keys.indexOf(a)-1;return 0<=a?this.keys[a]:this.keys[this.keys.length-1]};Space.prototype.push=function(a){for(var c=this.length();this.get(c.toString());)c++;this._set(c.toString(),a);return this};
Space.prototype._rename=function(a,c){this.values[c]=this.values[a];delete this.values[a];this.keys[this.keys.indexOf(a)]=c;return this};Space.prototype.rename=function(a,c){var b=Space.pathBranch(a),d=Space.pathLeaf(a),e=c,k=this;b&&(k=this.get(b),e=c.substr(b.length+1));k._rename(d,e);a!==c&&this.trigger("rename",a,c);this.trigger("change");return this};
Space.prototype._set=function(a,c,b){if(!a)return null;a=a.toString().split(/ /g);for(var d=this,e;e=a.shift();)void 0===d.values[e]&&("number"===typeof b?d.keys.splice(b,0,e):d.keys.push(e)),a.length?d.values[e]instanceof Space||(d.values[e]=new Space):d.values[e]=c,d=d.values[e];return this};Space.prototype.set=function(a,c,b){this.get(a);this._set(a,c,b);this.trigger("set",a,c,b);this.trigger("change");return this};
Space.prototype.shift=function(){if(!this.keys.length)return null;var a=this.keys.shift(),c=new Space;c.set(a,this.get(a));this._delete(a);return c};Space.prototype.toJavascript=function(){return"new Space('"+this.toString().replace(/\n/g,"\\n").replace(/\'/g,"\\'")+"')"};Space.prototype.toJSON=function(){return JSON.stringify(this.toObject())};Space.prototype.toObject=function(){var a={},c;for(c in this.keys){var b=this.keys[c],d=this.values[b];a[b]=d instanceof Space?d.toObject():d}return a};
Space.prototype.toString=function(a){a=a||0;var c="",b;for(b in this.keys){var d=this.keys[b],e=this.values[d];"undefined"===typeof e?c+="\n":(c+=Space.strRepeat(" ",a)+d,c=e instanceof Space?c+("\n"+e.toString(a+1)):"object"===typeof e?c+("\n"+(new Space(e)).toString(a+1)):""===e.toString()?c+" \n":e.toString().match(/\n/)?c+(" \n"+Space.strRepeat(" ",a+1)+e.toString().replace(/\n/g,"\n"+Space.strRepeat(" ",a+1))+"\n"):c+(" "+e.toString()+"\n"))}return c};Space.prototype.toURL=function(){return encodeURIComponent(this.toString())};
Space.prototype.trigger=function(a){if(!this.events[a])return!0;var c=Array.prototype.slice.call(arguments),b;for(b in this.events[a])this.events[a][b].apply(this,c.slice(1))};"undefined"!=typeof exports&&(module.exports=Space);"undefined"!==typeof exports&&(Space=require("space"));function Element(a,c){this.tag=a;this.attrs=c||{};this.content="";return this}Element.prototype.addClass=function(a){this.attrs["class"]=this.attrs["class"]?this.attrs["class"]+(" "+a):a};
Element.prototype.append=function(a){this.content+=a};Element.prototype.attr=function(a,c){this.attrs[a]=c};Element.prototype.html=function(a){this.content+=a};Element.prototype.toHtml=function(){var a="<"+this.tag,c;for(c in this.attrs)this.attrs.hasOwnProperty(c)&&(a+=" "+c+'="'+this.attrs[c]+'"');"meta"===this.tag?a+=' content="'+this.content+'">':(a+=">"+this.content,a+="</"+this.tag+">");return a};
function Scrap(a,c){this.path=a;this.id=a.split(/ /g).pop();this.clear();c instanceof Space||(c=new Space(c));this.patch(c);var b=this.get("scraps");b instanceof Space&&b.each(function(c,e){b._set(c,new Scrap(a+" "+c,e))});return this}Scrap.styleToCss=function(a,c){var b=a+" {\n",d;for(d in c)c.hasOwnProperty(d)&&(b+="  "+d+" : "+c[d].toString().replace(/\;$/,"")+";\n");return b+"}\n"};
Scrap.styleToInline=function(a){var c="",b;for(b in a)a.hasOwnProperty(b)&&(c+=b+": "+a[b].toString().replace(/\;$/,"")+"; ");return c};Scrap.prototype=new Space;Scrap.prototype.clone=function(a){return new Scrap(a,this)};Scrap.prototype.selector=function(){return"#"+this.path.replace(/ /g," #")};Scrap.prototype.setChildren=function(a){var c=this.get("scraps");if(!c)return this;var b=this;c.each(function(c,e){b.div.html(e.toHtml(a))});return this};
Scrap.prototype.setContent=function(){this.get("content")&&this.div.html(this.get("content"));var a=this.get("styles");if(a&&a instanceof Space){var c=this.div;a.each(function(a,d){c.html(Scrap.styleToCss(a,d.values))})}return this};Scrap.prototype.setTag=function(){tag=this.values.tag?this.values.tag:"div";this.div=new Element(tag)};Scrap.prototype.setProperties=function(a){this.each(function(a,b){if(a.match(/^(scraps|content|tag|on.*|style)$/))return!0;this.setProperty(a)})};
Scrap.prototype.setProperty=function(a){this.get(a)&&this.div.attr(a,this.get(a))};Scrap.prototype.setHandlers=function(){this.each(function(a,c){if(!a.match(/^on.*$/))return!0;this.div.attr(a,c)})};Scrap.prototype.setStyle=function(){if(!this.values.style)return null;if(!(this.values.style instanceof Space))return this.div.attr("style",this.values.style);this.div.attr("style",Scrap.styleToInline(this.values.style.values))};
Scrap.prototype.toHtml=function(a){this.setTag();this.div.attr("id",this.id);this.setProperties();this.setContent();this.setChildren(a);this.setStyle();this.setHandlers();return a?a.call(this):this.div.toHtml()};function Page(a){this.clear();a&&this.patch(a);this.loadScraps();return this}Page.prototype=new Space;Page.prototype.clone=function(){return new Page(this.values)};Page.prototype.loadScraps=function(){var a=this;this.each(function(c,b){a._set(c,new Scrap(c,b))})};
Page.prototype.toHtml=function(a){var c="<!doctype html>\n<html>";this.each(function(b,d){c+="\n  "+d.toHtml(a)});return c+="\n</html>"};"undefined"!==typeof exports&&(module.exports=Page);
(function(a){function c(a){a=String(a);return a.charAt(0).toUpperCase()+a.slice(1)}function b(a,b){var c=-1,d=a.length;if(d==d>>>0)for(;++c<d;)b(a[c],c,a);else e(a,b)}function d(a){a=p(a);return/^(?:webOS|i(?:OS|P))/.test(a)?a:c(a)}function e(a,b){for(var c in a)h(a,c)&&b(a[c],c,a)}function k(a){return null==a?c(a):u.call(a).slice(8,-1)}function h(){h=function(a,b){var c=null!=a&&(a.constructor||Object).prototype;return!!c&&b in Object(a)&&!(b in c&&a[b]===c[b])};"Function"==k(q)?h=function(a,b){return null!=
a&&q.call(a,b)}:{}.__proto__==Object.prototype&&(h=function(a,b){var c=!1;null!=a&&(a=Object(a),a.__proto__=[a.__proto__,a.__proto__=null,c=b in a][0]);return c});return h.apply(this,arguments)}function g(a,b){var c=null!=a?typeof a[b]:"number";return!/^(?:boolean|number|string|undefined)$/.test(c)&&("object"==c?!!a[b]:!0)}function f(a){return String(a).replace(/([ -])(?!$)/g,"$1?")}function n(a,c){var d=null;b(a,function(b,e){d=c(d,b,e,a)});return d}function p(a){return String(a).replace(/^ +| +$/g,
"")}function t(b){function c(a){return n(a,function(a,c){var e=c.pattern||f(c);!a&&(a=RegExp("\\b"+e+" *\\d+[.\\w_]*","i").exec(b)||RegExp("\\b"+e+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(b))&&((a=String(c.label||a).split("/"))[1]&&!/[\d.]+/.test(a[0])&&(a[0]+=" "+a[1]),c=c.label||c,a=d(a[0].replace(RegExp(e,"i"),c).replace(RegExp("; *(?:"+c+"[_-])?","i")," ").replace(RegExp("("+c+")(\\w)","i"),"$1 $2")));return a})}function h(a){return n(a,function(a,c){return a||(RegExp(c+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)",
"i").exec(b)||0)[1]||null})}b||(b=da);var m,q=b,J=[],Y=null,V=b==da,w=V&&M&&"function"==typeof M.version&&M.version(),K=function(a){return n(a,function(a,c){return a||RegExp("\\b"+(c.pattern||f(c))+"\\b","i").exec(b)&&(c.label||c)})}([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]),C=function(a){return n(a,function(a,c){return a||RegExp("\\b"+(c.pattern||f(c))+"\\b","i").exec(b)&&(c.label||c)})}(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany",
"Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","Iron","K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera","Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]),F=c(["BlackBerry",{label:"Galaxy S",
pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation Vita","TouchPad","Transformer","Xoom"]),G=function(a){return n(a,function(a,c,d){return a||(c[F]||c[0,/^[a-z]+(?: +[a-z]+\b)*/i.exec(F)]||RegExp("\\b"+(d.pattern||f(d))+"(?:\\b|\\w*\\d)","i").exec(b))&&(d.label||d)})}({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},
BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},LG:{},Motorola:{Xoom:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1},Sony:{"PlayStation Vita":1}}),y=function(a){return n(a,function(a,c){var e=c.pattern||f(c);!a&&(a=RegExp("\\b"+e+"(?:/[\\d.]+|[ \\w.]*)","i").exec(b))&&(m={"6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},/^Win/i.test(a)&&(m=m[0,/[\d.]+$/.exec(a)])&&(a="Windows "+
m),a=d(String(a).replace(RegExp(e,"i"),c.label||c).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0]));return a})}("Android,CentOS,Debian,Fedora,FreeBSD,Gentoo,Haiku,Kubuntu,Linux Mint,Red Hat,SuSE,Ubuntu,Xubuntu,Cygwin,Symbian OS,hpwOS,webOS ,webOS,Tablet OS,Linux,Mac OS X,Macintosh,Mac,Windows 98;,Windows ".split(","));
K&&(K=[K]);G&&!F&&(F=c([G]));if(m=/Google TV/.exec(F))F=m[0];/\bSimulator\b/i.test(b)&&(F=(F?F+" ":"")+"Simulator");if(/^iP/.test(F))C||(C="Safari"),y="iOS"+((m=/ OS ([\d_]+)/i.exec(b))?" "+m[1].replace(/_/g,"."):"");else if("Konqueror"==C&&!/buntu/i.test(y))y="Kubuntu";else if(G&&"Google"!=G&&/Chrome|Vita/.test(C+";"+F))C="Android Browser",y=/Android/.test(y)?y:"Android";else if(!C||(m=!/\bMinefield\b/i.test(b)&&/Firefox|Safari/.exec(C)))C&&(!F&&/[\/,]|^[^(]+?\)/.test(b.slice(b.indexOf(m+"/")+8)))&&
(C=null),(m=F||G||y)&&(F||G||/Android|Symbian OS|Tablet OS|webOS/.test(y))&&(C=/[a-z]+(?: Hat)?/i.exec(/Android/.test(y)?y:m)+" Browser");w||(w=h(["(?:Cloud9|CriOS|CrMo|Opera ?Mini|Raven|Silk(?!/[\\d.]+$))","Version",f(C),"(?:Firefox|Minefield|NetFront)"]));if("iCab"==K&&3<parseFloat(w))K=["WebKit"];else if(m=/Opera/.test(C)&&"Presto"||/\b(?:Midori|Nook|Safari)\b/i.test(b)&&"WebKit"||!K&&/\bMSIE\b/i.test(b)&&(/^Mac/.test(y)?"Tasman":"Trident"))K=[m];if(V){if(g(a,"global"))if(A&&(m=A.lang.System,q=
m.getProperty("os.arch"),y=y||m.getProperty("os.name")+" "+m.getProperty("os.version")),"object"==typeof exports&&exports)if(P==s&&"object"==typeof system&&(m=[system])[0]){y||(y=m[0].os||null);try{m[1]=require("ringo/engine").version,w=m[1].join("."),C="RingoJS"}catch(N){m[0].global==v&&(C="Narwhal")}}else"object"==typeof process&&(m=process)&&(C="Node.js",q=m.arch,y=m.platform,w=/[\d.]+/.exec(m.version)[0]);else"Environment"==k(a.environment)&&(C="Rhino");else"ScriptBridgingProxyObject"==k(m=a.runtime)?
(C="Adobe AIR",y=m.flash.system.Capabilities.os):"RuntimeObject"==k(m=a.phantom)?(C="PhantomJS",w=(m=m.version||null)&&m.major+"."+m.minor+"."+m.patch):"number"==typeof L.documentMode&&(m=/\bTrident\/(\d+)/i.exec(b))&&(w=[w,L.documentMode],(m=+m[1]+4)!=w[1]&&(J.push("IE "+w[1]+" mode"),K[1]="",w[1]=m),w="IE"==C?String(w[1].toFixed(1)):w[0]);y=y&&d(y)}w&&(m=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(w)||/(?:alpha|beta)(?: ?\d)?/i.exec(b+";"+(V&&x.appMinorVersion))||/\bMinefield\b/i.test(b)&&"a")&&
(Y=/b/i.test(m)?"beta":"alpha",w=w.replace(RegExp(m+"\\+?$"),"")+("beta"==Y?D:I)+(/\d+\+?/.exec(m)||""));"Fennec"==C?C="Firefox Mobile":"Maxthon"==C&&w?w=w.replace(/\.[\d.]+/,".x"):"Silk"==C?(/Mobi/i.test(b)||(y="Android",J.unshift("desktop mode")),/Accelerated *= *true/i.test(b)&&J.unshift("accelerated")):"IE"==C&&(m=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(b)||0)[1])?(C+=" Mobile",y="Windows Phone OS "+m+".x",J.unshift("desktop mode")):"IE"!=C&&(!C||F||/Browser|Mobi/.test(C))||"Windows CE"!=y&&!/Mobi/i.test(b)?
"IE"==C&&V&&"object"==typeof external&&!external?J.unshift("platform preview"):/BlackBerry/.test(F)&&(m=(RegExp(F.replace(/ +/g," *")+"/([.\\d]+)","i").exec(b)||0)[1]||w)?(y="Device Software "+m,w=null):this!=e&&((V&&M||/Opera/.test(C)&&/\b(?:MSIE|Firefox)\b/i.test(b)||"Firefox"==C&&/OS X (?:\d+\.){2,}/.test(y)||"IE"==C&&(y&&!/^Win/.test(y)&&5.5<w||/Windows XP/.test(y)&&8<w||8==w&&!/Trident/.test(b)))&&!r.test(m=t.call(e,b.replace(r,"")+";"))&&m.name)&&(m="ing as "+m.name+((m=m.version)?" "+m:""),
r.test(C)?(/IE/.test(m)&&"Mac OS"==y&&(y=null),m="identify"+m):(m="mask"+m,C=z?d(z.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/IE/.test(m)&&(y=null),V||(w=null)),K=["Presto"],J.push(m)):C+=" Mobile";if(m=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(b)||0)[1]){m=[parseFloat(m.replace(/\.(\d)$/,".0$1")),m];if("Safari"==C&&"+"==m[1].slice(-1))C="WebKit Nightly",Y="alpha",w=m[1].slice(0,-1);else if(w==m[1]||w==(/\bSafari\/([\d.]+\+?)/i.exec(b)||0)[1])w=null;m=[m[0],(/\bChrome\/([\d.]+)/i.exec(b)||0)[1]];!V||
/internal|\n/i.test(u.toString())&&!m[1]?(K[1]="like Safari",m=(m=m[0],400>m?1:500>m?2:526>m?3:533>m?4:534>m?"4+":535>m?5:"5")):(K[1]="like Chrome",m=m[1]||(m=m[0],530>m?1:532>m?2:532.05>m?3:533>m?4:534.03>m?5:534.07>m?6:534.1>m?7:534.13>m?8:534.16>m?9:534.24>m?10:534.3>m?11:535.01>m?12:535.02>m?"13+":535.07>m?15:535.11>m?16:535.19>m?17:536.05>m?18:536.1>m?19:537.01>m?20:"21"));K[1]+=" "+(m+="number"==typeof m?".x":/[.+]/.test(m)?"":"+");"Safari"==C&&(!w||45<parseInt(w))&&(w=m)}"Opera"==C&&(m=/(?:zbov|zvav)$/.exec(y))?
(C+=" ",J.unshift("desktop mode"),"zvav"==m?(C+="Mini",w=null):C+="Mobile"):"Safari"==C&&/Chrome/.exec(K[1])&&(J.unshift("desktop mode"),C="Chrome Mobile",w=null,/Mac OS X/.test(y)?(G="Apple",y="iOS 4.3+"):y=null);w&&(0==w.indexOf(m=/[\d.]+$/.exec(y))&&-1<b.indexOf("/"+m+"-"))&&(y=p(y.replace(m,"")));K&&!/Avant|Nook/.test(C)&&(/Browser|Lunascape|Maxthon/.test(C)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(C)&&K[1])&&(m=K[K.length-1])&&J.push(m);J.length&&(J=["("+J.join("; ")+
")"]);G&&(F&&0>F.indexOf(G))&&J.push("on "+G);F&&J.push((/^on /.test(J[J.length-1])?"":"on ")+F);y&&(m=/ ([\d.+]+)$/.exec(y),y={architecture:32,family:m?y.replace(m[0],""):y,version:m?m[1]:null,toString:function(){var a=this.version;return this.family+(a?" "+a:"")+(64==this.architecture?" 64-bit":"")}});(m=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(q))&&!/\bi686\b/i.test(q)&&(y&&(y.architecture=64,y.family=y.family.replace(RegExp(" *"+m),"")),C&&(/WOW64/i.test(b)||V&&/\w(?:86|32)$/.test(x.cpuClass||
x.platform))&&J.unshift("32-bit"));b||(b=null);return{version:C&&w&&(J.unshift(w),w),name:C&&(J.unshift(C),C),os:y?(C&&!(y==String(y).split(" ")[0]&&(y==C.split(" ")[0]||F))&&J.push(F?"("+y+")":"on "+y),y):{architecture:null,family:null,version:null,toString:function(){return"null"}},description:J.length?J.join(" "):b,layout:K&&K[0],manufacturer:G,prerelease:Y,product:F,ua:b,parse:t,toString:function(){return this.description||""}}}var s=a,m="object"==typeof exports&&exports,v="object"==typeof global&&
global&&(global==global.global?a=global:global),r=/Opera/,u={}.toString,A=/Java/.test(k(a.java))&&a.java,I=A?"a":"\u03b1",D=A?"b":"\u03b2",L=a.document||{},q={}.hasOwnProperty,x=a.navigator||{},M=a.operamini||a.opera,z=r.test(z=k(M))?z:M=null,P=this,da=x.userAgent||"";"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t()}):m?e(t(),function(a,b){m[b]=a}):a.platform=t()})(this);
(function(a){var c=a.prototype,b=c.parseFromString;try{if((new a).parseFromString("","text/html"))return}catch(d){}c.parseFromString=function(a,c){if(/^\s*text\/html\s*(?:;|$)/i.test(c)){var d=document.implementation.createHTMLDocument("");-1<a.toLowerCase().indexOf("<!doctype")?d.documentElement.innerHTML=a:d.body.innerHTML=a;return d}return b.apply(this,arguments)}})(DOMParser);
$.inlineStyleToSpace=function(a){a=a.split(";");var c=new Space;a.forEach(function(a,d){a=a.trim();if(!a)return!0;var e=a.split(/\:/);c.set(e[0].trim(),e[1].trim())});return c};
$.fn.toSpace=function(){var a=new Space;$(this);var c=$(this).get(0).tagName.toLowerCase();a.set("tag",c);$($(this).get(0).attributes).each(function(){if("style"===this.nodeName)a.set(this.nodeName,$.inlineStyleToSpace(this.nodeValue));else{if("id"===this.nodeName)return!0;a.set(this.nodeName,this.nodeValue)}});if($(this).children().length){var b=new Space;$(this).children().each(function(){for(var a=$(this).attr("id")||$(this).get(0).tagName.toLowerCase(),c=1,k=a;b.values[k];)c++,k=a+c.toString();
b.set(k,$(this).toSpace())});a.set("scraps",b)}else"meta"!==c?a.set("content",$(this).html()):a.set("content",$(this).attr("content"));return a};
$.htmlToScraps=function(a){var c=(new DOMParser).parseFromString(a,"text/html"),b=new Space;$("html",c).children().each(function(){if(!$(this).get(0).tagName)return!0;var a=$(this).attr("id")||$(this).get(0).tagName.toLowerCase();$(this).get(0).tagName.toLowerCase();for(var c=1,k=a;b.get(k);)c++,k=a+c.toString();a=$(this).toSpace();b.set(k,a)});return a.match(/\<head/)&&!a.match(/\<body/)?b.delete("body"):a.match(/\<head/)&&a.match(/\<body/)?b:a.match(/\<head/)||a.match(/\<body/)?!a.match(/\<head/)&&
a.match(/\<body/)?b.delete("head"):b:(b.delete("head"),b.get("body scraps"))};
var cssToObject=function(a,c){function b(a){var b=a.match(/\n/g);b&&(x+=b.length);b=a.lastIndexOf("\n");M=~b?a.length-b:M+a.length}function d(){var a={line:x,column:M};return c.position?function(b){b.position={start:a,end:{line:x,column:M}};f(/^\s*/);return b}:e}function e(a){f(/^\s*/);return a}function k(b){b=Error(b+" near line "+x+":"+M);b.line=x;b.column=M;b.source=a;throw b;}function h(){return f(/^{\s*/)}function g(){var b,c=[];f(/^\s*/);for(n(c);"}"!=a[0]&&(b=r()||(A()||u()||L("import")||L("charset")||
L("namespace")||D()||I())||q());)c.push(b),n(c);return c}function f(c){if(c=c.exec(a)){var d=c[0];b(d);a=a.slice(d.length);return c}}function n(a){var b;for(a=a||[];b=p();)a.push(b);return a}function p(){var c=d();if("/"==a[0]&&"*"==a[1]){for(var e=2;null!=a[e]&&("*"!=a[e]||"/"!=a[e+1]);)++e;var e=e+2,f=a.slice(2,e-2);M+=2;b(f);a=a.slice(e);M+=2;return c({type:"comment",comment:f})}}function t(){var a=f(/^([^{]+)/);if(a)return a[0].trim().split(/\s*,\s*/)}function s(){var a=d(),b=f(/^(\*?[-\w]+)\s*/);
if(b){b=b[0];if(!f(/^:\s*/))return k("property missing ':'");var c=f(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);if(!c)return k("property missing value");a=a({type:"declaration",property:b,value:c[0].trim()});f(/^[;\s]*/);return a}}function m(){var a=[];if(!h())return k("missing '{'");n(a);for(var b;b=s();)a.push(b),n(a);return f(/^}/)?a:k("missing '}'")}function v(){for(var a,b=[],c=d();a=f(/^(from|to|\d+%|\.\d+%|\d+\.\d+%)\s*/);)b.push(a[1]),f(/^,\s*/);if(b.length)return c({type:"keyframe",
values:b,declarations:m()})}function r(){var a=d(),b=f(/^@([-\w]+)?keyframes */);if(b){var c=b[1],b=f(/^([-\w]+)\s*/);if(!b)return k("@keyframes missing name");b=b[1];if(!h())return k("@keyframes missing '{'");for(var e,g=n();e=v();)g.push(e),g=g.concat(n());return f(/^}/)?a({type:"keyframes",name:b,vendor:c,keyframes:g}):k("@keyframes missing '}'")}}function u(){var a=d(),b=f(/^@supports *([^{]+)/);if(b){b=b[1].trim();if(!h())return k("@supports missing '{'");var c=n().concat(g());return f(/^}/)?
a({type:"supports",supports:b,rules:c}):k("@supports missing '}'")}}function A(){var a=d(),b=f(/^@media *([^{]+)/);if(b){b=b[1].trim();if(!h())return k("@media missing '{'");var c=n().concat(g());return f(/^}/)?a({type:"media",media:b,rules:c}):k("@media missing '}'")}}function I(){var a=d();if(f(/^@page */)){var b=t()||[];if(!h())return k("@page missing '{'");for(var c=n(),e;e=s();)c.push(e),c=c.concat(n());return f(/^}/)?a({type:"page",selectors:b,declarations:c}):k("@page missing '}'")}}function D(){var a=
d(),b=f(/^@([-\w]+)?document *([^{]+)/);if(b){var c=(b[1]||"").trim(),b=b[2].trim();if(!h())return k("@document missing '{'");var e=n().concat(g());return f(/^}/)?a({type:"document",document:b,vendor:c,rules:e}):k("@document missing '}'")}}function L(a){var b=d(),c=f(RegExp("^@"+a+" *([^;\\n]+);"));if(c){var e={type:a};e[a]=c[1].trim();return b(e)}}function q(){var a=d(),b=t();if(b)return n(),a({type:"rule",selectors:b,declarations:m()})}c=c||{};var x=1,M=1;return{type:"stylesheet",stylesheet:{rules:g()}}},
cssToSpace=function(a){var c=new Space;(new Space(cssToObject(a))).get("stylesheet rules").each(function(a,d){if("rule"!==d.get("type"))return!0;var e="";d.get("selectors").each(function(a,b){e+=b});d.get("declarations").each(function(a,b){var d=b.get("property"),f=b.get("value");c.set(e+" "+d,f)})});return c};
(function(){function a(a,b,c,h){var g,f,n,p,t,s,m,v;b=b||{};void 0===b.wrap_line_length&&void 0!==b.max_char&&(b.wrap_line_length=b.max_char);f=parseInt(b.indent_size||4,10);n=b.indent_char||" ";t=b.brace_style||"collapse";p=0===b.wrap_line_length?32786:parseInt(b.wrap_line_length||250,10);s=b.unformatted||"a span bdo em strong dfn code samp kbd var cite abbr acronym q sub sup tt i b big small u s strike font ins del pre address dt h1 h2 h3 h4 h5 h6".split(" ");v=(m=b.preserve_newlines||!0,parseInt(b.max_preserve_newlines||
32786,10));g=new function(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.token_text=this.last_token=this.last_text=this.token_type=this.tag_type="";this.newlines=0;this.indent_content=!1;this.Utils={whitespace:["\n","\r","\t"," "],single_token:"br input link meta !doctype basefont base area hr wbr param img isindex ?xml embed ?php ? ?=".split(" "),extra_liners:["head","body","/html"],in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===
b[c])return!0;return!1}};this.traverse_whitespace=function(){var a="",a=this.input.charAt(this.pos);if(this.Utils.in_array(a,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(a,this.Utils.whitespace);)m&&("\n"===a&&this.newlines<=v)&&(this.newlines+=1),this.pos++,a=this.input.charAt(this.pos);return!0}return!1};this.get_content=function(){for(var a="",b=[],c=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];this.traverse_whitespace()?
b.length&&(c=!0):(a=this.input.charAt(this.pos),this.pos++,c&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,b),this.print_indentation(b)):(this.line_char_count++,b.push(" ")),c=!1),this.line_char_count++,b.push(a))}return b.length?b.join(""):""};this.get_contents_to=function(a){if(this.pos===this.input.length)return["","TK_EOF"];var b="";a=RegExp("</"+a+"\\s*>","igm");a.lastIndex=this.pos;a=(a=a.exec(this.input))?a.index:this.input.length;this.pos<a&&(b=this.input.substring(this.pos,
a),this.pos=a);return b};this.record_tag=function(a){this.tags[a+"count"]?this.tags[a+"count"]++:this.tags[a+"count"]=1;this.tags[a+this.tags[a+"count"]]=this.indent_level;this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent;this.tags.parent=a+this.tags[a+"count"]};this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]);
delete this.tags[a+this.tags[a+"count"]+"parent"];delete this.tags[a+this.tags[a+"count"]];1===this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}};this.get_tag=function(a){var b="",c=[],b="",d=!1,e,f=this.pos,g=this.line_char_count;a=void 0!==a?a:!1;do{if(this.pos>=this.input.length)return a&&(this.pos=f,this.line_char_count=g),c.length?c.join(""):["","TK_EOF"];b=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(b,this.Utils.whitespace))d=!0;else{if("'"===b||'"'===
b)b+=this.get_unformatted(b),d=!0;"="===b&&(d=!1);c.length&&("="!==c[c.length-1]&&">"!==b&&d)&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,c),this.print_indentation(c)):(c.push(" "),this.line_char_count++),d=!1);"<"!==b||e||(e=this.pos-1);this.line_char_count++;c.push(b);if(c[1]&&"!"===c[1]){c=[this.get_comment(e)];break}}}while(">"!==b);b=c.join("");d=-1!==b.indexOf(" ")?b.indexOf(" "):b.indexOf(">");d=b.substring(1,d).toLowerCase();"/"===b.charAt(b.length-2)||this.Utils.in_array(d,
this.Utils.single_token)?a||(this.tag_type="SINGLE"):"script"===d?a||(this.record_tag(d),this.tag_type="SCRIPT"):"style"===d?a||(this.record_tag(d),this.tag_type="STYLE"):this.is_unformatted(d,s)?(b=this.get_unformatted("</"+d+">",b),c.push(b),0<e&&this.Utils.in_array(this.input.charAt(e-1),this.Utils.whitespace)&&c.splice(0,0,this.input.charAt(e-1)),e=this.pos-1,this.Utils.in_array(this.input.charAt(e+1),this.Utils.whitespace)&&c.push(this.input.charAt(e+1)),this.tag_type="SINGLE"):"!"===d.charAt(0)?
a||(this.tag_type="SINGLE",this.traverse_whitespace()):a||("/"===d.charAt(0)?(this.retrieve_tag(d.substring(1)),this.tag_type="END"):(this.record_tag(d),"html"!==d.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace(),this.Utils.in_array(d,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output)));a&&(this.pos=f,this.line_char_count=g);return c.join("")};this.get_comment=
function(a){var b="",c=">",d=!1;this.pos=a;input_char=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length;){b+=input_char;if(b[b.length-1]===c[c.length-1]&&-1!==b.indexOf(c))break;!d&&10>b.length&&(0===b.indexOf("<![if")?(c="<![endif]>",d=!0):0===b.indexOf("<![cdata[")?(c="]]\x3e",d=!0):0===b.indexOf("<![")?(c="]>",d=!0):0===b.indexOf("\x3c!--")&&(c="--\x3e",d=!0));input_char=this.input.charAt(this.pos);this.pos++}return b};this.get_unformatted=function(a,b){if(b&&-1!==b.toLowerCase().indexOf(a))return"";
var c="",d="",e=!0;do{if(this.pos>=this.input.length)break;c=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(c,this.Utils.whitespace)){if(!e){this.line_char_count--;continue}if("\n"===c||"\r"===c){d+="\n";this.line_char_count=0;continue}}d+=c;this.line_char_count++;e=!0}while(-1===d.toLowerCase().indexOf(a));return d};this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var b=this.last_token.substr(7);a=this.get_contents_to(b);return"string"!==
typeof a?a:[a,"TK_"+b]}if("CONTENT"===this.current_mode)return a=this.get_content(),"string"!==typeof a?a:[a,"TK_CONTENT"];if("TAG"===this.current_mode)return a=this.get_tag(),"string"!==typeof a?a:[a,"TK_TAG_"+this.tag_type]};this.get_full_indent=function(a){a=this.indent_level+a||0;return 1>a?"":Array(a+1).join(this.indent_string)};this.is_unformatted=function(a,b){if(!this.Utils.in_array(a,b))return!1;if("a"!==a.toLowerCase()||!this.Utils.in_array("a",b))return!0;var c=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);
return!c||this.Utils.in_array(c,b)?!0:!1};this.printer=function(a,b,c,d,e){this.input=a||"";this.output=[];this.indent_character=b;this.indent_string="";this.indent_size=c;this.brace_style=e;this.indent_level=0;this.wrap_line_length=d;for(a=this.line_char_count=0;a<this.indent_size;a++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){this.line_char_count=0;b&&b.length&&(a||"\n"!==b[b.length-1])&&b.push("\n")};this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),
this.line_char_count+=this.indent_string.length};this.print_token=function(a){(a||""!==a)&&(this.output.length&&"\n"===this.output[this.output.length-1])&&(this.print_indentation(this.output),a=a.replace(/^\s+/g,""));this.print_token_raw(a)};this.print_token_raw=function(a){a&&""!==a&&(1<a.length&&"\n"===a[a.length-1]?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(a=0;a<this.newlines;a++)this.print_newline(0<a,this.output);this.newlines=0};this.indent=
function(){this.indent_level++};this.unindent=function(){0<this.indent_level&&this.indent_level--}};return this};for(g.printer(a,n,f,p,t);;){a=g.get_token();g.token_text=a[0];g.token_type=a[1];if("TK_EOF"===g.token_type)break;switch(g.token_type){case "TK_TAG_START":g.print_newline(!1,g.output);g.print_token(g.token_text);g.indent_content&&(g.indent(),g.indent_content=!1);g.current_mode="CONTENT";break;case "TK_TAG_STYLE":case "TK_TAG_SCRIPT":g.print_newline(!1,g.output);g.print_token(g.token_text);
g.current_mode="CONTENT";break;case "TK_TAG_END":"TK_CONTENT"===g.last_token&&""===g.last_text&&(a=g.token_text.match(/\w+/)[0],f=g.output[g.output.length-1].match(/<\s*(\w+)/),null!==f&&f[1]===a||g.print_newline(!1,g.output));g.print_token(g.token_text);g.current_mode="CONTENT";break;case "TK_TAG_SINGLE":(a=g.token_text.match(/^\s*<([a-z]+)/i))&&g.Utils.in_array(a[1],s)||g.print_newline(!1,g.output);g.print_token(g.token_text);g.current_mode="CONTENT";break;case "TK_CONTENT":g.print_token(g.token_text);
g.current_mode="TAG";break;case "TK_STYLE":case "TK_SCRIPT":if(""!==g.token_text){g.print_newline(!1,g.output);a=g.token_text;var r;n=1;"TK_SCRIPT"===g.token_type?r="function"===typeof c&&c:"TK_STYLE"===g.token_type&&(r="function"===typeof h&&h);"keep"===b.indent_scripts?n=0:"separate"===b.indent_scripts&&(n=-g.indent_level);f=g.get_full_indent(n);r?a=r(a.replace(/^\s*/,f),b):(p=a.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(g.indent_string).length-1,n=g.get_full_indent(n-p),a=a.replace(/^\s*/,f).replace(/\r\n|\r|\n/g,
"\n"+n).replace(/\s+$/,""));a&&(g.print_token_raw(f+a.replace(/^\s+|\s+$/g,"")),g.print_newline(!1,g.output))}g.current_mode="TAG"}g.last_token=g.token_type;g.last_text=g.token_text}return g.output.join("")}if("function"===typeof define)define(["./beautify.js","./beautify-css.js"],function(b,c){return{html_beautify:function(k,h){return a(k,h,b,c)}}});else if("undefined"!==typeof exports){var c=require("./beautify.js").js_beautify,b=require("./beautify-css.js").css_beautify;exports.html_beautify=function(d,
e){return a(d,e,c,b)}}else"undefined"!==typeof window?window.html_beautify=function(b,c){return a(b,c,window.js_beautify,window.css_beautify)}:"undefined"!==typeof global&&(global.html_beautify=function(b,c){return a(b,c,global.js_beautify,global.css_beautify)})})();
var expressfs={prefix:"/",rootPath:"",create:function(a,c,b){var d={};d.path=expressfs.rootPath+a;d.content=c||"";$.post(expressfs.prefix+"expressfs.create",d,b)},exists:function(a,c){var b={};b.path=expressfs.rootPath+a;$.post(expressfs.prefix+"expressfs.exists",b,function(a){a.match(/ does NOT exist/)?c(!1):c(!0)})},mkdir:function(a,c){var b={};b.path=expressfs.rootPath+a;$.post(expressfs.prefix+"expressfs.mkdir",b,function(a){c&&c()})},readFile:function(a,c){var b={};b.path=expressfs.rootPath+
a;$.post(expressfs.prefix+"expressfs.readFile",b,function(a){c&&c(a)})},rename:function(a,c,b){var d={};d.oldPath=expressfs.rootPath+a;d.newPath=expressfs.rootPath+c;if(!c)return console.log("No name provided");$.post(expressfs.prefix+"expressfs.rename",d,function(a){b()})},rmdir:function(a,c){var b={};b.path=expressfs.rootPath+a;$.post(expressfs.prefix+"expressfs.rmdir",b,function(a){c()})},unlink:function(a,c){var b={};b.path=expressfs.rootPath+a;$.post(expressfs.prefix+"expressfs.unlink",b,function(a){c()})},
writeFile:function(a,c,b){var d={};d.path=expressfs.rootPath+a;d.content=c;$.post(expressfs.prefix+"expressfs.writeFile",d,function(a){b&&b()})},writeFileAndOpen:function(a,c,b,d){b=$('<form target="'+b+'" method="post" action="'+expressfs.prefix+'expressfs.writeFile"></form>');d=$('<input name="path">');d.val(expressfs.rootPath+a);var e=$('<input name="content">');e.val(c);c=$('<input name="redirect">');c.val(a+"?"+(new Date).getTime());b.append(d);b.append(e);b.append(c);b.submit()},writeFileBase64:function(a,
c,b){var d={};d.path=expressfs.rootPath+a;d.content=c;d.encoding="base64";$.post(expressfs.prefix+"expressfs.writeFile",d,b)}};function Tool(a){this.keys=[];this.values={};this.events={};this._set("name",a);this._open=!1;Tool.tools.push(a);return this}Tool.tools=[];Tool.opened={};Tool.openTool=null;Tool.prototype=new Space;Tool.prototype.close=function(a){if(!this._open)return!1;this.trigger("close");this._open=!1;Tool.openTool=null;$(".Tool").hide();a&&window[a].open()};Tool.prototype.isOpen=function(){return this._open};
Tool.prototype.open=function(){if(this._open)return!1;if(Tool.openTool)return Tool.openTool.close(this.get("name"));Tool.opened[this.get("name")]||this.trigger("once");Tool.opened[this.get("name")]=!0;this.trigger("open");$(".Tool#"+this.get("name")).show();Tool.openTool=this;this._open=!0;this.trigger("ready");mixpanel.track("I opened the "+this.get("name")+" tool");Screen.set("tool",this.get("name"))};Tool.prototype.restart=function(){this.close();this.open()};
Tool.prototype.test=function(){var a=this.get("name");$.get("/nudgepad/tools/"+a+"/tests.html",function(c){$("body").append(c);$("body").append('<script type="text/javascript" src="/nudgepad/tools/'+a+'/tests.js">\x3c/script>')})};Tool.prototype.toggle=function(){this._open?this.close():this.open()};
var Project=new Space,ProjectReceiving=!1,ProjectAppend=function(a,c){if(ProjectReceiving||nudgepad.isTesting)return!0;var b=new Space;b.set("key",a);b.set("value",c.toString());Socket.emit("project.append",b.toString(),function(a){console.log("%s responded to Socket.emit project.append: %s",document.location.host,a)})},ProjectCreate=function(a,c){if(ProjectReceiving)return!0;var b=new Space;b.set("key",a);b.set("value",c.toString());if(nudgepad.isTesting)return null;Socket.emit("project.create",
b.toString(),function(a){console.log("%s responded to Socket.emit project.create: %s",document.location.host,a)})},ProjectDelete=function(a){if(ProjectReceiving)return!0;if(nudgepad.isTesting)return null;Socket.emit("project.delete",a,function(a){console.log("%s responded to Socket.emit project.delete: %s",document.location.host,a)})},ProjectRename=function(a,c){if(ProjectReceiving)return!0;if(nudgepad.isTesting)return null;var b=new Space;b.set("oldName",a);b.set("newName",c);Socket.emit("project.rename",
b.toString(),function(a){console.log("%s responded to Socket.emit project.rename: %s",document.location.host,a)})},ProjectSet=function(a,c){if(ProjectReceiving)return!0;var b=new Space;b.set("key",a);b.set("value",c.toString());if(nudgepad.isTesting)return null;Socket.emit("project.set",b.toString(),function(a){console.log("%s responded to Socket.emit project.set: %s",document.location.host,a)})};Project.on("append",ProjectAppend);Project.on("create",ProjectCreate);Project.on("delete",ProjectDelete);
Project.on("rename",ProjectRename);Project.on("set",ProjectSet);window.console||(window.console={log:function(){}});expressfs.prefix="/nudgepad.";expressfs.rootPath="/nudgepad/projects/"+location.hostname+"/";var nudgepad={isTesting:!1};window.name="nudgepad";var Query=ParseQueryString(),Cookie=parseCookie(document.cookie);
nudgepad.main=function(){$.get("/nudgepad.project",function(a){Project._patch(new Space(a));Project._patch("timelines",new Space);window.addEventListener("popstate",function(a){Launcher.openToolFromQueryString()});nudgepad.warnBeforeReload=!0;window.onbeforeunload=nudgepad.beforeUnload;Launcher.openToolFromQueryString();$("#LoadingScreen").hide();Explorer.downloadTimelines();nudgepad.askToRegister();nudgepad.benchmarkCreationTime();mixpanel.track("I opened NudgePad")})};
nudgepad.askToRegister=function(){Cookie.email==="owner@"+document.location.host&&RegisterForm.open()};nudgepad.beforeUnload=function(a){if(nudgepad.warnBeforeReload)return nudgepad.reloadMessage()};nudgepad.benchmarkCreationTime=function(){if(!Query.newProject&&store.get("opens"))return!0;store.set("opens",1);var a=(new Date).getTime()-Query.timestamp;mixpanel.track("I created a new project",{time:a});console.log("It took %sms to create this project",a)};nudgepad.reloadMessageOneTime="";
nudgepad.reloadMessage=function(){var a;return(a=nudgepad.reloadMessageOneTime)?(nudgepad.reloadMessageOneTime="",a):"Are you sure you want to leave Nudgepad?"};nudgepad.restartCheck=function(){$.get("/nudgepad.started",{},function(a){if(!Project.get("started"))return!0;a!==Project.get("started")&&(nudgepad.reloadMessageOneTime="Your project restarted. Please refresh the page.",location.reload())})};
window.onerror=function(a,c,b){mixpanel.track("I got a javascript error");$(".nudgepad#JavascriptError").prepend("<div>Javascript Error: "+a+"</div>").show();return!1};var Alerts={timeout:!1,error:function(a){$("#AlertsError").html(a);Popup.open("#AlertsError");return!1},success:function(a,c){clearTimeout(Alerts.timeout);$("#Alerts").html(a);Popup.open("#Alerts");$("#Alerts").css("left",($(window).width()-$("#Alerts").width())/2);c&&(Alerts.timeout=setTimeout("$('#Alerts').hide()",c))}};
Alerts.activity=Alerts.success;var Blinker={"default":"NudgePad"};Blinker.blinking=Blinker.default;Blinker.interval=null;Blinker.change=function(a){Blinker.blinking=a};Blinker.blink=function(){if(document.hasFocus())return Blinker.stop();document.title=document.title==Blinker.default?Blinker.blinking:Blinker.default};Blinker.start=function(){clearInterval(Blinker.interval);Blinker.blinking=Blinker.default;Blinker.interval=setInterval(Blinker.blink,2E3)};
Blinker.stop=function(){clearInterval(Blinker.interval);document.title=Blinker.blinking=Blinker.default};$(window).on("blur",Blinker.start);$(window).on("focus",Blinker.stop);var EmailSender=function(){var a=new Space("to \nsubject \nmessage \n");TextPrompt.open("Send an email",a.toString(),function(a){a=new Space(a);$.post("/nudgepad.email",a.keys,function(a){Alerts.success(a)})})},Explorer={paths:{}};Explorer.paths.project="/nudgepad/projects/"+document.location.host+"/";
Explorer.paths.private=Explorer.paths.project+"private/";Explorer.downloadTimelines=function(){$.get("/nudgepad.project.timelines",{},function(a){a=new Space(a);Project.get("timelines")&&Project.get("timelines").patch(a)})};Explorer.edit=function(a){expressfs.readFile(a,function(c){TextPrompt.open("Editing "+a,c,function(b){expressfs.writeFile(a,b.toString(),function(b){b?console.log(b):Alerts.success(a+" saved")})})})};
Explorer.folderToSpace=function(a,c){var b={};b.path=a;$.post("/nudgepad.explorer.folderToSpace",b,function(a){c&&c(a)})};
var Launcher={locked:null,open:function(a,c){if(Launcher.locked)return window[Launcher.locked].open();if(window[a])window[a].open();else return!1;if(c||nudgepad.isTesting)return null;history.pushState(a,"Nudgepad - "+a,"/nudgepad?tool="+a)},openToolFromQueryString:function(){var a=ParseQueryString().tool||"Home";Launcher.open(a,!0)}},Popup={hide:function(a){if(1!==a.which)return!0;$(".nudgepadPopup").hide();$("body").off("mouseup touchend",Popup.hide);Popup.isOpen=!1;return!0},isOpen:!1,open:function(a){$(a).addClass("nudgepadPopup").show();
Popup.isOpen||($("body").on("mouseup touchend",Popup.hide),Popup.isOpen=!0);return!0}},PreviewBox={template:null,close:function(a){$(PreviewBox.template).remove();PreviewBox.template=null},open:function(a){var c=$("#PreviewBoxTemplate").html(),c=$(c.trim());c.find("#PreviewBoxContainer").html(a);c.find("#PreviewBoxWhiteBox").on("click mouseup mousedown slide slidestart slideend",function(a){a.stopPropagation()});c.on("click",function(a){PreviewBox.close()});$("body").append(c);PreviewBox.template=
c},toggle:function(a){PreviewBox.template?PreviewBox.close():PreviewBox.open(a)}},RegisterForm={open:function(){$("#RegisterFormDomain").text(document.location.host).attr("href","http://"+document.location.host);var a=Math.round(($(window).width()-725)/2);0<a&&$("#RegisterFormModal").children().each(function(){$(this).css("left",parseFloat($(this).css("left"))+a+"px");$(this).on("click",function(a){a.stopPropagation()})});$("#RegisterFormModal").show();$("#RegisterFormModal").on("click",function(){$(this).remove()});
$("#RegisterFormButton").on("click",function(){var a=$("#RegisterFormEmail").val();if(!ValidateEmail(a))return Alerts.error("Invalid Email");mixpanel.track("I added my email");$.post("/nudgepad.updateEmail",{email:a,sendWelcomeEmail:"true"},function(){nudgepad.warnBeforeReload=!1;document.location="/nudgepad"})});$("#RegisterFormEmail").focus()}},RelativeToAbsolute=function(a,c){c=c.replace(/\/$/,"")+"/";var b=new Space(a);b.each(function(a,b){b.get("href")&&!b.get("href").match(/^https?\:/i)&&b.set("href",
c+b.get("href"));b.get("src")&&!b.get("src").match(/^https?\:/i)&&b.set("src",c+b.get("src"));b.get("scraps")&&b.set("scraps",RelativeToAbsolute(b.get("scraps"),c))});return b},randomColor=function(){var a="red green violet yellow blue orange indigo".split(" "),c=a.length-1,c=Math.floor(Math.random()*(c-0+1))+0;return a[c]},Screen=new Space;Screen.set("id","screen"+(new Date).getTime());Screen.set("device",platform.name+(platform.product?"/"+platform.product:""));Screen.set("email",Cookie.email);
Screen.set("name",ParseName(Cookie.email));Screen.set("color",randomColor());Screen.set("tool","Home");Screen.on("set",function(a,c){if(nudgepad.isTesting)return null;var b=new Space;b.set("key",Screen.get("id")+" "+a);b.set("value",c);Socket.emit("screens.set",b.toString(),function(a){console.log("%s responded to screens.set: %s",document.location.host,a)})});var Screens=new Space,Socket;
$(document).on("ready",function(){Socket=io.connect("/",{query:$.param(Screen.toObject())});Socket.on("project.append",function(a){a=new Space(a);var c=a.get("key");console.log("project.append received on %s",c);ProjectReceiving=!0;Project.append(c,new Space(a.get("value")));Project.trigger("incoming-append",c,new Space(a.get("value")));ProjectReceiving=!1;Alerts.activity("File "+Space.pathBranch(c)+" appended",1E3)});Socket.on("project.create",function(a){a=new Space(a);var c=a.get("key");console.log("project.create received on %s",
c);ProjectReceiving=!0;Project.create(c,new Space(a.get("value")));ProjectReceiving=!1;Alerts.activity("New file "+c+" received",1E3)});Socket.on("project.delete",function(a){console.log("project.delete received on %s",a);ProjectReceiving=!0;Project.delete(a);ProjectReceiving=!1;Alerts.activity("File "+a+" deleted",1E3)});Socket.on("project.set",function(a){a=new Space(a);var c=a.get("key");console.log("project.set received on %s",c);ProjectReceiving=!0;Project.set(c,new Space(a.get("value")));ProjectReceiving=
!1;Alerts.activity("File "+c+" updated",1E3)});Socket.on("project.rename",function(a){a=new Space(a);var c=a.get("oldName");a=a.get("newName");console.log("project.rename received on %s",c);ProjectReceiving=!0;Project.rename(c,a);ProjectReceiving=!1;Alerts.activity("File "+c+" renamed to "+a,1E3)});Socket.on("screens.create",function(a){a=new Space(a);Screens.set(a.get("id"),a);Alerts.activity(a.get("name")+" opened a new screen",1E3)});Socket.on("screens.delete",function(a){var c=Screens.get(a);
if(!c)return!0;Alerts.activity(c.get("name")+" closed a screen",1E3);Screens.delete(a)});Socket.on("screens.get",function(a){Screens._patch(a)});Socket.on("screens.set",function(a){a=new Space(a);var c=a.get("key");a=a.get("value");Screens.set(c,a)});Socket.on("ack",function(a){$("#ConnectionStatus").hide()});Socket.on("connect",function(){console.log("connected to server: %s",document.location.host);$("#ConnectionStatus").html("Connected!").fadeOut();nudgepad.restartCheck()});Socket.on("connect_failed",
function(a){console.log("Connect failed");console.log(a);$("#ConnectionStatus").html("Connection to server failed...").show()});Socket.on("disconnect",function(a){$("#ConnectionStatus").html("Disconnected from server. Attempting to reconnect...").show()});Socket.on("error",function(a){console.log("Socket error: %s",a);$("#ConnectionStatus").html("Connecting to server...").show()});Socket.on("file",function(a){Project.trigger("file",a)});Socket.on("uploadComplete",function(a){Project.trigger("uploadComplete",
a)})});
var Test={tests:[],add:function(a,c){Test.tests.push(c)},equal:function(a,c){if(a===c)return console.log("PASS.");console.log("FAIL. We wanted %s but we got %s",a,c)},ok:function(a){if(!0===a)return console.log("PASS.");console.log("FAIL. We wanted TRUE but we got %s",a)},start:function(){console.log("Starting tests...");Test.tests.forEach(function(a){a()})}},TextPrompt={callback:function(){},load:function(){var a=$("#TextPromptTextarea"),c=$("#TextPromptSaveButton"),b=$("#TextPromptCancelButton"),d=
$("#TextPromptDimmer");d.on("tap mousedown click slide slidestart slideend mouseup",function(a){a.stopPropagation()});a.on("tap mousedown click slide slidestart slideend mouseup",function(a){a.stopPropagation()});d.on("click",TextPrompt.close);b.on("click",TextPrompt.close);c.on("click",function(){if(!1===TextPrompt.callback(a.val()))return!0;TextPrompt.close()})},close:function(){$(".TextPrompt").hide();if(!TextPrompt.onclose)return null;TextPrompt.onclose();TextPrompt.onclose=null},open:function(a,
c,b){TextPrompt.callback=b;$(".TextPrompt").show();$("#TextPromptTextarea").val(c).focus()}};$(document).on("ready",TextPrompt.load);var Ace=new Tool("Ace");Ace.set("description","Edit your project files with Ace.");Ace.set("beta",!0);Ace.on("once",function(){AppendScript("/nudgepad/public/js/ace/ace.js",function(){var a=ace.edit("AceEditor");a.setTheme("ace/theme/monokai");a.getSession().setMode("ace/mode/javascript")})});var QRCode;
(function(){function a(a){this.mode=h.MODE_8BIT_BYTE;this.data=a}function c(a,b){this.typeNumber=a;this.errorCorrectLevel=b;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}function b(a,b){if(void 0==a.length)throw Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function d(a,b){this.totalCount=a;this.dataCount=b}function e(){this.buffer=[];this.length=0}function k(){var a=!1,b=navigator.userAgent;
/android/i.test(b)&&(a=!0,(aMat=b.toString().match(/android ([0-9]\.[0-9])/i))&&aMat[1]&&(a=parseFloat(aMat[1])));return a}a.prototype={getLength:function(a){return this.data.length},write:function(a){for(var b=0;b<this.data.length;b++)a.put(this.data.charCodeAt(b),8)}};c.prototype={addData:function(b){b=new a(b);this.dataList.push(b);this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},
make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,b){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[d][e]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(a,
b);7<=this.typeNumber&&this.setupTypeNumber(a);null==this.dataCache&&(this.dataCache=c.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,b)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=0<=c&&6>=c&&(0==d||6==d)||0<=d&&6>=d&&(0==c||6==c)||2<=c&&4>=c&&2<=d&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,
c);var d=f.getLostPoint(this);if(0==c||a>d)a=d,b=c}return b},createMovieClip:function(a,b,c){a=a.createEmptyMovieClip(b,c);this.make();for(b=0;b<this.modules.length;b++){c=1*b;for(var d=0;d<this.modules[b].length;d++){var e=1*d;this.modules[b][d]&&(a.beginFill(0,100),a.moveTo(e,c),a.lineTo(e+1,c),a.lineTo(e+1,c+1),a.lineTo(e,c+1),a.endFill())}}return a},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-
8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=f.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var g=-2;2>=g;g++)for(var h=-2;2>=h;h++)this.modules[d+g][e+h]=-2==g||2==g||-2==h||2==h||0==g&&0==h?!0:!1}},setupTypeNumber:function(a){for(var b=f.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(b>>c&1);this.modules[Math.floor(c/3)][c%3+this.moduleCount-
8-3]=d}for(c=0;18>c;c++)d=!a&&1==(b>>c&1),this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d},setupTypeInfo:function(a,b){for(var c=f.getBCHTypeInfo(this.errorCorrectLevel<<3|b),d=0;15>d;d++){var e=!a&&1==(c>>d&1);6>d?this.modules[d][8]=e:8>d?this.modules[d+1][8]=e:this.modules[this.moduleCount-15+d][8]=e}for(d=0;15>d;d++)e=!a&&1==(c>>d&1),8>d?this.modules[8][this.moduleCount-d-1]=e:9>d?this.modules[8][15-d-1+1]=e:this.modules[8][15-d-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,
b){for(var c=-1,d=this.moduleCount-1,e=7,g=0,h=this.moduleCount-1;0<h;h-=2)for(6==h&&h--;;){for(var k=0;2>k;k++)if(null==this.modules[d][h-k]){var n=!1;g<a.length&&(n=1==(a[g]>>>e&1));f.getMask(b,d,h-k)&&(n=!n);this.modules[d][h-k]=n;e--; -1==e&&(g++,e=7)}d+=c;if(0>d||this.moduleCount<=d){d-=c;c=-c;break}}}};c.PAD0=236;c.PAD1=17;c.createData=function(a,b,g){b=d.getRSBlocks(a,b);for(var h=new e,k=0;k<g.length;k++){var n=g[k];h.put(n.mode,4);h.put(n.getLength(),f.getLengthInBits(n.mode,a));n.write(h)}for(k=
a=0;k<b.length;k++)a+=b[k].dataCount;if(h.getLengthInBits()>8*a)throw Error("code length overflow. ("+h.getLengthInBits()+">"+8*a+")");for(h.getLengthInBits()+4<=8*a&&h.put(0,4);0!=h.getLengthInBits()%8;)h.putBit(!1);for(;!(h.getLengthInBits()>=8*a);){h.put(c.PAD0,8);if(h.getLengthInBits()>=8*a)break;h.put(c.PAD1,8)}return c.createBytes(h,b)};c.createBytes=function(a,c){for(var d=0,e=0,g=0,h=Array(c.length),k=Array(c.length),n=0;n<c.length;n++){var q=c[n].dataCount,p=c[n].totalCount-q,e=Math.max(e,
q),g=Math.max(g,p);h[n]=Array(q);for(var s=0;s<h[n].length;s++)h[n][s]=255&a.buffer[s+d];d+=q;s=f.getErrorCorrectPolynomial(p);q=(new b(h[n],s.getLength()-1)).mod(s);k[n]=Array(s.getLength()-1);for(s=0;s<k[n].length;s++)p=s+q.getLength()-k[n].length,k[n][s]=0<=p?q.get(p):0}for(s=n=0;s<c.length;s++)n+=c[s].totalCount;d=Array(n);for(s=q=0;s<e;s++)for(n=0;n<c.length;n++)s<h[n].length&&(d[q++]=h[n][s]);for(s=0;s<g;s++)for(n=0;n<c.length;n++)s<k[n].length&&(d[q++]=k[n][s]);return d};for(var h={MODE_NUMBER:1,
MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},g={L:1,M:0,Q:3,H:2},f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,
86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;0<=f.getBCHDigit(b)-f.getBCHDigit(f.G15);)b^=f.G15<<f.getBCHDigit(b)-f.getBCHDigit(f.G15);return(a<<10|b)^f.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;0<=f.getBCHDigit(b)-f.getBCHDigit(f.G18);)b^=f.G18<<f.getBCHDigit(b)-
f.getBCHDigit(f.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return f.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case 0:return 0==(b+c)%2;case 1:return 0==b%2;case 2:return 0==c%3;case 3:return 0==(b+c)%3;case 4:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case 5:return 0==b*c%2+b*c%3;case 6:return 0==(b*c%2+b*c%3)%2;case 7:return 0==(b*c%3+(b+c)%2)%2;default:throw Error("bad maskPattern:"+a);}},getErrorCorrectPolynomial:function(a){for(var c=
new b([1],0),d=0;d<a;d++)c=c.multiply(new b([1,n.gexp(d)],0));return c},getLengthInBits:function(a,b){if(1<=b&&10>b)switch(a){case h.MODE_NUMBER:return 10;case h.MODE_ALPHA_NUM:return 9;case h.MODE_8BIT_BYTE:return 8;case h.MODE_KANJI:return 8;default:throw Error("mode:"+a);}else if(27>b)switch(a){case h.MODE_NUMBER:return 12;case h.MODE_ALPHA_NUM:return 11;case h.MODE_8BIT_BYTE:return 16;case h.MODE_KANJI:return 10;default:throw Error("mode:"+a);}else if(41>b)switch(a){case h.MODE_NUMBER:return 14;
case h.MODE_ALPHA_NUM:return 13;case h.MODE_8BIT_BYTE:return 16;case h.MODE_KANJI:return 12;default:throw Error("mode:"+a);}else throw Error("type:"+b);},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;d<b;d++)for(var e=0;e<b;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||b<=d+h))for(var k=-1;1>=k;k++)0>e+k||b<=e+k||0==h&&0==k||g!=a.isDark(d+h,e+k)||f++;5<f&&(c+=3+f-5)}for(d=0;d<b-1;d++)for(e=0;e<b-1;e++)if(f=0,a.isDark(d,e)&&f++,a.isDark(d+1,e)&&f++,a.isDark(d,e+1)&&f++,
a.isDark(d+1,e+1)&&f++,0==f||4==f)c+=3;for(d=0;d<b;d++)for(e=0;e<b-6;e++)a.isDark(d,e)&&(!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6))&&(c+=40);for(e=0;e<b;e++)for(d=0;d<b-6;d++)a.isDark(d,e)&&(!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e))&&(c+=40);for(e=f=0;e<b;e++)for(d=0;d<b;d++)a.isDark(d,e)&&f++;a=Math.abs(100*f/b/b-50)/5;return c+10*a}},n={glog:function(a){if(1>a)throw Error("glog("+
a+")");return n.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;256<=a;)a-=255;return n.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},p=0;8>p;p++)n.EXP_TABLE[p]=1<<p;for(p=8;256>p;p++)n.EXP_TABLE[p]=n.EXP_TABLE[p-4]^n.EXP_TABLE[p-5]^n.EXP_TABLE[p-6]^n.EXP_TABLE[p-8];for(p=0;255>p;p++)n.LOG_TABLE[n.EXP_TABLE[p]]=p;b.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var c=Array(this.getLength()+a.getLength()-1),d=0;d<
this.getLength();d++)for(var e=0;e<a.getLength();e++)c[d+e]^=n.gexp(n.glog(this.get(d))+n.glog(a.get(e)));return new b(c,0)},mod:function(a){if(0>this.getLength()-a.getLength())return this;for(var c=n.glog(this.get(0))-n.glog(a.get(0)),d=Array(this.getLength()),e=0;e<this.getLength();e++)d[e]=this.get(e);for(e=0;e<a.getLength();e++)d[e]^=n.gexp(n.glog(a.get(e))+c);return(new b(d,0)).mod(a)}};d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],
[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,
2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,
43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],
[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],
[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],
[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];d.getRSBlocks=function(a,b){var c=d.getRsBlockTable(a,b);if(void 0==c)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var e=c.length/3,f=[],g=0;g<e;g++)for(var h=c[3*g+0],k=c[3*g+1],n=c[3*g+2],p=0;p<h;p++)f.push(new d(k,n));return f};
d.getRsBlockTable=function(a,b){switch(b){case g.L:return d.RS_BLOCK_TABLE[4*(a-1)+0];case g.M:return d.RS_BLOCK_TABLE[4*(a-1)+1];case g.Q:return d.RS_BLOCK_TABLE[4*(a-1)+2];case g.H:return d.RS_BLOCK_TABLE[4*(a-1)+3]}};e.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,b){for(var c=0;c<b;c++)this.putBit(1==(a>>>b-c-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0);
a&&(this.buffer[b]|=128>>>this.length%8);this.length++}};var t=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,
751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],s="undefined"==typeof CanvasRenderingContext2D?function(){var a=function(a,b){this._el=a;this._htOption=b};a.prototype.draw=function(a){for(var b=this._htOption,c=this._el,d=a.getModuleCount(),e=Math.floor(b.width/
d),f=Math.floor(b.height/d),g=['<table style="border:0;border-collapse:collapse;">'],h=0;h<d;h++){g.push("<tr>");for(var k=0;k<d;k++)g.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+e+"px;height:"+f+"px;background-color:"+(a.isDark(h,k)?b.colorDark:b.colorLight)+';"></td>');g.push("</tr>")}g.push("</table>");c.innerHTML=g.join("");a=c.childNodes[0];c=(b.width-a.offsetWidth)/2;b=(b.height-a.offsetHeight)/2;0<c&&0<b&&(a.style.margin=b+"px "+c+"px")};a.prototype.clear=
function(){this._el.innerHTML=""};return a}():function(){function a(){this._elImage.src=this._elCanvas.toDataURL("image/png");this._elImage.style.display="block";this._elCanvas.style.display="none"}function b(a,c){var d=this;d._fFail=c;d._fSuccess=a;if(null===d._bSupportDataURI){var e=document.createElement("img"),f=function(){d._bSupportDataURI=!1;d._fFail&&_fFail.call(d)};e.onabort=f;e.onerror=f;e.onload=function(){d._bSupportDataURI=!0;d._fSuccess&&d._fSuccess.call(d)};e.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="}else!0===
d._bSupportDataURI&&d._fSuccess?d._fSuccess.call(d):!1===d._bSupportDataURI&&d._fFail&&d._fFail.call(d)}if(this._android&&2.1>=this._android){var c=1/window.devicePixelRatio,d=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(a,b,e,f,g,h,k,n,m){if("nodeName"in a&&/img/i.test(a.nodeName))for(var p=arguments.length-1;1<=p;p--)arguments[p]*=c;else"undefined"==typeof n&&(arguments[1]*=c,arguments[2]*=c,arguments[3]*=c,arguments[4]*=c);d.apply(this,arguments)}}var e=
function(a,b){this._bIsPainted=!1;this._android=k();this._htOption=b;this._elCanvas=document.createElement("canvas");this._elCanvas.width=b.width;this._elCanvas.height=b.height;a.appendChild(this._elCanvas);this._el=a;this._oContext=this._elCanvas.getContext("2d");this._bIsPainted=!1;this._elImage=document.createElement("img");this._elImage.style.display="none";this._el.appendChild(this._elImage);this._bSupportDataURI=null};e.prototype.draw=function(a){var b=this._elImage,c=this._oContext,d=this._htOption,
e=a.getModuleCount(),f=d.width/e,g=d.height/e,h=Math.round(f),k=Math.round(g);b.style.display="none";this.clear();for(b=0;b<e;b++)for(var n=0;n<e;n++){var m=a.isDark(b,n),r=n*f,p=b*g;c.strokeStyle=m?d.colorDark:d.colorLight;c.lineWidth=1;c.fillStyle=m?d.colorDark:d.colorLight;c.fillRect(r,p,f,g);c.strokeRect(Math.floor(r)+0.5,Math.floor(p)+0.5,h,k);c.strokeRect(Math.ceil(r)-0.5,Math.ceil(p)-0.5,h,k)}this._bIsPainted=!0};e.prototype.makeImage=function(){this._bIsPainted&&b.call(this,a)};e.prototype.isPainted=
function(){return this._bIsPainted};e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height);this._bIsPainted=!1};e.prototype.round=function(a){return a?Math.floor(1E3*a)/1E3:a};return e}();QRCode=function(a,b){this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:g.H};"string"===typeof b&&(b={text:b});if(b)for(var c in b)this._htOption[c]=b[c];"string"==typeof a&&(a=document.getElementById(a));this._android=
k();this._el=a;this._oQRCode=null;this._oDrawing=new s(this._el,this._htOption);this._htOption.text&&this.makeCode(this._htOption.text)};QRCode.prototype.makeCode=function(a){for(var b=1,d=0,e=t.length;d<=e;d++){var f=0;switch(this._htOption.correctLevel){case g.L:f=t[d][0];break;case g.M:f=t[d][1];break;case g.Q:f=t[d][2];break;case g.H:f=t[d][3]}if(a.length<=f)break;else b++}if(b>t.length)throw Error("Too long data");this._oQRCode=new c(b,this._htOption.correctLevel);this._oQRCode.addData(a);this._oQRCode.make();
this._el.title=a;this._oDrawing.draw(this._oQRCode);this.makeImage()};QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||3<=this._android)&&this._oDrawing.makeImage()};QRCode.prototype.clear=function(){this._oDrawing.clear()};QRCode.CorrectLevel=g})();var AppMaker=new Tool("AppMaker");AppMaker.set("description","Make your project a FirefoxOS app.");AppMaker.set("beta","true");
AppMaker.on("open",function(){AppMaker.install();$("#AppMakerManifestUrlLink").html("http://"+document.location.host+"/manifest.webapp");$("#AppMakerStage").html('<iframe src="/" width="100%" height="100%"></iframe>');$("#AppMakerStage").droppable({drop:function(a,c){var b=$("#"+$(c.draggable).attr("value")).clone();$(this).append(b);b.show()}});$("#AppMakerStage").selectable();$(".DraggableThumb").draggable({helper:"clone"});Events.shortcut.shortcuts=AppMaker.shortcuts;$(".AppMakerContainer").on("click",
function(){$(".ui-selected").removeClass("ui-selected")})});AppMaker.on("close",function(){Events.shortcut.shortcuts={}});
AppMaker.install=function(){$.ajax({url:"/nudgepad/tools/appmaker/manifest.webapp",type:"get",dataType:"text"}).done(function(a,c,b){expressfs.create("manifest.webapp",a.toString(),function(a){console.log(a);a?console.log(a):Alerts.success("Manifest Created")})});$.ajax({url:"/nudgepad/tools/appmaker/install.html",type:"get",dataType:"text"}).done(function(a,c,b){expressfs.create("install.html",a.toString(),function(a){console.log(a);a?console.log(a):Alerts.success("Install File Created")})})};
AppMaker.selectText=function(a){if(document.selection){var c=document.body.createTextRange();c.moveToElementText(document.getElementById(a));c.select()}else window.getSelection&&(c=document.createRange(),c.selectNode(document.getElementById(a)),window.getSelection().addRange(c))};AppMaker.qrCode=function(a){PreviewBox.open('<div id="qrCode">');new QRCode("qrCode",{text:"http://"+document.location.host+"/",width:512,height:512,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})};
AppMaker.shortcuts={};AppMaker.shortcuts.backspace=function(){$(".ui-selected").remove()};AppMaker.shortcuts["delete"]=function(){$(".ui-selected").remove()};var Backup=new Tool("Backup");Backup.set("description","Backup your project.");Backup.on("open",function(){$("#BackupDownload").attr("href","/nudgepad.backup/"+document.location.host+".zip")});var Blog=new Tool("Blog");Blog.set("description","Add a blog to your project.");Blog.set("posts",new Space);Blog.active={};Blog.active.filename=null;
Blog.active.advanced=function(){var a=Blog.get("posts "+Blog.active.filename);TextPrompt.open("Advanced",a.toString(),function(c){a.patch(c);a.save();Blog.active.open(Blog.active.filename)})};Blog.active.close=function(){Blog.active.filename=null;$("#BlogEditorColumn").hide()};Blog.active.delete=function(){var a=Blog.active.filename;Blog.active.close();Blog.get("posts "+a).trash();Blog.trigger("posts")};
Blog.active.highlight=function(a){$(".BlogActivePost").removeClass("BlogActivePost");$("#BlogPosts div").each(function(){$(this).attr("filename")===a&&$(this).addClass("BlogActivePost")})};Blog.active.open=function(a){Blog.active.filename=a;var c=Blog.get("posts "+a);$("#BlogTitle").val(c.get("title"));$("#BlogContent").val(c.get("content"));$("#BlogEditorColumn").show();Blog.active.highlight(a);$("#BlogTitle").focus();document.execCommand("selectAll",!1,null)};
Blog.active.publish=function(){var a=Blog.get("posts "+Blog.active.filename);if(a.get("permalink"))c=a.get("permalink");else{var c=$("#BlogTitle").val(),c=Blog.permalink(c);a.set("permalink",c)}var b=$("#BlogTemplate").val(),b=Project.get("pages "+b)?Project.get("pages "+b):$("#BlogDefaultTemplate").text(),a=Blog.press(a.toString(),b.toString());expressfs.writeFileAndOpen(c,a,"published")};
Blog.active.save=function(){var a=Blog.get("posts "+Blog.active.filename);a.set("title",$("#BlogTitle").val());a.set("content",$("#BlogContent").val());a.save();Blog.trigger("posts")};Blog.active.updateTitle=function(){$(".BlogActivePost").text($("#BlogTitle").val())};Blog.create=function(){expressfs.mkdir("private/posts");var a=(new Date).getTime(),c=a+".space",b=new Blog.Post(c);b.set("timestamp",a);b.set("title","Untitled");b.save();Blog.set("posts "+c,b,0);Blog.trigger("posts");Blog.active.open(c)};
Blog.permalink=function(a){return a?a.toLowerCase().replace(/[^a-z0-9- _\.]/gi,"").replace(/ /g,"-")+".html":""};
Blog.press=function(a,c){var b=new Space(a),d=(new Page(c)).toHtml(function(){this.div.content=this.div.content.replace("Blog Post Content",b.get("content"));"markdown"===this.get("content_format")&&(this.div.content=marked(this.div.content));return this.div.toHtml()}),d=d.replace(/Blog Post Title/g,b.get("title")),e=parseFloat(b.get("timestamp")),e=moment(e).format("MMMM Do YYYY, h:mm:ss a"),d=d.replace(/Blog Post Date/g,e);return d=html_beautify(d)};
Blog.downloadPosts=function(){Explorer.folderToSpace("private/posts",function(a){a=new Space(a);a.keys=a.keys.sort(function(a,b){return b>a});a.each(function(a,b){Blog.set("posts "+a,new Blog.Post(a,b))});Blog.trigger("posts")})};Blog.listPosts=function(){var a=Blog.get("posts");$("#BlogPosts").html("");a.each(function(a,b){var d=$("<div></div>");d.html(b.get("title"));d.on("click",function(){Blog.active.open(a)});d.attr("filename",a);$("#BlogPosts").append(d)});Blog.active.highlight(Blog.active.filename)};
Blog.on("open",Blog.downloadPosts);Blog.on("posts",Blog.listPosts);Blog.Post=function(a,c){this.clear();this._filename=a;c&&this.patch(c);return this};Blog.Post.prototype=new Space;Blog.Post.prototype.save=function(){expressfs.writeFile("private/posts/"+this._filename,this.toString(),function(){Alerts.success("Saved")})};Blog.Post.prototype.trash=function(){expressfs.unlink("private/posts/"+this._filename,function(){Alerts.success("Deleted")});Blog.delete("posts "+this._filename)};var Crawler=new Tool("Crawler");
Crawler.set("description","Crawl existing webpages.");Crawler.set("beta",!0);Crawler.urls=new Space;
Crawler.download=function(){if(Crawler.current>Crawler.max)return!1;var a=Crawler.urls.shift();if(!a)return!1;var c=a.toString().split(/ /)[0],b=a.toString().split(/ /)[1];$.ajax({url:"/nudgepad.proxy",type:"POST",timeout:1E4,data:{url:c}}).done(function(a){Crawler.fetched.set(c,!0);console.log("Downloaded: %s",c);var e=document.createElement("a");e.href=c;e.hostname;var k=$.htmlToScraps(a);if(!k)return Crawler.download();k.find("tag","a").each(function(a,c){if(!b)return!0;var d=c.get("href");if(d.match(/^mailto\:/))return!0;
d.match(/^https?\:\/\//)||(d=e.protocol+"//"+e.hostname+"/"+d);var h=document.createElement("a");h.href=d;if(h.hostname!==e.hostname||Crawler.fetched.get(d))return!0;Crawler.urls.set(d,b-1);console.log("Added to queue: %s",c.get("href"))});var h=e.pathname.replace(/\//g,"");""===h&&(h="index.html");expressfs.writeFile(h,a,function(){console.log("Saved: %s",h);Alerts.success("Downloaded "+c);Crawler.download()})}).fail(function(a){Crawler.download()});Crawler.current++};
Crawler.start=function(){Crawler.urls=new Space($("#CrawlCode").val());Crawler.max=100;Crawler.current=0;Crawler.fetched=new Space;Crawler.download()};var Designer=new Tool("Designer");Designer.set("description","Design pages for your project.");Designer.page=new Page;Designer.edge=new Space;Designer.stage={};Designer.stage.activePage=null;Designer.menu={};Designer.stage.selection={};Designer.blurThis=function(){$(this).blur()};Designer.stopProp=function(a){a.stopPropagation()};
Designer.stopPropagation=function(a){1<a.originalEvent.touches.length&&a.stopPropagation()};Designer.preventDefault=function(a){1==a.originalEvent.touches.length&&a.preventDefault()};Designer.returnFalse=function(){return!1};Designer.autokey=function(a,c){c=c||"";if(!a.get(c))return c;for(var b=2;a.get(c+b.toString());)b++;return c+b.toString()};
Designer.on("firstOpen",function(){$("#DesignerImageTab").on("click",function(){$("#DesignerComponentsRibbon").hide();$("#DesignerImagesRibbon").toggle()});$("#DesignerComponentsTab").on("click",function(){$("#DesignerImagesRibbon").hide();$("#DesignerComponentsRibbon").toggle()});$("#DesignerBarMenuButton").on("mousedown",function(a){if(0<$("#DesignerMenu:visible").length)return Popup.hide(a),!0;Popup.open("#DesignerMenu");mixpanel.track("I opened the designer menu")});$("#DesignerBarMenuButton").on("mouseup",
function(a){a.stopPropagation();return!1});$("#DesignerBar").on("slide slidestart",function(a){a.stopPropagation()})});Designer.dragComponent=function(){var a=$(this).attr("path");Designer.stage.dragAndDrop(Designer.components.get(a));mixpanel.track("I dragged a component")};
Designer.loadComponents=function(){Designer.components=new Space;var a=$("#DesignerComponentsList");a.html("");$(".DesignerComponentSet").each(function(){var c=$(this).attr("path"),b=new Space($(this).text()),d=$((new Scrap(c,b.get("thumb"))).toHtml());d.attr("path",c);d.addClass("DesignerComponent");d.removeClass("DesignerScrap");b.delete("thumb");Designer.components.set(c,b);a.append(d)})};
Designer.tapComponent=function(){var a=$(this).attr("path");Designer.stage.insert(Designer.components.get(a),!1,0,0,!0);mixpanel.track("I tapped a component")};Designer.on("ready",Designer.loadComponents);Designer.on("firstOpen",function(){$("#DesignerComponentsList").on("tap",".DesignerComponent",Designer.tapComponent);$("#DesignerComponentsList").on("slidestart",".DesignerComponent",Designer.dragComponent);$("#DesignerComponentsRibbon").on("mousedown slide slidestart",Designer.stopProp)});
Designer.contentEditor={};Designer.contentEditor.onblur=function(){$(this).scrap().set("content",$(this).html());$(this).off("tap mousedown slide slidestart hold slideend",Designer.contentEditor.killEvent);$(this).removeAttr("contenteditable");Designer.stage.commit();Designer.broadcastSelection()};
Designer.contentEditor.focus=function(a,c){Designer.stage.selection.clear();var b=$(a),d=b.scrap();if(!d.isContentEditable()){var e="content",k=d.get("tag");k&&k.match(/^(textarea|input|password)$/)&&(e="placeholder");TextPrompt.open("Editing content for this block",d.get(e),function(a){d.set(e,a);Designer.stage.commit();b.remove();d.render().element().selectMe()});return null}Designer.broadcastSelection(d.selector());b.attr("contenteditable","true");b.on("tap slide slidestart hold slideend",Designer.contentEditor.killEvent);
b.on("blur",Designer.contentEditor.onblur);b.focus();MoveCursorToEnd(b[0]);c&&document.execCommand("selectAll",!1,null)};Designer.contentEditor.killEvent=function(a){Designer.Mouse.down.stopPropagation();return!1};Designer.EditHandle={};
Designer.EditHandle.create=function(a){var c=a.element(),b=$('<div class="DesignerEditHandle"></div>');b.attr("value",a.getPath());b.addClass("DesignerHandle");b.addClass("editHandle");b.addClass(a.id+"Handle");var d=$('<div class="DesignerEditStyleHandle"></div>');d.on("tap",function(){Designer.styleEditor.edit(a);b.remove();return!1});b.append(d);Designer.advanced&&(d=$('<div class="">%</div>'),d.on("tap",function(){a.get("style width")&&a.get("style width").match("%")?a.toPixels():a.toPercentage();
Designer.stage.commit();c.deselect();return!1}),b.append(d),d=$('<div class="">Pos</div>'),d.on("tap",function(){"absolute"===a.get("style position")?a.toRelative():a.toAbsolute();Designer.stage.commit();c.deselect();return!1}),b.append(d));c.parent().append(b);b.on("update",Designer.EditHandle.update);b.trigger("update")};Designer.EditHandle.update=function(){var a=$(this).owner();$(this).css({left:a.position().left+2+"px",top:a.position().top+a.outerHeight(!0)+4+"px"})};
function Grid(a){this.points={};this.radius=7;this.snapToObjects=!0;this.snapToGrid=!1;this.snapToContainer=!0;this.horizontalSpacing=this.verticalSpacing=20;this.on=this.snaplines=!0;this.visible=!1;if(a)for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c])}
Grid.prototype.addDynamicPoints=function(){var a=this;if(200<$("#DesignerStageBody #body").children(".DesignerScrap:not(."+Designer.stage.selection.className+")").length)return!0;$("#DesignerStageBody #body").children(".DesignerScrap:not(."+Designer.stage.selection.className+")").each(function(){var c=$(this).scrap();c&&a.addPoints(c.selector())})};
Grid.prototype.addFixedPoints=function(){var a=$("#DesignerStageBody").position().left,c=$("#DesignerStageBody").position().left+$("#DesignerStageBody").outerWidth();for(this.horizontalSpacing=parseFloat(this.horizontalSpacing);a<=c;a+=this.horizontalSpacing)this.addPoint(a,0,"#DesignerStageBody");a=$("#DesignerStageBody").position().top;c=$("#DesignerStageBody").position().top+$("#DesignerStageBody").outerHeight();for(this.verticalSpacing=parseFloat(this.verticalSpacing);a<=c;a+=this.verticalSpacing)this.addPoint(0,
a,"#DesignerStageBody")};Grid.prototype.addPoint=function(a,c,b){var d={};d.x=a;d.y=c;d.selector=b;this.points[a+"."+c]=d};Grid.prototype.addPoints=function(a){var c=$(a);if(!c.length)return console.log("not found %s",a);this.addPoint(c.position().left,c.position().top,a);var b=Math.round(c.position().top+Math.round(c.outerHeight()/2)),d=Math.round(c.position().left+Math.round(c.outerWidth()/2));this.addPoint(d,b,a);this.addPoint(c.position().left+c.outerWidth(),c.position().top+c.outerHeight(),a)};
Grid.prototype.create=function(){this.points={};if(!this.on)return this.erase();this.snapToObjects&&this.addDynamicPoints();this.snapToGrid&&this.addFixedPoints();this.snapToContainer&&(this.addPoint($("#DesignerStageBody").outerWidth(),0,"#DesignerStageBody"),this.addPoint(Math.round($("#DesignerStageBody").outerWidth()/2),0,"#DesignerStageBody"),this.addPoint(0,0,"#DesignerStageBody"),this.addPoint(0,$("#DesignerStageBody").height(),"#DesignerStageBody"),this.addPoint(0,Math.round($(window).height()/
2),"#DesignerStageBody"));this.visible?this.draw():this.erase()};
Grid.prototype.draw=function(){var a=$("#DesignerStageBody").width(),c=$("#DesignerStageBody").height();this.context&&this.erase();var b='<canvas style="position: absolute; top: 0; left: 0; z-index: 0;" id="grid_canvas" width="'+a+'" height="'+c+'"></canvas>';$("#DesignerStageBody").append(b);this.context=document.getElementById("grid_canvas").getContext("2d");this.context.strokeStyle="#eee";var d,b={};d={};for(var e in this.points)if(this.points.hasOwnProperty(e)){var k=this.points[e];"#DesignerStageBody"===
k.selector&&(this.context.lineWidth=0.5,k.x in b||(this.context.beginPath(),this.context.moveTo(k.x+0.5,0),this.context.lineTo(k.x+0.5,c),this.context.closePath(),this.context.stroke(),b[k.x]=!0),k.y in d||(this.context.beginPath(),this.context.moveTo(0,k.y+0.5),this.context.lineTo(a,k.y+0.5),this.context.closePath(),this.context.stroke(),d[k.y]=!0))}};
Grid.prototype.drawSnapline=function(a,c){if(!this.snaplines)return!1;this.drawSnaplineCanvas();this.snaplineContext.beginPath();this.snaplineContext.lineWidth=1;this.snaplineContext.moveTo(a.x+0.5,a.y+0.5);this.snaplineContext.lineTo(c.x+0.5,c.y+0.5);this.snaplineContext.stroke();this.snaplineContext.moveTo(a.x,a.y);this.snaplineContext.beginPath();this.snaplineContext.arc(a.x,a.y,2,0,2*Math.PI,!0);this.snaplineContext.closePath();this.snaplineContext.fill();this.snaplineContext.moveTo(c.x,c.y);
this.snaplineContext.beginPath();this.snaplineContext.arc(c.x,c.y,2,0,2*Math.PI,!0);this.snaplineContext.closePath();this.snaplineContext.fill();"#DesignerStageBody"!==c.selector&&$(c.selector).addClass("GridSnapOrigin")};
Grid.prototype.drawSnaplineCanvas=function(){if(this.snaplineContext)return!0;this.width=$("#DesignerStageBody").width();this.height=$("#DesignerStageBody").height();var a='<canvas style="position: absolute; top: 0; left: 0; z-index: 100;" id="snaplineCanvas" width="'+this.width+'" height="'+this.height+'"></canvas>';$("#DesignerStageBody").append(a);this.snaplineContext=document.getElementById("snaplineCanvas").getContext("2d");this.snaplineContext.lineWidth=1;this.snaplineContext.strokeStyle="blue";
$("#snaplineCanvas").on("mousedown",function(){$(this).remove()})};Grid.prototype.erase=function(){delete this.context;delete this.snaplineContext;$("#grid_canvas,#snaplineCanvas").remove();$(".GridSnapOrigin").removeClass("GridSnapOrigin")};Grid.prototype.eraseSnaplines=function(){if(!this.snaplines)return!1;$(".GridSnapOrigin").removeClass("GridSnapOrigin");if(!this.snaplineContext)return!1;this.snaplineContext.clearRect(0,0,this.width,this.height)};
Grid.prototype.getDelta=function(a){this.eraseSnaplines();var c={},b=[],d=[],e;for(e in a){var k=a[e],h;for(h in this.points)if(this.points.hasOwnProperty(h)){var g=this.points[h],f=g.x-k.x,n=g.y-k.y;c.x||(c.x=f,c.y=n);Math.abs(f)<=Math.abs(c.x)&&(c.x=f,b=[k,g]);Math.abs(n)<=Math.abs(c.y)&&(c.y=n,d=[k,g])}}a=Math.abs(c.x)<this.radius;e=Math.abs(c.y)<this.radius;a||(c.x=0);e||(c.y=0);a&&(b[0]={x:b[0].x+c.x,y:b[0].y+c.y},this.drawSnapline(b[0],b[1]));e&&(d[0]={x:d[0].x+c.x,y:d[0].y+c.y},this.drawSnapline(d[0],
d[1]));return c};Grid.prototype.removeSnaplines=function(){delete this.snaplineContext;$("#snaplineCanvas").remove();$(".GridSnapOrigin").removeClass("GridSnapOrigin")};Designer.images={};Designer.images.getFilename=function(a){a=Designer.images.parseBackgroundUrl(a).split(/\//);return a[a.length-1]};
Designer.images.insertImageScrap=function(a,c){a.match(/^url\(/)&&(a=Designer.images.parseBackgroundUrl(a));if(!c&&0<Designer.stage.selection.elements().length)return Designer.stage.selection.css("background-image url("+a+")"),Designer.stage.selection.css("background-repeat no-repeat"),Designer.stage.selection.css("background-position center"),!1;$("<img/>").attr("src",a).load(function(){var b=new Space("style\n background-image url("+a+")\n background-repeat no-repeat\n background-color transparent\n background-position center\n background-size contain\n width "+
this.width+"px\n height "+this.height+"px"),b=(new Space).set("scrap",b);return Designer.stage.insert(b,c)})};Designer.images.isImage=function(a){return a.match(/\.(png|jpg|jpeg|gif)$/i)};Designer.images.parseBackgroundUrl=function(a){return a.split(/(\(|\))/).slice(2)[0]};
Designer.images.updateList=function(){$("#DesignerImagesList").html("");$.get("/nudgepad.explorer.public",{},function(a){(new Space(a)).each(function(a,b){Designer.images.isImage(a)&&$("#DesignerImagesList").append('<div class="DesignerImageComponent">&nbsp;<img src="/'+a+'">&nbsp;</div>')})})};Designer.on("open",function(){Project.on("file",Designer.images.updateList)});Designer.on("close",function(){Project.off("file",Designer.images.updateList)});
Designer.on("firstOpen",function(){$("#DesignerImagesList").on("tap",".DesignerImageComponent img",function(){var a=$("#DesignerStage").height()/2-130;Designer.stage.insert("images\n style\n  position absolute\n  top "+a+"\n  left 100\n tag img\n src "+$(this).attr("src"))});$("#DesignerImagesList").on("slidestart",".DesignerImageComponent img",function(){Designer.stage.dragAndDrop("images\n style\n  position absolute\n  top 0px\n  left 0px\n tag img\n src "+$(this).attr("src"));mixpanel.track("I dropped an image component")});
$("#DesignerImagesRibbon").on("mousedown slide slidestart",function(a){a.stopPropagation()})});Designer.on("firstOpen",Designer.images.updateList);Designer.importFiles=function(){$.get("/nudgepad.explorer.list",{},function(a){(new Space(a)).each(function(a,b){if(!a.match(/\.html$/))return!0;var d=a.replace(".html","");if(Project.get("pages "+d))return!0;expressfs.readFile(a,function(a){a=$.htmlToScraps(a);Designer.menu.create(d,a.toString())})})})};
Designer.importUrl=function(a,c){$.ajax({url:"/nudgepad.proxy",type:"POST",timeout:1E4,data:{url:a}}).done(function(b){var d=a.replace(/^https?\:\/\//,"");b=$.htmlToScraps(b);b=RelativeToAbsolute(b.toString(),a);Designer.menu.create(d,b.toString());Alerts.success("Imported "+a);c&&c()}).fail(function(a){c&&c(a)})};Designer.importUrlPrompt=function(){var a=prompt("Enter a url to import","http://");if(!a)return!1;a.match(/^https?\:\/\//)||(a="http://"+a);Designer.importUrl(a)};
$.fn.insertAt=function(a,c){var b=this.children().size();0>a&&(a=Math.max(0,b+1+a));this.append(c);a<b&&this.children().eq(a).before(this.children().last());return this};$.fn.deselect=function(a){var c=$(this).attr("id");$(this).removeClass(Designer.stage.selection.className);$("."+c+"Handle").remove();a||Designer.trigger("selection");return $(this)};
$.fn.duplicate=function(){var a=$(this).scrap(),c=$(this).attr("id"),b=Designer.page,d=$(this).parentPath();d&&(b=Designer.page.get(d),d=d.replace(/ scraps/g,"")+" ");var e=Designer.autokey(b,c),a=new Scrap(d+e,a.toString()),c=b.keys.indexOf(c)+1;b.set(e,a,c);$(this).deselect(!0);b=a.render(null,c).element();"absolute"===b.css("position")&&a.move(10,10);b.selectMe(!0)};$.fn.owner=function(){return Designer.page.get($(this).attr("value")).element()};
$.fn.parentPath=function(){var a=$(this).attr("path");return a.match(/ /)?a.replace(/ [^ ]+$/,""):""};$.fn.scrap=function(){return Designer.page.get($(this).attr("path"))};
$.fn.selectMe=function(a){var c=$(this).scrap();if(c.get("locked"))return!1;if($(this).hasClass(Designer.stage.selection.className))return this;$(this).addClass(Designer.stage.selection.className);Designer.MoveHandle.create(c);a||Designer.trigger("selection");Designer.EditHandle.create(c);a=c.get("style");if(!a)return this;if(a=a.get("background-image")&&"contain"===a.get("background-size"))return Designer.StretchHandle.create(c,"middle","left",a),Designer.StretchHandle.create(c,"middle","right",
a),this;Designer.StretchHandle.create(c,"top","left");Designer.StretchHandle.create(c,"top","center");Designer.StretchHandle.create(c,"top","right");Designer.StretchHandle.create(c,"middle","left");Designer.StretchHandle.create(c,"middle","right");Designer.StretchHandle.create(c,"bottom","left");Designer.StretchHandle.create(c,"bottom","center");Designer.StretchHandle.create(c,"bottom","right");return $(this)};
$.fn.togglePosition=function(){var a=$(this).scrap(),c="absolute";"absolute"===$(this).css("position")?(c="relative",a.set("style left",""),a.set("style top","")):(a.set("style left","0px"),a.set("style top","0px"));a.set("style position",c);$(this).attr("style","");$(this).css(a.get("style").values)};
$.fn.toggleSize=function(){var a=$(this).scrap(),c=$(this).width()+"px";a.get("style width")&&a.get("style width").match(/\%/)||(c=Math.round(100*$(this).width()/$(this).parent().width())+"%");a.set("style width",c);var b=$(this).height()+"px";a.get("style height")&&a.get("style height").match(/\%/)||(b=Math.round(100*$(this).height()/$(this).parent().height())+"%");a.set("style height",b);$(this).css({width:c,height:b})};Designer.menu.autopublish=!1;
Designer.menu.blank=function(){var a=prompt("Name your page",Designer.menu.nextName());if(!a)return null;Designer.menu.create(a,$("#DesignerBlankPage").text())};Designer.menu.clearTimelinePrompt=function(){if(!confirm("Are you sure you want to erase the history of this page?"))return!1;var a=Designer.stage.activePage;Designer.stage.close();Project.delete("timelines "+a);Designer.stage.open(a)};
Designer.menu.create=function(a,c){a=a?Permalink(a):Designer.menu.nextName();if(Project.get("pages "+a))return Alerts.error("A page named "+a+" already exists.");var b=new Space(c),d=new Space;if(c){var e=new Space;e.set("author",Cookie.email);e.set("values",new Space(c));d.set((new Date).getTime(),e)}Project.create("pages "+a,b);Project.create("timelines "+a,d);Designer.stage.open(a);mixpanel.track("I created a new webpage");return a};
Designer.menu.delete=function(a){a=a||Designer.stage.activePage;Designer.stage.activePage===a&&Designer.stage.back();Project.delete("pages "+a);Project.delete("timelines "+a);Alerts.success("Deleted "+a,1E3);mixpanel.track("I deleted a page");return""};
Designer.menu.duplicate=function(a,c,b){a=a||Designer.stage.activePage;c=Designer.menu.nextName(c||a);if(!b&&(c=prompt("Name your new page",c),!c))return!1;if(!Project.get("pages").get(a))return Alerts.error("Page "+a+" not found");mixpanel.track("I duplicated a page");return a!==Designer.stage.activePage?Designer.menu.create(c,Project.get("pages").get(a)):Designer.menu.create(c,Designer.page.toString())};
Designer.menu.nextName=function(a){a=a||"untitled";if(!Project.get("pages "+a))return a;for(var c=1;1E3>c;c++)if(!Project.get("pages "+a+c))return a+c};Designer.menu.prettyPrint=!0;Designer.menu.publish=function(a,c,b){c=(new Page(c)).toHtml(function(){return"true"===this.get("draft")?"":this.div.toHtml()});Designer.menu.prettyPrint&&(c=html_beautify(c));expressfs.writeFileAndOpen(a,c,"published",b)};
Designer.menu.rename=function(a){mixpanel.track("I renamed a page");a=Permalink(a);var c=Designer.stage.activePage;if(!a.length)return Alerts.error("Name cannot be blank");if(Project.get("pages "+a))return Alerts.error("A page named "+a+" already exists.");Project.rename("pages "+c,"pages "+a);Project.rename("timelines "+c,"timelines "+a);Designer.stage.open(a);mixpanel.track("I renamed a page");return""};
Designer.menu.renamePrompt=function(){var a=prompt("Enter a new name",Designer.stage.activePage);a&&Designer.menu.rename(a)};Designer.menu.spotlight=function(){var a=prompt("Enter the name of the page to open...","");a&&Designer.stage.open(a)};Designer.Mouse={};Designer.Mouse.isDown=!1;Designer.Mouse.yChange=0;Designer.Mouse.xChange=0;Designer.Mouse.pathDistance=0;
Designer.Mouse.onmousedown=function(a){Designer.Mouse.isDown=!0;Designer.Mouse.down=a;Designer.Mouse.target=a.srcElement||a.originalTarget||a.target;Designer.Mouse.lastX=a.pageX;Designer.Mouse.lastY=a.pageY;Designer.Mouse.pathDistance=0;return!0};
Designer.Mouse.onmousemove=function(a){Designer.Mouse.move=a;if(!Designer.Mouse.isDown)return!0;Designer.Mouse.pathDistance+=Math.abs(a.pageX-Designer.Mouse.lastX)+Math.abs(a.pageY-Designer.Mouse.lastY);Designer.Mouse.lastX=a.pageX;Designer.Mouse.lastY=a.pageY;Designer.Mouse.xChange=a.pageX-Designer.Mouse.down.pageX;Designer.Mouse.yChange=a.pageY-Designer.Mouse.down.pageY;Designer.Mouse.distance=Math.pow(Math.pow(Designer.Mouse.xChange,2)+Math.pow(Designer.Mouse.yChange,2),0.5);return!0};
Designer.Mouse.onmouseup=function(a){Designer.Mouse.isDown=!1;Designer.Mouse.xChange=a.pageX-Designer.Mouse.down.pageX;Designer.Mouse.yChange=a.pageY-Designer.Mouse.down.pageY;Designer.Mouse.distance=Math.pow(Math.pow(Designer.Mouse.xChange,2)+Math.pow(Designer.Mouse.yChange,2),0.5);return!0};
Designer.Mouse.onTouchEnd=function(a){Designer.Mouse.isDown=!1;Designer.Mouse.xChange=a.pageX-Designer.Mouse.down.pageX;Designer.Mouse.yChange=a.pageY-Designer.Mouse.down.pageY;Designer.Mouse.distance=Math.pow(Math.pow(Designer.Mouse.xChange,2)+Math.pow(Designer.Mouse.yChange,2),0.5);return!0};
Designer.Mouse.onTouchStart=function(a){Designer.Mouse.isDown=!0;Designer.Mouse.down=a;Designer.Mouse.target=a.srcElement||a.originalTarget||a.target;Designer.Mouse.lastX=a.pageX;Designer.Mouse.lastY=a.pageY;Designer.Mouse.pathDistance=0;return!0};
Designer.Mouse.onTouchMove=function(a){Designer.Mouse.move=a;if(!Designer.Mouse.isDown)return!0;Designer.Mouse.pathDistance+=Math.abs(a.pageX-Designer.Mouse.lastX)+Math.abs(a.pageY-Designer.Mouse.lastY);Designer.Mouse.lastX=a.pageX;Designer.Mouse.lastY=a.pageY;Designer.Mouse.xChange=a.pageX-Designer.Mouse.down.pageX;Designer.Mouse.yChange=a.pageY-Designer.Mouse.down.pageY;Designer.Mouse.distance=Math.pow(Math.pow(Designer.Mouse.xChange,2)+Math.pow(Designer.Mouse.yChange,2),0.5);return!0};
Designer.MoveHandle=function(){};
Designer.MoveHandle.create=function(a){var c=a.element(),b=$("<div></div>");b.attr("value",a.getPath());b.addClass("DesignerHandle");b.addClass(a.id+"Handle");b.addClass("DesignerMoveHandle");b.attr("id","DesignerMoveHandle"+a.id);b.attr("title",a.id);var d=c.css("position");if("fixed"===d||"absolute"===d)b.on("mousedown",Designer.MoveHandle.mousedown),b.on("slide",Designer.MoveHandle.slide),b.on("slidestart",Designer.MoveHandle.slidestart),b.on("slideend",Designer.MoveHandle.slideend),b.css("cursor",
"move");b.css({position:"fixed"===d?"fixed":"absolute","z-index":"50"});c.parent().append(b);b.on("tap",Designer.MoveHandle.tap);b.on("update",Designer.MoveHandle.update);b.on("dblclick",function(b){b.metaKey?(c.togglePosition(),Designer.stage.commit(),c.deselect().selectMe()):a.edit(!0)});b.trigger("update")};Designer.MoveHandle.dimensions={};
Designer.MoveHandle.mousedown=function(){Designer.MoveHandle.dimensions=$(this).owner().dimensions();Designer.grid.create();Designer.MoveHandle.last_x_change=0;Designer.MoveHandle.last_y_change=0;Designer.MoveHandle.scrollTop=Designer.stage.scrollTop();return!0};
Designer.MoveHandle.slide=function(a,c){var b=$(this).owner();b.scrap();var d=Designer.MoveHandle.dimensions,e=Designer.stage.scrollTop()-Designer.MoveHandle.scrollTop,k={y:0,x:0};c.shiftKey||(k=Designer.grid.getDelta([{x:d.left+Designer.Mouse.xChange,y:d.top+Designer.Mouse.yChange+e},{x:d.right+Designer.Mouse.xChange,y:d.bottom+Designer.Mouse.yChange+e},{x:d.center+Designer.Mouse.xChange,y:d.middle+Designer.Mouse.yChange+e}]));var h=Designer.Mouse.yChange+e+k.y,g=Designer.Mouse.xChange+k.x;Designer.stage.selection.elements().each(function(){$(this).scrap().move(g-
Designer.MoveHandle.last_x_change,h-Designer.MoveHandle.last_y_change)});d="X "+parseFloat(b.css("left"))+"<br>Y "+parseFloat(b.css("top"));$("#DesignerDimensions").css({left:10+b.offset().left+b.outerWidth(),top:-10+b.offset().top+Math.round(b.outerHeight(!0)/2)}).html(d);Designer.MoveHandle.last_x_change=g;Designer.MoveHandle.last_y_change=h;return!1};
Designer.MoveHandle.slideend=function(){$(".DesignerHandle").trigger("update").show();Designer.grid.removeSnaplines();$("#DesignerDimensions").hide();Designer.stage.commit()};Designer.MoveHandle.slidestart=function(){$(".DesignerHandle").not(this).hide();var a=$(this).owner(),c="X "+parseFloat(a.css("left"))+"<br>Y "+parseFloat(a.css("top"));$("#DesignerDimensions").css({left:10+a.offset().left+a.outerWidth(),top:-10+a.offset().top+Math.round(a.outerHeight(!0)/2)}).html(c).show();return!1};
Designer.MoveHandle.tap=function(){Designer.Mouse.down&&Designer.Mouse.down.shiftKey&&$(this).owner().deselect();return!1};Designer.MoveHandle.update=function(){var a=$(this).owner();if(!a.position())debugger;var c=Math.min(10,a.outerHeight(!0)-20),b=Math.min(10,a.outerWidth()-20),a={left:a.position().left+b+"px",top:a.position().top+c+"px",height:a.outerHeight(!0)-2*c+"px",width:a.outerWidth()-2*b+"px"};$(this).css(a)};
Designer.oncopy=function(a){if($("input:focus, div:focus, textarea:focus, a:focus").length||!Designer.stage.selection.exists())return!0;a.clipboardData&&(a.preventDefault(),a.clipboardData.setData("text/xcustom",Designer.stage.selection.toSpace().toString()),a.clipboardData.setData("text/plain",Designer.stage.selection.toSpace().toString()));window.clipboardData&&(a.returnValue=!1,window.clipboardData.setData("Text",Designer.stage.selection.toSpace().toString()));mixpanel.track("I copied something")};
Designer.oncut=function(a){if($("input:focus, div:focus, textarea:focus, a:focus").length||!Designer.stage.selection.exists())return!0;if(a.clipboardData){a.preventDefault();a.clipboardData.setData("text/xcustom",Designer.stage.selection.toSpace().toString());var c=a.clipboardData.setData("text/plain",Designer.stage.selection.toSpace().toString());console.log("setData: "+c)}window.clipboardData&&(a.returnValue=!1,c=window.clipboardData.setData("Text",Designer.stage.selection.toSpace().toString()),
console.log("setData: "+c));Designer.stage.selection.delete();Designer.stage.commit();mixpanel.track("I cut something")};Designer.ondrop=function(a){mixpanel.track("I dropped a file onto the page");var c=new FileReader;c.onload=function(a){a=new Space("tag img\nsrc "+a.target.result+"\nstyle\n width auto\n height auto");a=(new Space).set("scrap1",a);Designer.stage.insert(a)};c.readAsDataURL(a.dataTransfer.files[0]);a.preventDefault()};
Designer.onkeydown=function(a){if(0!=$("input:focus, div:focus, textarea:focus, a:focus").length||(a.ctrlKey||a.metaKey||a.shiftKey)||(48>a.keyCode&&32!=a.keyCode||90<a.keyCode)||!Designer.stage.selection.elements().length||Designer.stage.selection.elements().is("input")||Designer.stage.selection.elements().is("textarea"))return!0;Designer.stage.selection.elements().scrap().edit()};
Designer.onpaste=function(a){if($("input:focus, div:focus, textarea:focus, a:focus").length)return!0;var c=void 0;a.clipboardData&&a.clipboardData.getData&&(c=a.clipboardData.getData("text/plain"));a="scraps";c.match(/^\s*\</)&&(a="html");"scraps"===a?Designer.pasteScraps(c):"html"===a&&Designer.pasteHtml(c);mixpanel.track("I pasted something")};Designer.pasteHtml=function(a){Designer.pasteScraps($.htmlToScraps(a))};
Designer.pasteScraps=function(a){Designer.stage.insert(a);Designer.stage.selection.save();Designer.stage.open(Designer.stage.activePage);Designer.stage.selection.restore()};Designer.onresize=function(){$(".DesignerHandle").trigger("update")};Designer.pen={on:!1};
Designer.pen.insertTextBlock=function(a){if(!a.metaKey)return!0;var c=$("#DesignerStageBody").offset().left;a=$("#DesignerStageBody").offset().top;c=Designer.Mouse.down.pageX-c;a=Designer.Mouse.down.pageY-a;a=(new Space).set("text",new Space("tag h2\nstyle\n position absolute\n left "+c+"px\n top "+a+"px\n"));a=Designer.stage.insert(a)[0];$(a).scrap().edit()};
Designer.pen.draw=function(a){if(!Designer.pen.on&&!Designer.Mouse.down.metaKey||!Designer.Mouse.isDown||$.isOnScrollbar(Designer.Mouse.down.clientX,Designer.Mouse.down.clientY))return!0;var c=$("#DesignerStageBody").offset().left;a=$("#DesignerStageBody").offset().top;c=Designer.Mouse.down.pageX-c;a=Designer.Mouse.down.pageY-a;a=(new Space).set("container",new Space("style\n position absolute\n left "+c+"px\n top "+a+"px\n width 1px\n height 1px\n"));a=Designer.stage.insert(a)[0];a=$(a).scrap().id;
console.log(a);Events.slide.target=$("#DesignerStretchHandleBottomRight"+a);$("#DesignerStretchHandleBottomRight"+a).triggerHandler("mousedown");$("#DesignerStretchHandleBottomRight"+a).triggerHandler("slidestart");mixpanel.track("I used the pen tool")};Scrap.prototype.onedit="";Scrap.prototype.edit=function(a){var c=this.get("onedit");c&&window[c]?window[c].open():Designer.contentEditor.focus(this.selector(),a);return this};Scrap.prototype.element=function(){return $(this.selector())};
Scrap.prototype.getPath=function(){return this.path.replace(/ /g," scraps ")};Scrap.devFilter=function(){if("script"===this.div.tag)return"";this.div.addClass("DesignerScrap");this.div.attr("path",this.getPath());_.each(this.div.attrs,function(a,c,b){c.match(/^on/)&&delete b[c]});this.div.attr("selector",this.selector());return this.div.toHtml()};Scrap.bodyFilter=function(){this.div.tag="div";this.div.content="";this.setChildren(Scrap.devFilter);return this.div.toHtml()};
Scrap.prototype.isContentEditable=function(){var a=this.get("tag");return a&&a.match(/^(textarea|input|password|label|button|ul|ol)$/)?!1:!0};
Scrap.prototype.move=function(a,c){var b={},d=this.get("style");d||(this.set("style",new Space),d=this.get("style"));if(a){var e=d.get("left");"undefined"!==typeof e&&(b.left=a+parseFloat(e)+"px",d.set("left",b.left));e=d.get("right");"undefined"!==typeof e&&(b.right=-a+parseFloat(e)+"px",d.set("right",b.right));"undefined"!==typeof d.get("margin-left")&&(d.set("margin-left",a+parseFloat(d.get("margin-left"))+"px"),b["margin-left"]=d.get("margin-left"))}c&&("undefined"!==typeof d.get("top")&&(d.set("top",
c+parseFloat(d.get("top"))+"px"),b.top=d.get("top")),"undefined"!==typeof d.get("bottom")&&(d.set("bottom",-c+parseFloat(d.get("bottom"))+"px"),b.bottom=d.get("bottom")),"undefined"!==typeof d.get("margin-top")&&(d.set("margin-top",c+parseFloat(d.get("margin-top"))+"px"),b["margin-top"]=d.get("margin-top")));this.element().css(b);return this};
Scrap.prototype.moveDown=function(){this.get("style")||this.set("style",new Space);void 0===this.get("style z-index")?this.set("style z-index",0):this.set("style z-index",parseFloat(this.get("style z-index"))-1);$(this.selector()).css("z-index",this.get("style z-index"))};
Scrap.prototype.moveUp=function(){this.get("style")||this.set("style",new Space);void 0===this.get("style z-index")?this.set("style z-index",1):this.set("style z-index",parseFloat(this.get("style z-index"))+1);$(this.selector()).css("z-index",this.get("style z-index"))};Scrap.prototype.parentSelector=function(){return this.selector().replace(/\>[^\>]+$/,"")};
Scrap.prototype.render=function(a){var c=this.get("tag");if(c&&c.match(/title|script|meta/))return this;if("head"===c)return this.get("scraps")&&this.get("scraps").each(function(a,b){b.render()}),this;if(c&&c.match(/style|link/)){this.setTag();this.setProperties();this.setContent();$("#DesignerStageHead").append(this.div.toHtml());if("style"===c&&this.get("content")){var b;try{b=cssToSpace(this.get("content"))}catch(d){Alerts.error("Warning: Failed to parse CSS in this page"),b=new Space}"background background-color background-image background-repeat background-size background-attachment background-position".split(" ").forEach(function(a,
c){var d=b.get("body "+a);if(!d)return!0;$("#DesignerStageBody").css(a,d)})}return this}if(c&&"body"===c)return a=this.toHtml(Scrap.bodyFilter),$("#DesignerStageBody").append(a),this;a?$(this.parentSelector()).insertAt(a,this.toHtml(Scrap.devFilter)):$(this.parentSelector()).append(this.toHtml(Scrap.devFilter));return this};Scrap.prototype.selector=function(){var a=this.path.replace(/[^a-z0-9\-\.\_ ]/gi,"").replace(/ /g,">#");return a?"#DesignerStageBody>#"+a:""};
Scrap.prototype.toAbsolute=function(){this.set("style position","absolute");this.element().css("position","absolute")};Scrap.prototype.toPercentage=function(){var a=this.element(),c=a.parent().height()||$(window).height(),c=Math.round(100*a.height()/c)+"%";this.set("style height",c);a.css("height",c);c=a.parent().width()||$(window).width();c=Math.round(100*a.width()/c)+"%";this.set("style width",c);a.css("width",c)};
Scrap.prototype.toPixels=function(){var a=this.element();this.set("style height",a.height()+"px");a.css("height",a.height()+"px");this.set("style width",a.width()+"px");a.css("width",a.width()+"px")};Scrap.prototype.toRelative=function(){this.delete("style position");this.element().css("position","")};Scrap.prototype.unlock=function(){if(!this.get("locked"))return!0;this.delete("locked");$(this.selector()).removeClass("DesignerLockedScrap");return!0};
Scrap.disableLinks=function(a){a.preventDefault();return!1};Scrap.selectOnTap=function(a){$(this).is(":focus")||$(":focus").blur();if(Designer.Mouse.down&&Designer.Mouse.down.altKey&&!$(this).hasClass(Designer.stage.selection.className)&&Designer.stage.selection.elements().length)return Designer.stage.selection.nest($(this).attr("path")),!1;Designer.Mouse.down&&Designer.Mouse.down.shiftKey||Designer.stage.selection.clear();$(this).selectMe();return!1};
Scrap.unlock=function(){var a=$(this).scrap();a.get("locked")&&(a.unlock(),Designer.stage.commit());$(this).selectMe();return!1};$.fn.scrollMinimal=function(a){var c=this.position().top,b=this.outerHeight(!0),d=$("#DesignerStage").scrollTop(),e=$("#DesignerStage").height();c<d?a?$("#DesignerStage").animate({scrollTop:c},"slow","swing"):$("#DesignerStage").scrollTop(c):c+b>d+e&&(a?$("#DesignerStage").animate({scrollTop:c-e+b},"slow","swing"):$("#DesignerStage").scrollTop(c-e+b))};
Designer.stage.selection.className="DesignerSelection";Designer.stage.selection.saved=[];Designer.stage.selection.capture=function(){Designer.stage.selection.captured=Designer.stage.selection.toSpace()};Designer.stage.selection.clear=function(){if(!Designer.stage.selection.elements().length)return!0;Designer.stage.selection.elements().each(function(){$(this).deselect(!0)});Designer.trigger("selection")};
Designer.stage.selection.css=function(a){Designer.stage.selection.cssPreview(a);Designer.stage.commit();$(".DesignerHandle").trigger("update")};Designer.stage.selection.cssPreview=function(a){if(!a)return!1;a=new Space(a);Designer.stage.selection.elements().each(function(){var c=$(this).scrap().get("style");c||($(this).scrap().set("style",new Space),c=$(this).scrap().get("style"));c.patch(a);$(this).css(a.values)})};
Designer.stage.selection.delete=function(){Designer.stage.selection.elements().each(function(){var a=$(this).scrap();$(this).deselect(!0).remove();a&&Designer.page.delete(a.getPath())})};Designer.stage.selection.duplicate=function(){Designer.stage.selection.elements().each(function(){$(this).duplicate()});Designer.stage.commit()};
Designer.stage.selection.editSource=function(){Designer.stage.selection.capture();Designer.stage.selection.save();TextPrompt.open("Enter code...",Designer.stage.selection.captured.toString(),Designer.stage.selection.modify)};Designer.stage.selection.elements=function(){return $("."+Designer.stage.selection.className)};Designer.stage.selection.exists=function(){return Designer.stage.selection.elements().length};
Designer.stage.selection.modify=function(a){a=new Space(a);Designer.page.patch(Designer.stage.selection.captured.diff(a));Designer.stage.commit();Designer.stage.open(Designer.stage.activePage);Designer.stage.selection.restore()};
Designer.stage.selection.move=function(a,c){if(!Designer.stage.selection.elements().length)return!1;Designer.stage.selection.elements().each(function(){$(this).scrap().move(a,c)});var b=$(Designer.stage.selection.elements()[0]),d="X "+parseFloat(b.css("left"))+"<br>Y "+parseFloat(b.css("top"));$("#DesignerDimensions").css({left:10+b.offset().left+b.outerWidth(),top:-10+b.offset().top+Math.round(b.outerHeight()/2)}).html(d);Popup.open("#DesignerDimensions");$(".DesignerHandle").trigger("update");Designer.stage.commit()};
Designer.stage.selection.nest=function(a){var c=Designer.page.get(a);if(!c)return!1;c.get("scraps")||c.set("scraps",new Space);c=c.get("scraps");a=Designer.stage.selection.toSpace();Designer.stage.selection.delete();a.each(function(a,d){c.get(a)&&this.rename(a,Designer.autokey(c,a))});c.patch(a);Designer.stage.commit();Designer.stage.open(Designer.stage.activePage)};
Designer.stage.selection.patch=function(a){"string"===typeof a&&(a=new Space(a));Designer.stage.selection.elements().each(function(){var c=$(this).scrap();$(this).deselect();c.patch(a);$(this).replaceWith(c.toHtml(Scrap.devFilter));c.element().selectMe()});Designer.stage.commit()};Designer.stage.selection.restore=function(){for(var a in Designer.stage.selection.saved){var c=Designer.stage.selection.saved[a];$(c).length&&$(c).selectMe(!0)}Designer.trigger("selection")};
Designer.stage.selection.save=function(){Designer.stage.selection.saved=[];Designer.stage.selection.elements().each(function(){Designer.stage.selection.saved.push($(this).scrap().selector())})};Designer.stage.selection.toSpace=function(){var a=new Space;Designer.stage.selection.elements().each(function(){var c=$(this).scrap();a.set(c.getPath(),new Space(c.toString()))});return a};
Designer.broadcastSelection=function(a){var c=a||"",b="";Designer.stage.selection.elements().each(function(){$(this).scrap()&&(c+=b+$(this).scrap().selector(),b=",")});c+="{box-shadow: 0 0 4px "+Screen.get("color")+";cursor: not-allowed;}";Screen.set("selection",c)};
Designer.updateSelections=function(){$("#DesignerRemoteSelections").html("");Screens.each(function(a,c){if("Designer"!==c.get("tool")||c.get("id")===Screen.get("id")||c.get("page")!==Designer.stage.activePage)return!0;var b=c.get("selection");b&&$("#DesignerRemoteSelections").append(b)})};Designer.stage.version=0;Designer.stage.percentElapsed=100;Designer.stage.currentView=store.get("DesignerView")||"tablet";Designer.stage.back=function(){Designer.stage.open(Project.get("pages").prev(Designer.stage.activePage))};
Designer.stage.close=function(){$("#DesignerStageBody").attr("style","");$("#DesignerStageHead").html("");$("#DesignerRemoteSelections").html("");$(".DesignerScrap,#body").remove()};
Designer.stage.commit=function(){var a=(new Date).getTime(),c=Designer.edge.diff(Designer.page),b=Designer.edge.diffOrder(Designer.page);if(c.isEmpty()&&b.isEmpty())return console.log("no change"),!1;var d=new Space;d.set("author",Cookie.email);c.isEmpty()||d.set("values",new Space(c.toString()));b.isEmpty()||d.set("order",new Space(b.toString()));Designer.stage.timeline.set(a,d);Designer.edge=new Space(Designer.page.toString());Designer.stage.version=Designer.stage.timeline.length();Designer.trigger("selection");
Designer.trigger("commit");Designer.trigger("step");Project.set("pages "+Designer.stage.activePage,new Space(Designer.page.toString()));Project.append("timelines "+Designer.stage.activePage+" "+a,d);Designer.menu.autopublish&&Designer.menu.publish(Designer.stage.activePage+".html",Designer.page.toString());return c};
Designer.stage.dragAndDrop=function(a){"string"===typeof a&&(a=new Space(a));var c=0,b=0,b=a.get("head style html height")||100,c=a.get("head style html height")||140,c=parseFloat(c),b=parseFloat(b),c=Math.round(c/2),b=Math.round(b/2),d=$("#DesignerStageBody").offset().left,e=$("#DesignerStage").scrollTop();Designer.stage.insert(a,!0,Designer.Mouse.move.pageX-d-c,Designer.Mouse.move.pageY-b+e)};
Designer.stage.editSource=function(){TextPrompt.open("Enter code...",Designer.page.toString(),function(a){Designer.page=new Space(a);Designer.stage.commit();Designer.stage.open(Designer.stage.activePage)})};Designer.stage.erase=function(){Designer.stage.selectAll();Designer.stage.selection.delete();Designer.stage.commit()};
Designer.stage.expand=function(){var a=700;$(".DesignerScrap").each(function(){var c=$(this).position().top+$(this).outerHeight();c>a&&(a=c)});$("#DesignerStageBody").css({height:a+"px"})};Designer.stage.forward=function(){Designer.stage.open(Project.get("pages").next(Designer.stage.activePage))};
Designer.stage.goto=function(a){Designer.stage.selection.save();Designer.stage.selection.clear();if(0>a||a>Designer.stage.timeline.length())return!1;Designer.stage.version>a&&(Designer.page=new Page,Designer.stage.version=0);for(var c=Designer.stage.version;c<a;c++){var b=Designer.stage.timeline.keys[c],d=Designer.stage.timeline.get(b+" values"),b=Designer.stage.timeline.get(b+" order");d&&Designer.page.patch(d.toString());b&&Designer.page.patchOrder(b.toString());Designer.stage.version++}Designer.trigger("step");
Designer.stage.render();Designer.stage.selection.restore();Designer.trigger("stage")};Designer.stage.height=function(){return $(window).height()-$("#DesignerBar").outerHeight()};Designer.stage.insertBody=function(){Designer.page.get("body")||(Designer.page.set("body",new Scrap("body","tag body\nscraps\n")),Designer.page.get("body").render());Designer.page.get("body scraps")||Designer.page.set("body scraps",new Space)};
Designer.stage.insert=function(a,c,b,d,e){a||(a="scrap\n content Hello world\n style\n  position absolute\n  top 10px\n  left 10px");a=new Space(a.toString());Designer.stage.selection.clear();Designer.stage.insertBody();var k=Designer.page.get("body scraps");a.each(function(a,b){k.get(a)&&this.rename(a,Designer.autokey(k,a))});k.patch(a);var h=[];a.each(function(a,b){k.values[a]=new Scrap("body "+a,b);var c=k.values[a].render().element();c.length&&(c.selectMe(),h.push(k.values[a].selector()))});e&&
(e=Designer.stage.selection.elements().dimensions(),b=Math.round($("#DesignerStageBody").width()/2-e.width/2),d=Math.round(Designer.stage.scrollTop()+$(window).height()/2-e.height/2));(b||d)&&Designer.stage.selection.elements().each(function(){$(this).scrap().move(b,d)});$(".DesignerHandle").trigger("update");if(c){var g=Designer.stage.selection.elements().attr("id");Events.slide.target=$("#DesignerMoveHandle"+g);$("#DesignerMoveHandle"+g).triggerHandler("mousedown");$("#DesignerMoveHandle"+g).triggerHandler("slidestart");
Designer.stage.selection.elements().each(function(){var a=$(this),b=a.clone(),c=a.css("opacity"),d=$(this).scrap();a.css("opacity","0.01");b.attr("id","nudgepad_move_ghost").removeClass("DesignerScrap "+Designer.stage.selection.className);b.on("mousedown",function(){a.remove()});b.css("font-family",$("#DesignerStageBody").css("font-family"));d.values.style&&b.css(d.values.style.values);b.css({"z-index":"600",position:"fixed",top:a.offset().top,left:a.offset().left});$("#DesignerMoveHandle"+g).on("slide",
function(c){b.css({top:a.offset().top,left:a.offset().left})});$("#DesignerMoveHandle"+g).on("slideend",function(d){a.css("opacity",c);b.remove()});$("body").append(b)})}else Designer.stage.commit();return h};Designer.stage.isBehind=function(){return Designer.stage.version<Designer.stage.timeline.length()};
Designer.stage.open=function(a){var c=Project.get("pages "+a);if(!c)return Alerts.error("Page "+a+" not found");Designer.stage.selection.clear();Designer.stage.openTimeline(a);Designer.stage.activePage=a;store.set("activePage",Designer.stage.activePage);Screen.set("page",Designer.stage.activePage);Designer.edge=c;Designer.page=new Page(c.toString());Designer.stage.version=Designer.stage.timeline.length();Designer.stage.render();Designer.trigger("step");Designer.trigger("page");return""};
Designer.stage.publish=function(){Designer.menu.publish(Designer.stage.activePage+".html",Designer.edge.toString())};Designer.stage.redo=function(){Designer.stage.goto(Designer.stage.version+1)};Designer.stage.render=function(){Designer.stage.close();Designer.page.loadScraps();Designer.page.each(function(a,c){c.render()});Designer.grid.create();Designer.updateSelections()};Designer.stage.reset=function(){$("#DesignerStage").height($(window).height()-40)};
Designer.stage.ribbonClose=function(){$("#DesignerStage").height($(window).height()-40)};Designer.stage.ribbonOpen=function(){$("#DesignerStage").height($(window).height()-122)};Designer.stage.scrollTop=function(){return $("#DesignerStage").scrollTop()};Designer.stage.selectAll=function(){$(".DesignerScrap").each(function(){$(this).selectMe(!0)});Designer.trigger("selection")};
Designer.stage.openTimeline=function(a){if(Project.get("timelines "+a))return Designer.stage.timeline=Project.get("timelines "+a),!0;Designer.stage.timeline=new Space;expressfs.readFile("private/timelines/"+a,function(c){if(c)Project._set("timelines "+a,new Space(c));else{c=Project.get("pages "+a);var b=new Space;if(c&&!c.isEmpty()){var d=new Space;d.set("author",Cookie.email);d.set("values",new Space(c.toString()))}Project.create("timelines "+a,b);Alerts.success("Timeline created")}Designer.stage.timeline=
Project.get("timelines "+a)})};
Designer.stage.views=new Space({full:function(){$("#DesignerStage").css({width:"100%",padding:0});$("#DesignerStageBody").css({"min-height":"1000px"})},tablet:function(){var a=Math.round(($(window).width()-1024)/2)+"px";$("#DesignerStage").css({width:"1024px",padding:"20px "+a+" 1000px "+a});$("#DesignerStageBody").css({"min-height":"768px"})},mobile:function(){var a=Math.round(($(window).width()-320)/2)+"px";$("#DesignerStage").css({padding:"20px "+a+" 20px "+a,width:"320px"});$("#DesignerStageBody").css({"min-height":"356px"})}});
Designer.stage.toggleDevice=function(){Designer.stage.currentView=Designer.stage.views.next(Designer.stage.currentView);Designer.stage.views.get(Designer.stage.currentView)();$("#DesignerStageBody").width();Alerts.success(Designer.stage.currentView+" view");store.set("DesignerView",Designer.stage.currentView)};Designer.stage.undo=function(){Designer.stage.goto(Designer.stage.version-1)};
Designer.stage.updateTimeline=function(){Designer.stage.percentElapsed=Designer.stage.timeline.length()?Math.round(100*Designer.stage.version/Designer.stage.timeline.length()):100;$("#DesignerTimeline").attr("max",Designer.stage.timeline.length()).val(Designer.stage.version);$("#DesignerTimelinePosition").text(Designer.stage.version+"/"+Designer.stage.timeline.length())};Designer.stage.clearOnTap=function(a){Designer.stage.selection.clear();return!0};
Designer.stage.onresize=function(a){Designer.stage.views.get(Designer.stage.currentView)();$("#DesignerStageBody").width();$(".DesignerRibbon:visible").length?$("#DesignerStage").height($(window).height()-122):$("#DesignerStage").height($(window).height()-40)};Designer.StretchHandle=function(){};var toProperCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})};
Designer.StretchHandle.create=function(a,c,b,d){var e=a.element(),k="fixed"==e.css("position")?"fixed":"absolute",h=("top"==c?"n":"bottom"==c?"s":"")+("left"==b?"w":"right"==b?"e":""),g=$("<div></div>");g.attr("value",a.getPath());g.addClass("DesignerHandle");g.addClass("DesignerStretchHandle");g.addClass("DesignerStretchHandle"+a.id);g.addClass(a.id+"Handle");g.attr("id","DesignerStretchHandle"+toProperCase(c)+toProperCase(b)+a.id);g.css({cursor:h+"-resize",position:k,width:"5px",height:"5px",border:"1px solid rgba(0, 0, 0, .5)",
"background-color":"rgba(255, 255, 255, 0.5)","z-index":"50"});g.data("row",c);g.data("column",b);d&&g.data("fixed",!0);e.parent().append(g);g.on("mousedown",Designer.StretchHandle.mousedown);g.on("slide",Designer.StretchHandle.slide);g.on("slidestart",Designer.StretchHandle.slidestart);g.on("slideend",Designer.StretchHandle.slideend);g.on("tap",Designer.StretchHandle.tap);g.on("update",Designer.StretchHandle.update);g.on("dblclick",Designer.StretchHandle.dblclick);g.trigger("update")};
Designer.StretchHandle.dimensions={};Designer.StretchHandle.mousedown=function(){Designer.StretchHandle.dimensions=$(this).owner().dimensions();var a=$(this).owner().scrap();Designer.StretchHandle.originalWidth=parseFloat(a.get("style width"));Designer.StretchHandle.isWidthPercentage=a.get("style width").toString().match(/\%/);Designer.StretchHandle.originalHeight=parseFloat(a.get("style height"));Designer.StretchHandle.isHeightPercentage=a.get("style height").toString().match(/\%/);Designer.grid.create()};
Designer.StretchHandle.slide=function(){var a=$(this).owner(),c=$(this).data().row,b=$(this).data().column,d=$(this).data().fixed,e,k;e="left"===b?Designer.StretchHandle.dimensions.right:"right"===b?Designer.StretchHandle.dimensions.left:Designer.StretchHandle.dimensions.center;k="top"===c?Designer.StretchHandle.dimensions.bottom:"bottom"===c?Designer.StretchHandle.dimensions.top:Designer.StretchHandle.dimensions.middle;var h=Designer.Mouse.move.pageX-$(this).parent().offset().left,g=Designer.Mouse.move.pageY-
$(this).parent().offset().top,f=Designer.StretchHandle.getLength(e,k,h,g,"center"!=b,"middle"!=c),h=a.scrap(),g=h.get("style width")||a.css("width"),n=h.get("style height")||a.css("height");"center"!==b&&(h.set("style left",(0<=f.x?e:f.x+e)+"px"),g=a.outerWidth()-a.width(),g=Math.abs(f.x)-g,g=Designer.StretchHandle.isWidthPercentage?Math.round(100*g/a.parent().width())+"%":g+"px",h.set("style width",g));d?(c=parseFloat(h.get("style width"))/Designer.StretchHandle.originalWidth,h.set("style height",
Math.round(Designer.StretchHandle.originalHeight*c)+"px")):"middle"!=c&&(0<=f.y?h.set("style top",k+"px"):h.set("style top",f.y+k+"px"),c=a.outerHeight(!0)-a.height(),n=Math.abs(f.y)-c,c=a.parent().height()||$(window).height(),n=Designer.StretchHandle.isHeightPercentage?Math.round(100*n/c)+"%":n+"px",h.set("style height",n));a.css(h.values.style.values);c="W "+g+"<br> H "+n;$("#DesignerDimensions").css({left:10+a.offset().left+a.outerWidth(),top:-10+a.offset().top+Math.round(a.outerHeight(!0)/2)}).html(c);
$(".DesignerStretchHandle"+h.id).trigger("update");return!1};Designer.StretchHandle.slidestart=function(a){a=$(this).owner();var c=a.scrap();$("."+c.id+"Handle").not(".DesignerStretchHandle"+c.id).hide();c="W "+parseFloat(a.css("width"))+"<br> H "+parseFloat(a.css("height"));$("#DesignerDimensions").css({left:10+a.offset().left+a.outerWidth(),top:-10+a.offset().top+Math.round(a.outerHeight(!0)/2)}).html(c).show();return!1};
Designer.StretchHandle.dblclick=function(){var a=$(this).owner(),c=$(this).data().row,b=$(this).data().column,d=a.scrap();"right"===b&&d.set("style width","100%");"left"===b&&d.set("style left","0");"top"===c&&d.set("style top","0");"bottom"===c&&d.set("style height","100%");a.css(d.values.style.values);$("."+d.id+"Handle").trigger("update").show();Designer.stage.commit()};
Designer.StretchHandle.slideend=function(){var a=$(this).owner().scrap();$("."+a.id+"Handle").trigger("update").show();Designer.grid.removeSnaplines();$("#DesignerDimensions").hide();Designer.stage.commit()};Designer.StretchHandle.getLength=function(a,c,b,d,e,k){a={x:b-a,y:d-c};b=Designer.grid.getDelta([{x:b,y:d}]);e&&(a.x+=b.x);k&&(a.y+=b.y);return a};Designer.StretchHandle.tap=function(){return!1};
Designer.StretchHandle.update=function(){var a=$(this).owner(),c,b,d=$(this).data().row,e=$(this).data().column;switch(d){case "top":b=a.position().top-4;break;case "middle":b=a.position().top+Math.round(a.outerHeight(!0)/2)-4;break;case "bottom":b=a.position().top+a.outerHeight(!0)-4}switch(e){case "left":c=a.position().left-4;break;case "center":c=a.position().left+Math.round(a.outerWidth()/2)-4;break;case "right":c=a.position().left+a.outerWidth()-4}$(this).css({left:c,top:b})};
Designer.styleEditor={};Designer.styleEditor.livePreviewScrap=!1;Designer.styleEditor.livePreviewTimeout=!1;Designer.styleEditor.livePreviewStart=function(){clearTimeout(Designer.styleEditor.livePreviewTimeout);Designer.styleEditor.livePreviewTimeout=setTimeout("Designer.styleEditor.livePreview()",500)};Designer.styleEditor.livePreview=function(){var a=$("#DesignerStyleEditorCssEditor"),c=Designer.styleEditor.livePreviewScrap;c.set("style",new Space(a.val()));c.element().attr("style","").css(c.get("style").values)};
Designer.styleEditor.edit=function(a){$(".DesignerHandle").remove();var c=$('<div id="DesignerStyleEditorModal"/>');c.on("tap mousedown click slide slidestart slideend mouseup",function(a){a.stopPropagation()});c.on("click",function(){v.trigger("click")});$("body").append(c);var b=a.element(),d=$('<div id="DesignerStyleEditor"></div>');d.css({left:b.offset().left+2+"px",top:b.offset().top+b.outerHeight()+4+"px"});b=$('<div id="DesignerStyleEditorTopBar"></div>');d.append(b);var e=$('<div class="editorOption selectedEditorOption">Block</div>');
e.on("tap",function(){$("div").removeClass("selectedEditorOption");$(this).addClass("selectedEditorOption");m.hide();p.hide();k.show();return!1});b.append(e);e=$('<div class="editorOption">Text</div>');e.on("tap",function(){$("div").removeClass("selectedEditorOption");$(this).addClass("selectedEditorOption");k.hide();m.hide();a.get("style")&&m.val(a.get("style"));p.show();return!1});b.append(e);e=$('<div class="editorOption">Code</div>');e.on("tap",function(){$("div").removeClass("selectedEditorOption");
$(this).addClass("selectedEditorOption");k.hide();p.hide();a.get("style")&&m.val(a.get("style"));m.show();return!1});b.append(e);var k=$('<div id="blockContainer"></div>');d.append(k);var h=Designer.stage.selection.elements().css("background-color"),b=$('<div class="colorBackground"><input type="text" class="colorPicker"></div>');k.append(b);b=$('<div class="editorButton"><img src="/nudgepad/public/images/dup_lt.png"></div>');b.on("click",function(){Designer.stage.selection.duplicate()});k.append(b);
b=$('<div class="editorButton"><img src="/nudgepad/public/images/lock_lt.png"></div>');b.on("tap",function(){Designer.stage.selection.patch("locked true");v.trigger("click");return!1});k.append(b);var g=$('<select id="nudgepadLinkSelect"></select>'),b=$("<option>No link</option>");b.on("click",function(){Designer.stage.selection.patch("href ")});g.append(b);_.each(Project.values.pages.values,function(a,b){var c=$('<option value="'+b+'">'+ToProperCase(b)+"</option>");c.on("click",function(){Designer.stage.selection.patch("tag a\nhref "+
$(this).attr("value"))});g.append(c)});b=$("<option>New Page</option>");b.on("click",function(){var a=prompt("Enter the name of your new page",Designer.menu.nextName(Designer.stage.activePage));if(a){a=Permalink(a);Designer.stage.selection.patch("tag a\nhref "+a);v.trigger("click");var b=Designer.stage.activePage;Designer.menu.duplicate(null,a,!0);Designer.stage.open(b)}});g.append(b);b=$("<option>External Link</option>");b.on("click",function(){var a=prompt("Enter the url to link to","http://");
a&&Designer.stage.selection.patch("tag a\nhref "+a)});g.append(b);g.css({display:"none",position:"absolute","z-index":"100000"});g.attr("size",g.find("option").length);g.on("click",function(){g.hide();return!1});k.append(g);b=$('<div class="editorButton"><img src="/nudgepad/public/images/link_lt.png"></div>');b.on("tap",function(){g.css({left:$(this).position().left,top:$(this).position().top});g.show();return!1});k.append(b);b=$('<div class="editorButton"><img src="/nudgepad/public/images/up_lt.png" title="Increase z-index"></div>');
b.on("tap",function(){Designer.stage.selection.elements().each(function(){$(this).scrap().moveUp()});m.val(a.get("style"));return!1});k.append(b);b=$('<div class="editorButton"><img src="/nudgepad/public/images/down_lt.png" title="Decrease z-index"></div>');b.on("tap",function(){Designer.stage.selection.elements().each(function(){$(this).scrap().moveDown()});m.val(a.get("style"));return!1});k.append(b);var f=$('<div class="clear"></div>');k.append(f);b=$('<div class="columnLeft"></div>');k.append(b);
e=$('<div class="editorHeader">Curve</div>');b.append(e);e=$('<div id="roundessOne" class="toolButton toolButtonOne">0</div>');e.on("click",function(){Designer.stage.selection.cssPreview("border-radius 0px 0px 0px 0px");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div id="roundessTwo" class="toolButton toolButtonTwo">4</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("border-radius 4px 4px 4px 4px");Designer.stage.commit();$(".DesignerHandle").trigger("update");
return!1});b.append(e);e=$('<div class="toolButton toolButtonTwo">10</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("border-radius 10px 10px 10px 10px");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div class="toolButton toolButtonThree">50</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("border-radius 50px 50px 50px 50px");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);f=$('<div class="clear"></div>');
b.append(f);e=$('<div class="editorHeader">Border</div>');b.append(e);var n=Designer.stage.selection.elements().css("border-color"),e=$('<div class="colorBorder"><input type="text" class="colorBorderPicker toolButton toolButtonOne"></div>');b.append(e);e=$('<div class="toolButton toolButtonTwo">0</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("border none");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div class="toolButton toolButtonTwo">1</div>');
e.on("tap",function(){Designer.stage.selection.cssPreview("border 1px solid "+n);Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div class="toolButton toolButtonThree">5</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("border 5px solid "+n);Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);b=$('<div class="columnRight"></div>');k.append(b);e=$('<div class="editorHeader">Opacity</div>');b.append(e);e=
$('<div class="toolButton toolButtonOne">1</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("opacity 1");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div id="opacityOne" class="toolButton toolButtonTwo">.8</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("opacity .8");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div class="toolButton toolButtonTwo">.5</div>');e.on("tap",
function(){Designer.stage.selection.cssPreview("opacity .5");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div class="toolButton toolButtonThree">.2</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("opacity .2");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div class="clear"></div>');b.append(e);e=$('<div class="editorHeader">Shadow</div>');b.append(e);e=$('<div class="toolButton toolButtonOne">0</div>');
e.on("tap",function(){Designer.stage.selection.cssPreview("box-shadow none");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div id="shadowOne" class="toolButton toolButtonTwo">Out</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("box-shadow 0px 1px 3px rgba(0,0,0,.6)");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div id="shadowTwo" class="toolButton toolButtonTwo">In</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("box-shadow inset 0px 1px 3px rgba(0,0,0,.6)");
Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);e=$('<div id="ShadowThree" class="toolButton toolButtonThree">All</div>');e.on("tap",function(){Designer.stage.selection.cssPreview("box-shadow 0px 0px 0px 4px rgba(0,0,0,.2)");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});b.append(e);f=$('<div class="clear"></div>');k.append(f);var p=$('<div id="DesignerStyleEditorTextEditor"></div>');d.append(p);var t=Designer.stage.selection.elements().css("font-family"),
b=$('<select id="fontFamily" class="toolButton" name="fontFamilyDropdown"><option>Arial</option><option>Arvo</option><option>Courier</option><option>Helvetica</option><option>Open Sans</option><option>Times</option><option>Titillium Web</option></select>');b.on("change",function(){t=$("#fontFamily").val();Designer.stage.selection.cssPreview("font-family "+t);Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});p.append(b);b=Designer.stage.selection.elements().css("color");e=$('<div class="colorFont"><input type="text" class="colorFontPicker toolButton toolButtonOne"></div>');
p.append(e);var s=Designer.stage.selection.elements().css("font-size"),e=$('<select id="fontSize" name="fontDropdown"><option>11</option><option>12</option><option>13</option><option>14</option><option>16</option><option>18</option><option>24</option><option>32</option><option>40</option><option>48</option><option>56</option><option>64</option><option>72</option></select>');e.on("change",function(){s=$("#fontSize").val();Designer.stage.selection.cssPreview("font-size "+s+"px");Designer.stage.commit();
$(".DesignerHandle").trigger("update");return!1});p.append(e);e=$('<div id="resize" class="toolButton" title="Auto Resize"><img src="/nudgepad/public/images/contract.png"></div>');e.on("click",function(){Designer.stage.selection.cssPreview({width:"auto",height:"auto"});Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});p.append(e);f=$('<div class="clear"></div>');p.append(f);e=$('<div class="columnLeft"></div>');p.append(e);f=$('<div class="editorHeader">Alignment</div>');e.append(f);
f=$('<div class="toolButton toolButtonOne"><img src="/nudgepad/public/images/left_lt.png"></div>');f.on("click",function(){Designer.stage.selection.cssPreview("text-align left");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});e.append(f);f=$('<div class="toolButton toolButtonTwo"><img src="/nudgepad/public/images/center_lt.png"></div>');f.on("click",function(){Designer.stage.selection.cssPreview("text-align center");Designer.stage.commit();$(".DesignerHandle").trigger("update");
return!1});e.append(f);f=$('<div class="toolButton toolButtonTwo"><img src="/nudgepad/public/images/right_lt.png"></div>');f.on("click",function(){Designer.stage.selection.cssPreview("text-align right");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});e.append(f);f=$('<div class="toolButton toolButtonThree"><img src="/nudgepad/public/images/justify_lt.png"></div>');f.on("click",function(){Designer.stage.selection.cssPreview("text-align justify");Designer.stage.commit();$(".DesignerHandle").trigger("update");
return!1});e.append(f);f=$('<div class="clear"></div>');e.append(f);f=$('<div class="editorHeader">Padding</div>');e.append(f);f=$('<div class="toolButton toolButtonOne">0</div>');f.on("click",function(){Designer.stage.selection.cssPreview("padding 0px");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});e.append(f);f=$('<div class="toolButton toolButtonTwo">10</div>');f.on("click",function(){Designer.stage.selection.cssPreview("padding 10px");Designer.stage.commit();$(".DesignerHandle").trigger("update");
return!1});e.append(f);f=$('<div class="toolButton toolButtonTwo">20</div>');f.on("click",function(){Designer.stage.selection.cssPreview("padding 20px");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});e.append(f);f=$('<div class="toolButton toolButtonTwo">40</div>');f.on("click",function(){Designer.stage.selection.cssPreview("padding 40px");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});e.append(f);e=$('<div class="columnRight"></div>');p.append(e);
f=$('<div class="clear"></div>');e.append(f);f=$('<div class="editorHeader">Line Height</div>');e.append(f);f=$('<div id="lineHeightOne" class="toolButton toolButtonOne">100</div>');f.on("click",function(){Designer.stage.selection.cssPreview("line-height 100%");return!1});e.append(f);f=$('<div id="lineHeightTwo" class="toolButton toolButtonTwo">140</div>');f.on("click",function(){Designer.stage.selection.cssPreview("line-height 140%");return!1});e.append(f);f=$('<div id="lineHeightTwo" class="toolButton toolButtonTwo">180</div>');
f.on("click",function(){Designer.stage.selection.cssPreview("line-height 180%");return!1});e.append(f);f=$('<div id="lineHeightThree" class="toolButton toolButtonThree">Mid</div>');f.on("click",function(){var a=Designer.stage.selection.elements().css("height");Designer.stage.selection.cssPreview("line-height "+a);return!1});e.append(f);f=$('<div class="clear"></div>');e.append(f);f=$('<div class="editorHeader">Style</div>');e.append(f);f=$('<div id="textStyleOne" class="toolButton toolButtonOne">B</div>');
f.on("click",function(){Designer.stage.selection.cssPreview("font-weight bold");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});e.append(f);f=$('<div id="italics" class="toolButton toolButtonTwo">I</div>');f.on("click",function(){Designer.stage.selection.cssPreview("font-style italic");Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});e.append(f);f=$('<div id="textStyleTwo" class="toolButton toolButtonTwo">U</div>');f.on("click",function(){Designer.stage.selection.cssPreview("text-decoration underline");
Designer.stage.commit();$(".DesignerHandle").trigger("update");return!1});e.append(f);f=$('<div id="textStyleThree" class="toolButton toolButtonThree">Auto</div>');f.on("click",function(){Designer.stage.selection.cssPreview({"text-decoration":"none","font-weight":"normal","font-style":"normal"});return!1});e.append(f);f=$('<div class="clear"></div>');p.append(f);var m=$('<textarea id="DesignerStyleEditorCssEditor"></textarea>');a.get("style")&&m.val(a.get("style"));m.on("tap mousedown click slide slidestart slideend mouseup",
function(a){a.stopPropagation()});Designer.styleEditor.livePreviewScrap=a;m.on("keyup",Designer.styleEditor.livePreviewStart);d.append(m);e=$('<div id="DesignerStyleEditorBottomBar"></div>');m.append(e);var v=$('<div id="DesignerStyleEditorSaveButton">Save</div>');v.on("click",function(){Designer.stage.commit();$(".DesignerHandle").trigger("update");d.remove();c.remove()});m.append(v);$("body").append(d);var r;$(".colorPicker").spectrum({color:h,move:function(a){Designer.stage.selection.cssPreview("background-color "+
a.toHexString());h=a.toHexString()},change:function(a){$("#basic-log").text("change called: "+a.toHexString());h=a.toHexString()},show:function(a){r="background-color "},hide:function(){Designer.stage.commit();$(".DesignerHandle").trigger("update")}});$(".colorBorderPicker").spectrum({color:n,move:function(a){Designer.stage.selection.cssPreview("border-color "+a.toHexString());n=a.toHexString()},change:function(a){$("#basic-log").text("change called: "+a.toHexString());n=a.toHexString()},show:function(){r=
"border-color "},hide:function(){Designer.stage.commit();$(".DesignerHandle").trigger("update")}});$(".colorFontPicker").spectrum({color:b,move:function(a){Designer.stage.selection.cssPreview("color "+a.toHexString());n=a.toHexString()},change:function(a){$("#basic-log").text("change called: "+a.toHexString());n=a.toHexString()},show:function(){r="color "},hide:function(){Designer.stage.commit();$(".DesignerHandle").trigger("update")}});$(document).on("slide slidestart slideend",".sp-container",function(){return!1});
$(".sp-input[type=text]").on("keydown",function(a){if(13==a.which)return a.preventDefault(),a=$(this).val(),Designer.stage.selection.css(r+a),!1});$(".colorFont .sp-replacer").addClass("fontColorButton");$(".colorFont .sp-preview").addClass("fontColorLine");$(".colorFont .sp-replacer").append('<img src="/nudgepad/public/images/letter.png">');$(".colorBorder .sp-replacer").addClass("borderColorButton");$(".colorBorder .sp-preview").addClass("borderColorLine");$(".colorBackground .sp-replacer").addClass("backgroundColorButton");
(function(){$(":input[name=fontDropdown] option").each(function(a,b){$(b).text()+"px"==s&&$(this).attr("selected","selected")})})();(function(){$(":input[name=fontFamilyDropdown] option").each(function(a,b){$(b).text()==t&&$(this).attr("selected","selected")})})();b=d.position().top+d.outerHeight()-Designer.stage.height();0<b&&($("#DesignerStage").scrollTop($("#DesignerStage").scrollTop()+b),d.css("top",parseFloat(d.css("top"))-b));b=d.position().left+d.outerWidth()-$(window).width();0<b&&($("#DesignerStage").scrollLeft($("#DesignerStage").scrollLeft()+
b),d.css("left",parseFloat(d.css("left"))-b))};
Designer.updateTabs=function(){$("#DesignerTabs").html("");var a=Project.get("pages").keys;_.each(a,function(a){var b=$("<span>"+a+"</span>");a===Designer.stage.activePage&&b.css("color","white");var d="";Screens.each(function(e,k){if(k.get("id")===Screen.get("id")||"Designer"!==k.get("tool")||k.get("page")!==a)return!0;d+=k.get("name")+"("+k.get("device")+") ";b.addClass("DesignerOpenPage")});b.attr("title",d);b.on("click",function(){mixpanel.track("I clicked a page tab");Designer.stage.open($(this).text());
return!0});b.attr("value",a);$("#DesignerTabs").append(b)})};Designer.isFirstOpen=!0;Designer.on("page",Designer.updateTabs);Designer.on("step",Designer.stage.updateTimeline);Designer.on("ready",function(){$("#Designer").hide()});
Designer.on("open",function(){Designer.grid=new Grid;$("#DesignerStage,#DesignerBar").show();Screens.on("change",Designer.updateSelections);Screens.on("change",Designer.updateTabs);Project.on("delete",Designer.updateTabs);Lasso.selector="#DesignerStageBody .DesignerScrap:visible";$(document).on("lasso",".DesignerScrap",function(){$(this).selectMe(!0);return!1});Lasso.enable();$(document).on("slidestart",Designer.pen.draw);$("#DesignerStage").on("click",Designer.pen.insertTextBlock);$(document).on("dragstart",
"img",function(a){a.preventDefault()});var a=store.get("activePage")||"index";Project.get("pages "+a)?Designer.stage.open(a):Designer.menu.create();navigator.userAgent.match(/iPad|iPhone|iPod/i)||($(document).on("touchstart",Designer.stopPropagation),$(document).on("touchmove",Designer.preventDefault));window.addEventListener("copy",Designer.oncopy,!1);window.addEventListener("cut",Designer.oncut,!1);window.addEventListener("paste",Designer.onpaste,!1);window.addEventListener("resize",Designer.onresize,
!1);$("body").on("keydown",Designer.onkeydown);Events.shortcut.shortcuts=Designer.shortcuts;navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?(document.addEventListener("touchstart",Designer.Mouse.onTouchStart,!0),document.addEventListener("touchend",Designer.Mouse.onTouchEnd,!0),document.addEventListener("touchmove",Designer.Mouse.onTouchMove,!0)):(document.addEventListener("mousedown",Designer.Mouse.onmousedown,!0),document.addEventListener("mousemove",Designer.Mouse.onmousemove,!0),document.addEventListener("mouseup",
Designer.Mouse.onmouseup,!0));Designer.isFirstOpen&&(Designer.isFirstOpen=!1,Designer.trigger("firstOpen"));$("#DesignerComponentsTab").trigger("click")});
Designer.on("close",function(){$(document).off("slidestart",Designer.pen.draw);$("#DesignerImagesRibbon,#DesignerComponentsRibbon").hide();$("#DesignerStage,#DesignerBar").hide();Designer.off("selection",Designer.broadcastSelection);Screens.off("change",Designer.updateSelections);Screens.off("change",Designer.updateTabs);$("#DesignerStage").off("click",Designer.pen.insertTextBlock);Project.off("delete",Designer.updateTabs);Designer.stage.close();if(!navigator.userAgent.match(/iPad|iPhone|iPod/i))return null;
$(document).off("touchstart",Designer.stopPropagation);$(document).off("touchmove",Designer.preventDefault);window.removeEventListener("copy",Designer.oncopy,!1);window.removeEventListener("cut",Designer.oncut,!1);window.removeEventListener("paste",Designer.onpaste,!1);window.removeEventListener("resize",Designer.onresize,!1);$("body").off("keydown",Designer.onkeydown);Events.shortcut.shortcuts={};navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?(document.removeEventListener("touchstart",Designer.Mouse.onTouchStart,
!0),document.removeEventListener("touchend",Designer.Mouse.onTouchEnd,!0),document.removeEventListener("touchmove",Designer.Mouse.onTouchMove,!0)):(document.removeEventListener("mousedown",Designer.Mouse.onmousedown,!0),document.removeEventListener("mousemove",Designer.Mouse.onmousemove,!0),document.removeEventListener("mouseup",Designer.Mouse.onmouseup,!0))});
Designer.on("open",function(){Events.shortcut.onfire=Designer.trackShortcuts;$(document).on("click","a.DesignerScrap, .DesignerScrap a, .DesignerScrap div",Scrap.disableLinks);$("#DesignerStage").on("tap",".DesignerScrap",Scrap.selectOnTap);$("body").on("hold",".DesignerScrap",Scrap.unlock);$(document).on("mousedown click","input.DesignerScrap,textarea.DesignerScrap",Designer.returnFalse);$(document).on("focus","input.DesignerScrap,textarea.DesignerScrap",Designer.blurThis);$("#DesignerStage").on("tap",
Designer.stage.clearOnTap);$(window).on("resize",Designer.stage.onresize)});Designer.on("selection",Designer.broadcastSelection);
Designer.on("close",function(){$(document).off("click","a.DesignerScrap, .DesignerScrap a, .DesignerScrap div",Scrap.disableLinks);$("#DesignerStage").off("tap",".DesignerScrap",Scrap.selectOnTap);$("body").off("hold",".DesignerScrap",Scrap.unlock);$(document).off("mousedown click","input.DesignerScrap,textarea.DesignerScrap",Designer.returnFalse);$(document).off("focus","input.DesignerScrap,textarea.DesignerScrap",Designer.blurThis);$("#DesignerStage").off("tap",Designer.stage.clearOnTap);$(window).off("resize",
Designer.stage.onresize)});Designer.on("commit",Designer.stage.expand);Designer.on("page",function(){Designer.stage.expand();Designer.stage.views.get(Designer.stage.currentView)();$("#DesignerStageBody").width();Designer.stage.reset()});Designer.trackShortcuts=function(a){mixpanel.track("I used the Designer keyboard shortcut "+a)};Designer.shortcuts={};Designer.shortcuts["ctrl+a"]=Designer.stage.selectAll;Designer.shortcuts["meta+a"]=Designer.stage.selectAll;Designer.shortcuts["meta+p"]=Designer.stage.publish;
Designer.deleteShortcut=function(){Designer.stage.selection.delete();Designer.stage.commit()};Designer.shortcuts["delete"]=Designer.deleteShortcut;Designer.shortcuts.backspace=Designer.deleteShortcut;Designer.shortcuts["ctrl+d"]=Designer.stage.selection.duplicate;Designer.shortcuts["meta+d"]=Designer.stage.selection.duplicate;Designer.editSourceToggle=function(){Designer.stage.selection.elements().length?Designer.stage.selection.editSource():Designer.stage.editSource()};
Designer.shortcuts["ctrl+u"]=Designer.editSourceToggle;Designer.shortcuts["meta+u"]=Designer.editSourceToggle;Designer.shortcuts["meta+backspace"]=Designer.menu.delete;Designer.shortcuts["meta+o"]=Designer.menu.spotlight;Designer.shortcuts["ctrl+o"]=Designer.menu.spotlight;Designer.shortcuts["ctrl+n"]=Designer.menu.blank;Designer.shortcuts["meta+n"]=Designer.menu.blank;Designer.shortcuts.esc=Designer.stage.selection.clear;Designer.shortcuts["shift+n"]=Designer.menu.duplicate;
Designer.shortcuts.up=function(){Designer.stage.selection.move(0,-1)};Designer.shortcuts.left=function(){Designer.stage.selection.move(-1,0)};Designer.shortcuts.down=function(){Designer.stage.selection.move(0,1)};Designer.shortcuts.right=function(){Designer.stage.selection.move(1,0)};Designer.shortcuts["shift+up"]=function(){Designer.stage.selection.move(0,-10)};Designer.shortcuts["shift+left"]=function(){Designer.stage.selection.move(-10,0)};
Designer.shortcuts["shift+down"]=function(){Designer.stage.selection.move(0,10)};Designer.shortcuts["shift+right"]=function(){Designer.stage.selection.move(10,0)};Designer.shortcuts["alt+left"]=Designer.stage.back;Designer.shortcuts["alt+right"]=Designer.stage.forward;Designer.shortcuts["ctrl+z"]=Designer.stage.undo;Designer.shortcuts["meta+z"]=Designer.stage.undo;Designer.shortcuts["meta+shift+z"]=Designer.stage.redo;Designer.shortcuts["meta+y"]=Designer.stage.redo;Designer.shortcuts["ctrl+y"]=Designer.stage.redo;
Designer.shortcuts["shift+/"]=function(){var a=$("#DesignerShortcuts").html();PreviewBox.toggle(a)};Designer.realtime=function(a,c){var b=a.split(/ /g);if("timelines"!==b[0]||b[1]!==Designer.stage.activePage)return!0;Designer.stage.isBehind();c.get("values");Designer.trigger("step");Designer.stage.redo()};Designer.on("close",function(){Project.off("incoming-append",Designer.realtime)});Designer.on("open",function(){Project.on("incoming-append",Designer.realtime)});var Files=new Tool("Files");
Files.set("path","");Files.set("description","View and edit the files of your project.");Files.on("open",function(){Files.refresh()});Files.on("set",function(a){"path"===a&&Files.renderExplorer()});Files.isImage=function(a){return a.match(/\.png|jpeg|jpg|gif$/i)?!0:!1};Files.newFile=function(){var a=prompt("Enter the filename");if(!a)return!1;var c=Files.get("path")?Files.get("path")+" ":"";expressfs.create((c+a).replace(/ /g,"/"),"",Files.refresh)};
Files.newFolder=function(){var a=prompt("Enter the folder name");if(!a)return!1;var c=Files.get("path")?Files.get("path")+" ":"";expressfs.mkdir((c+a).replace(/ /g,"/"),Files.refresh)};
Files.renderExplorer=function(){var a=Files.get("files");Files.get("path")&&(a=a.get(Files.get("path")));var c='<table id="FilesExplorer">',c=c+'<tr class="FilesExplorerHeader"><td>Filename</td><td></td><td></td><td></td><td>Size</td><td>Age</td></tr>',b=Files.get("path")?Files.get("path")+" ":"",d=_.filter(a.keys,function(b){return!a.get(b).get("timeSinceLastChange")}).sort(),e=_.filter(a.keys,function(b){return a.get(b).get("timeSinceLastChange")}).sort();d.concat(e).forEach(function(d){var e=a.get(d),
h="<tr";e.get("timeSinceLastChange")?(h+=' class="FilesExplorerFile" value="'+d+'" path="'+b+d+'">',h=Files.isImage(d)?h+('<td class="FilesExplorerPreview">'+d+"</td>"):h+('<td class="FilesExplorerEdit">'+d+"</td>"),h=b.match(/^private/)?h+"<td></td>":h+('<td class="FilesHiddenAction FilesExplorerVisit"><a target="published" href="/'+b.replace(/ /g,"/")+d+'">Visit</a></td>'),h+='<td class="FilesHiddenAction FilesExplorerRename">Rename</td><td class="FilesHiddenAction FilesExplorerRemove">Delete</td>',
h+="<td>"+e.get("size")+"</td>",h+="<td>"+moment(parseFloat(e.get("mtime"))).fromNow()+"</td>"):(h+=' class="FilesExplorerFolder" value="'+d+'" path="'+b+d+'">',h+='<td class="FilesExplorerFolderName">'+d+"</td>",h+="<td></td>",h+='<td class="FilesHiddenAction FilesExplorerRename">Rename</td>',h+='<td class="FilesHiddenAction FilesExplorerRemoveFolder">Delete</td>',h+="<td></td><td></td>");h+="</tr>";c+=h});var c=c+"</table>",k="<span onclick=\"Files.set('path', '')\">"+document.location.host+"</span>";
if(b){var h="";b.split(/ /g).forEach(function(a,b){k+=" <span onclick=\"Files.set('path', '"+h+a+"')\">"+a+"</span>";h+=a+" "})}$("#FilesExplorerPath").html(k);$("#FilesExplorerHolder").html(c)};Files.refresh=function(){$.get("/nudgepad.explorer.list",{},function(a){Files.set("files",new Space(a));Files.renderExplorer()})};$(document).on("click",".FilesExplorerEdit",function(){var a=$(this).parent().attr("path").replace(/ /g,"/");Explorer.edit(a)});
$(document).on("click",".FilesExplorerPreview",function(){var a=$(this).parent().attr("path").replace(/ /g,"/");PreviewBox.open('<img src="'+a+'">')});$(document).on("click",".FilesExplorerRename",function(){var a=prompt("Rename this file",$(this).parent().attr("value"));if(!a)return!1;var c=Files.get("path")?Files.get("path")+" ":"";expressfs.rename($(this).parent().attr("path").replace(/ /g,"/"),(c+a).replace(/ /g,"/"),Files.refresh)});
$(document).on("click",".FilesExplorerRemove",function(a){var c=$(this).parent().attr("value");if(!a.metaKey&&!confirm("Are you sure you want to delete "+c+"?"))return!1;expressfs.unlink($(this).parent().attr("path").replace(/ /g,"/"),function(){Alerts.success(c+" deleted");Files.refresh()})});
$(document).on("click",".FilesExplorerRemoveFolder",function(){var a=$(this).parent().attr("value");if(!event.metaKey&&!confirm("Are you sure you want to delete "+a+"?"))return!1;var c=$(this).parent().attr("path").replace(/ /g,"/");expressfs.rmdir(c,function(){Alerts.success(a+" deleted");Files.refresh()})});$(document).on("click",".FilesExplorerFolderName",function(){Files.set("path",$(this).parent().attr("path"))});Files.drop={};
Files.drop.traverseFileTree=function(a,c){c=c||"";a.isFile?a.file(function(a){console.log("File:",c+a.name);Files.drop.sendFile(c,a)}):a.isDirectory&&a.createReader().readEntries(function(b){for(var d=0;d<b.length;d++)Files.drop.traverseFileTree(b[d],c+a.name+"/")})};
Files.drop.sendFile=function(a,c){var b;b="/nudgepad.explorer.upload"+("?path="+Files.get("path").replace(" ","/")+"/"+(a?a:""));var d=new XMLHttpRequest,e=new FormData;d.open("POST",b,!0);d.onreadystatechange=function(){4==d.readyState&&200==d.status?(Alerts.success(d.responseText),Files.refresh()):500==d.status&&Alerts.error(d.responseText)};b=c.name.replace(/ /g,"-");e.append("filename",b);e.append("myFile",c);d.send(e)};
Files.drop.ondrop=function(a){console.log("yo");a.preventDefault();a=a.dataTransfer.items;for(var c=0;c<a.length;c++){var b=a[c].webkitGetAsEntry();b&&Files.drop.traverseFileTree(b)}};Files.drop.ondragover=function(a){a.preventDefault()};Files.on("close",function(){window.removeEventListener("dragover",Files.drop.ondragover);window.removeEventListener("drop",Files.drop.ondrop)});
Files.on("open",function(){window.addEventListener("dragover",Files.drop.ondragover,!1);window.addEventListener("drop",Files.drop.ondrop,!1)});var GitHub=new Tool("GitHub");GitHub.set("description","Sync your project with GitHub.");GitHub.add=function(){var a=$("#GitHubFilepath").val();GitHub.exec("git add "+a,function(){Alerts.success("Added");GitHub.status()});$("#GitHubFilepath").val("")};GitHub.addAll=function(){GitHub.exec("git add .",GitHub.status)};
GitHub.addOrigin=function(){var a=prompt("Enter origin URI");if(!a)return!1;GitHub.exec("git remote add origin "+a,function(){Alerts.success("Origin Updated")})};GitHub.cloneRepo=function(){var a=prompt("Enter clone URI");if(!a)return!1;GitHub.exec("git clone "+a+" temp; mv temp/* .; mv temp/.git .; rm -rf temp",function(){Alerts.success("Cloned")})};GitHub.commit=function(){var a=$("#GitHubCommitMessage").val();GitHub.exec('git commit -am "'+a+'"',function(){Alerts.success("Commit Received")});$("#GitHubCommitMessage").val("")};
GitHub.deployKey=function(){expressfs.exists("private/deploy.key",function(a){a?expressfs.readFile("private/deploy.key",function(a){a=$('<pre id="PreviewBoxWhiteBox" style="text-align: left;">'+a+"</pre>");PreviewBox.open(a)}):GitHub.generateKey()})};GitHub.exec=function(a,c){var b=$("#GitHubStatus");b.html("");$.post("nudgepad.exec",{command:a},function(a){b.append(a+"\n");c&&c()}).error(function(a,c){b.append("ERROR\n");b.append(a.responseText+"\n")})};
GitHub.generateKey=function(){GitHub.exec('ssh-keygen -t rsa -N "" -f '+(Explorer.paths.private+"deploy.key"),function(){Alerts.success("Git SSH key created");GitHub.status()})};GitHub.init=function(){GitHub.exec("git init",function(){Alerts.success("Git init OK");GitHub.status()})};GitHub.pull=function(){GitHub.exec("git pull")};GitHub.push=function(){GitHub.exec("git push -u origin master")};
GitHub.setOrigin=function(){var a=prompt("Enter origin URI");if(!a)return!1;GitHub.exec("git remote set-url origin "+a,function(){Alerts.success("Origin Updated")})};GitHub.status=function(){GitHub.exec("git status")};GitHub.on("open",GitHub.status);var Home=new Tool("Home");
Home.renderMenu=function(){$("#HomeColumn").html("");var a=_.without(Tool.tools,"Home","Designer","Files","Blog","AppMaker","Team");a.unshift("Designer","Files","Team","Blog","AppMaker");var c=["rgb(26,134,214)","rgb(36,65,112)","rgb(231,189,44)","rgb(224,54,52)","rgb(71,41,54)"];store.get("homeShowAll")||(a=_.filter(a,function(a,b){return window[a].get("beta")?!1:!0}));for(var b in a){var d=window[a[b]];$("#HomeColumn").append(Home.toButton(d.get("name"),d.get("description"),c[b?b%c.length:0],d.get("beta")))}};
Home.toggleAll=function(){store.get("homeShowAll")?store.remove("homeShowAll"):store.set("homeShowAll","true");Home.renderMenu()};Home.toButton=function(a,c,b,d){return'<div class="HomeSquare" style="background-color : '+b+'" onclick="Launcher.open(\''+a+'\')">    <div class="HomeTopBlock">'+a+'</div>    <div class="HomeSubBlock">'+c+"</div></div>"};Home.on("open",function(){Home.renderMenu();$("#Home").on("hold",Home.toggleAll)});Home.on("close",function(){$("#Home").off("hold",Home.toggleAll)});
var Layout=new Tool("Layout");Layout.set("description","Layout pages quickly.");Layout.set("beta",!0);
Layout.on("open",function(){var a=$(".LayoutCell").clone();$("#LayoutStage").on("click",".splitHorizontal",function(){var c=a.clone();c.css("height","50%");$(this).parent().parent().append(c);c=a.clone();c.css("height","50%");$(this).parent().parent().append(c);$(this).parent().remove()});$("#LayoutStage").on("click",".splitVertical",function(){var c=a.clone();c.css("width","50%");$(this).parent().parent().append(c);c=a.clone();c.css("width","50%");$(this).parent().parent().append(c);$(this).parent().remove()});
$("#LayoutStage").on("click",".layoutText",function(){var a=$(this).parent().parent();a.attr("contenteditable",!0).css("line-height",a.height()+"px");$(this).parent().remove();a.focus()});$("#LayoutStage").on("slidestart",".LayoutCell",function(){$(this).css("background","red");return!1});$("#LayoutStage").on("slideend",".LayoutCell",function(a,b){var d=Events.slide.mousedown.x,e=Events.slide.mousedown.y,k=b.x,h=b.y;$(".LayoutCell").getElementsByLine(d,e,k,h).forEach(function(a){if($(a).find(".LayoutCell").length)return!0;
$(a).css("background","blue")});return!1})});Layout.publish=function(){var a=$("#LayoutTemplate").html(),c=$("#LayoutStage").clone();c.find(".LayoutCellControls").remove();c.find(".LayoutCell").removeAttr("contenteditable");c=c.html();c=a.replace(/BODY/,c);a=prompt("Enter a filename","layout.html");if(!a)return!1;expressfs.writeFileAndOpen(a,c,"published")};Layout.splitVertical=function(){$(".selected").append('<div class="LayoutCell" style="width: 50%;"></div><div class="LayoutCell" style="width: 50%;"></div>')};
Layout.splitHorizontal=function(){$(".selected").append('<div class="LayoutCell" style="height: 50%;"></div><div class="LayoutCell" style="height: 50%;"></div>')};var isRectangleIntersectedByLine=function(a,c,b,d,e,k,h,g){var f=e,n=h;e>h&&(f=h,n=e);n>b&&(n=b);f<a&&(f=a);if(f>n)return!1;a=k;b=g;h-=e;1E-7<Math.abs(h)&&(g=(g-k)/h,e=k-g*e,a=g*f+e,b=g*n+e);a>b&&(f=b,b=a,a=f);b>d&&(b=d);a<c&&(a=c);return a>b?!1:!0};
$.fn.getElementsByLine=function(a,c,b,d){var e=[];$(this).each(function(){var k=$(this),h,g,f,n;h=k.offset().left;g=k.offset().left+k.outerWidth();f=k.offset().top;n=k.offset().top+k.outerHeight();isRectangleIntersectedByLine(h,f,g,n,a,c,b,d)&&e.push(k)});return e};var Move=new Tool("Move");Move.set("path","");Move.set("description","Move or copy your project to a new domain.");
Move.import=function(){TextPrompt.open("Import a Project to this Move","",function(a){$.post("/nudgepad.import",{space:a},function(a){Alerts.success("Imported files.")})})};Move.on("open",function(){$("#MoveDomain").val("copyof"+document.location.host);$("#MoveServer").val(Project.get("hostname"))});
Move.cloneProject=function(){var a=$("#MoveDomain").val(),c=$("#MoveServer").val();$.get("/nudgepad.export?t="+(new Date).getTime(),{},function(b){var d=$("<form>",{action:"http://"+c+"/create",method:"post"}).append($("<input>",{name:"domain",value:a,type:"hidden"})).append($("<input>",{name:"email",value:Cookie.email,type:"hidden"})).append($("<input>",{name:"timestamp",value:(new Date).getTime(),type:"hidden"})).append($("<input>",{name:"relaxed",value:"true",type:"hidden"})),e=$('<input name="clone" type="hidden">');
e.val(b);d.append(e);d.submit()})};var Redirect=new Tool("Redirect");Redirect.set("description","Manage URL redirects for your project.");Redirect.on("open",function(){expressfs.readFile("private/redirects.space",function(a){$("#RedirectCode").val(a)})});Redirect.save=function(){var a=$("#RedirectCode").val();expressfs.writeFile("private/redirects.space",a,function(a){Alerts.success("Saved. Please restart >")})};var Server=new Tool("Server");Server.set("path","");Server.set("description","Manage your project's web server.");
Server.consoleSend=function(){var a=$("#ServerConsoleInput"),c=$("#ServerConsoleCheckbox"),b=$("#TextPromptTextarea"),d=a.val(),e="nudgepad.exec";c.is(":checked")&&(e="nudgepad.console");$.post(e,{command:d},function(c){b.val(b.val()+(">"+d.replace(/\n/g,"> \n")+"\n")+c+"\n");b.scrollTop($(b)[0].scrollHeight+"");a.val("");a.focus()}).error(function(c,e){mixpanel.track("I used the console and got an error");b.val(b.val()+">"+d.replace(/\n/g,"> \n")+"\nERROR\n"+c.responseText+"\n");b.scrollTop($("#ServerConsole")[0].scrollHeight+
"");a.val("");a.focus()})};Server.console=function(){mixpanel.track("I opened the console");var a=$("#ServerConsoleContainer");TextPrompt.open("","",function(){Server.consoleSend();return!1});TextPrompt.onclose=function(){a.appendTo("body");a.hide()};a.appendTo("#TextPromptButtonHolder");a.show();$("#ServerConsoleInput").focus()};
Server.refresh=function(){$.get("/nudgepad.status",{},function(a){Server.set("status",a);$("#ServerStatusArea").text(a)});$.get("/nudgepad.logs",{},function(a){Server.set("log",a);$("#ServerLogHolder").html(a);$("#ServerLogHolder").scrollTop($("#ServerLogHolder").height())})};Server.stream=function(a){a=a.replace(/\</g,"&lt;")+"\n";$("#ServerStream").append(a)};
Server.test=function(){Test.add("stream",function(){$.get("/nudgepad.stream",{m:"hi world"},function(){Test.equal("hi world",$("#ServerStream").text())})});Test.start()};$(document).on("ready",function(){$("#ServerConsoleInput").on("enterkey",Server.consoleSend)});Server.on("once",function(){Socket.on("stream",Server.stream)});Server.on("open",function(){Server.get("log")||Server.refresh()});var Share=new Tool("Share");Share.set("description","Share your project for others to remix.");
Share.set("beta",!0);Share.on("open",function(){Share.update();expressfs.readFile("private/sharecode.txt",function(a){a?Share.code=a:Share.install()})});Share.install=function(){var a=Math.floor(9E6*Math.random())+1E6;Share.code=a;expressfs.create("private/sharecode.txt",a,function(a){console.log(a);Share.update();a?console.log(a):Alerts.success("Share Code Created")})};
Share.update=function(){var a='<form method="post" action="http://'+Project.get("hostname")+'/create">\n',a=a+('  <input type="hidden" name="dir" value="/nudgepad/projects/'+document.location.host+'">\n'),a=a+('  <input type="hidden" name="sharecode" value="'+Share.code+'">\n'),a=a+'  <button type="submit">Create</button>\n</form>';$("#ShareCode").val(a)};var __slice=Array.prototype.slice;
(function(a){var c;a.fn.sketch=function(){var b,d,e;d=arguments[0];b=2<=arguments.length?__slice.call(arguments,1):[];1<this.length&&a.error("Sketch.js can only be called on one element at a time.");e=this.data("sketch");if("string"===typeof d&&e)if(e[d]){if("function"===typeof e[d])return e[d].apply(e,b);if(0===b.length)return e[d];if(1===b.length)return e[d]=b[0]}else return a.error("Sketch.js did not recognize the given command.");else{if(e)return e;this.data("sketch",new c(this.get(0),d));return this}};
c=function(){function b(b,c){this.el=b;this.canvas=a(b);this.context=b.getContext("2d");this.options=a.extend({toolLinks:!0,defaultTool:"marker",defaultColor:"#000000",defaultSize:5},c);this.painting=!1;this.color=this.options.defaultColor;this.size=this.options.defaultSize;this.tool=this.options.defaultTool;this.actions=[];this.action=[];this.canvas.bind("click mousedown mouseup mousemove mouseleave mouseout touchstart touchmove touchend touchcancel",this.onEvent);this.options.toolLinks&&a("body").delegate('a[href="#'+
this.canvas.attr("id")+'"]',"click",function(b){var c,d,e,n,p;b=a(this);d=a(b.attr("href")).data("sketch");p=["color","size","tool"];e=0;for(n=p.length;e<n;e++)c=p[e],b.attr("data-"+c)&&d.set(c,a(this).attr("data-"+c));a(this).attr("data-download")&&d.download(a(this).attr("data-download"));return!1})}b.prototype.download=function(a){a||(a="png");"jpg"===a&&(a="jpeg");return window.open(this.el.toDataURL("image/"+a))};b.prototype.set=function(a,b){this[a]=b;return this.canvas.trigger("sketch.change"+
a,b)};b.prototype.startPainting=function(){this.painting=!0;return this.action={tool:this.tool,color:this.color,size:parseFloat(this.size),events:[]}};b.prototype.stopPainting=function(){this.action&&this.actions.push(this.action);this.painting=!1;this.action=null;return this.redraw()};b.prototype.onEvent=function(b){b.originalEvent&&b.originalEvent.targetTouches&&(b.pageX=b.originalEvent.targetTouches[0].pageX,b.pageY=b.originalEvent.targetTouches[0].pageY);a.sketch.tools[a(this).data("sketch").tool].onEvent.call(a(this).data("sketch"),
b);b.preventDefault();return!1};b.prototype.redraw=function(){var b;this.el.width=this.canvas.width();this.context=this.el.getContext("2d");b=this;a.each(this.actions,function(){if(this.tool)return a.sketch.tools[this.tool].draw.call(b,this)});if(this.painting&&this.action)return a.sketch.tools[this.action.tool].draw.call(b,this.action)};return b}();a.sketch={tools:{}};a.sketch.tools.marker={onEvent:function(a){switch(a.type){case "mousedown":case "touchstart":this.startPainting();break;case "mouseup":case "mouseout":case "mouseleave":case "touchend":case "touchcancel":this.stopPainting()}if(this.painting)return this.action.events.push({x:a.pageX-
this.canvas.offset().left,y:a.pageY-this.canvas.offset().top,event:a.type}),this.redraw()},draw:function(a){var c,e,k,h;this.context.lineJoin="round";this.context.lineCap="round";this.context.beginPath();this.context.moveTo(a.events[0].x,a.events[0].y);h=a.events;e=0;for(k=h.length;e<k;e++)c=h[e],this.context.lineTo(c.x,c.y);this.context.strokeStyle=a.color;this.context.lineWidth=a.size;return this.context.stroke()}};return a.sketch.tools.eraser={onEvent:function(b){return a.sketch.tools.marker.onEvent.call(this,
b)},draw:function(b){var c;c=this.context.globalCompositeOperation;this.context.globalCompositeOperation="copy";b.color="rgba(0,0,0,0)";a.sketch.tools.marker.draw.call(this,b);return this.context.globalCompositeOperation=c}}})(jQuery);var Sketch=new Tool("Sketch");Sketch.set("description","Sketch pictures for your project.");Sketch.on("open",function(){$("#SketchCanvas").attr("width",$(window).width()).attr("height",$(window).height()).sketch()});
Sketch.save=function(){var a=prompt("Enter a filename","untitled.png");if(!a)return!0;var c=$("#SketchCanvas")[0].toDataURL("png"),c=c.replace("data:image/png;base64,","");expressfs.writeFileBase64(a,c,function(){Alerts.success("Saved")})};var Support=new Tool("Support");Support.set("description","Get help with your project from NudgePad.");var Team=new Tool("Team");Team.set("description","Invite people to work on your project.");Team.on("open",function(){$("#TeamMyEmail").text(Cookie.email);Team.refresh()});
Team.invite=function(){var a=$("#TeamEmail").val();$.post("/nudgepad.invite",{emails:a},function(a){Alerts.success("Invites Sent");Team.refresh();mixpanel.track("I invited people")})};Team.refresh=function(){$("#TeamCurrent").html("");$.get("/nudgepad.project.team",function(a){(new Space(a)).each(function(a,b){$("#TeamCurrent").append(a+"<br>")})})};
Team.updateEmail=function(){var a=prompt("Update your new email address",Cookie.email);if(!a||a===Cookie.email)return!0;if(!Team.validateEmail(a))return Alerts.error("Invalid Email");$.post("/nudgepad.updateEmail",{email:a},function(){nudgepad.warnBeforeReload=!1;document.location="/nudgepad?tool=Home"})};Team.validateEmail=function(a){return/\S+@\S+\.\S+/.test(a)};var module=module||void 0;
(function(a){function c(a,b,c,d){s({auth:n&&p?{username:n,password:p,sendImmediately:!0}:void 0,method:a,uri:b,json:c},function(a,b,c){if(a)d(a);else{if(200===b.statusCode)return d(null,c);d(c.error)}})}function b(a,b,c,d){var e=new XMLHttpRequest;f?e.open(a,b,!0,n,p):e.open(a,b,!0);t&&e.setRequestHeader("x-csrf-token",t);e.setRequestHeader("Content-Type","application/json; charset=utf-8");e.onreadystatechange=function(){var a,b;if(4===this.readyState){try{a=JSON.parse(this.responseText),b=a.error}catch(c){b=
c}b?d(b):d(null,a)}};e.send(JSON.stringify(c))}function d(a,b,c,d){"function"===typeof c?(d=c,c={}):"string"===typeof c&&(b=c.length?b+"?"+c:b,c={});b=g+b;h(a,b,c,d)}function e(a,b){function c(){c.instance||(c.instance=k(b));return c.instance}function d(b,c,e){delete b[c];var f=[];a.tags.forEach(function(a){e.test(a)&&f.push(a)});return b[c]=f}var e={get appTags(){return d(this,"appTags",/^[^@]+\:[^:]+/)},get userTags(){return d(this,"userTags",/^[^@]+@[^@]+\:[^:]+/)},get rawTags(){return d(this,
"rawTags",/^[^:]+$/)},taggedWithAny:function(b){var c=a.tags;b=Array.isArray(b)?b:[b];for(var d=0;d<b.length;d++)if(-1<c.indexOf(b[d]))return!0;return!1},remixes:function(a){a=a||function(){};c().find({remixedFrom:e._id}).then(a)},locales:function(a){a=a||function(){};this.remixes(function(b,c){if(b)a(b);else{var d=[];c.forEach(function(a){a.locale!==e.locale&&d.push(a)});a(null,d)}})},original:function(a){a=a||function(){};e.remixedFrom?c().find({_id:e._id}).then(a):a(null,null)},update:function(a,
b){b=b||function(){};c().update(e._id,{maker:a,make:e},b)}};"url contentType locale title description author published tags thumbnail username remixedFrom _id emailHash createdAt updatedAt".split(" ").forEach(function(b){e[b]=a[b]});e.id=e._id;return e}var k,h,g,f,n,p,t,s;k=function(a){function b(a){return a.map(function(a){return a.trim()}).join(",")}g=a.apiURL;if(f=a.auth)f=f.split(":"),n=f[0],p=f[1];a.csrf&&(t=a.csrf);return{queryPairs:[],addPair:function(a,b,c){b=b?b.toString():"";if(!b.length)return this;
b=c?"{!}"+b:b;this.queryPairs.push(encodeURIComponent(a)+"="+encodeURIComponent(b));return this},find:function(a){a=a||{};for(var b in a)if(a.hasOwnProperty(b)&&this[b])if(Array.isArray(a[b]))this[b].apply(this,a[b]);else this[b](a[b]);return this},author:function(a,b){return this.addPair("author",a,b)},user:function(a,b){return this.addPair("user",a,b)},tags:function(a,c){if(a){var d=a.tags||a,e=a.execution||"and",d=Array.isArray(d)?b(d):b(d.split(","));return this.addPair("tags",e+","+d,c)}return this},
tagPrefix:function(a,b){return this.addPair("tagPrefix",a,b)},url:function(a,b){return this.addPair("url",a,b)},contentType:function(a,b){return this.addPair("contentType",a,b)},remixedFrom:function(a,b){return this.addPair("remixedFrom",a,b)},id:function(a,b){return this.addPair("id",a,b)},title:function(a,b){return this.addPair("title",a,b)},description:function(a,b){return this.addPair("description",a,b)},limit:function(a){return this.addPair("limit",a)},page:function(a){return this.addPair("page",
a)},sortByField:function(a,b){var c;"string"===typeof a&&(c=a+(","+(b?b:"desc")),this.addPair("sortByField",c));return this},then:function(b){var c=this.queryPairs.join("&");this.queryPairs=[];d("GET","/api/makes/search",c,function(c,d){if(c)b(c);else{for(var f=d.makes,g=0;g<f.length;g++)f[g]=e(f[g],a);b(null,f,d.total)}})},create:function(a,b){d("POST","/api/make",a,b);return this},update:function(a,b,c){d("PUT","/api/make/"+a,b,c);return this},remove:function(a,b){d("DELETE","/api/make/"+a,b);return this}}};
"undefined"!==typeof a&&a.exports?(s=require("request"),h=c,a.exports=k):(h=b,"function"===typeof define&&define.amd?define(function(){return k}):window.Make=k)})(module);var WebMaker=new Tool("WebMaker");WebMaker.set("description","Remix WebMaker templates in your project.");WebMaker.set("beta",!0);WebMaker.fetch=function(){(new Make({apiURL:"https://makeapi.webmaker.org"})).contentType("application/x-thimble").then(function(a,c){console.log(c)})};
WebMaker.on("open",function(){2>$(".MakeTemplate").length&&WebMaker.fetch()});
